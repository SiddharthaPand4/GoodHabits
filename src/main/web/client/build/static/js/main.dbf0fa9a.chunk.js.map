{"version":3,"sources":["services/axios.js","helpers/auth-header.js","helpers/config.js","helpers/history.js","services/UserService.js","components/Sidebar.js","components/Headbar.js","components/Footerbar.js","components/PrivateRoute.js","services/DashboardService.js","services/CommonService.js","views/HomeView.js","services/FeedService.js","views/FeedView.js","services/DeviceService.js","views/DeviceView.js","views/UserListView.js","views/DeviceConfigView.js","views/LoginView.js","services/TrafficIncidentService.js","views/IncidentListView.js","services/TriggerService.js","components/TriggerSet.js","views/TriggerView.js","components/GenericFilter.js","services/AnprService.js","views/AnprView.js","views/TrafficIncidentView.js","views/incidentsRepeated/IncidentTimeline.js","views/incidentsRepeated/IncidentRepeatedView.js","services/HotListVehicleService.js","components/HotListedVehicles/HotListedVehiclesList.js","views/IncidentHotlistView.js","views/masterData/IncidentTimeline.js","views/masterData/MasterDataView.js","App.js","serviceWorker.js","index.js","components/event.js"],"names":["HttpService","ax","axios","create","baseURL","timeout","headers","interceptors","request","use","config","token","JSON","parse","localStorage","getItem","Authorization","response","undefined","err","url","includes","Promise","reject","status","console","log","clear","window","location","Instance","authHeader","history","createBrowserHistory","UserService","userId","get","user","requestBody","userName","lastName","firstName","email","id","roles","method","data","stringify","delete","username","password","post","setItem","removeItem","push","EventBus","publish","Sider","Layout","SubMenu","Menu","Sidebar","state","collapsed","toggleCollapsed","setState","breakpoint","collapsedWidth","onBreakpoint","broken","onCollapse","type","className","src","theme","mode","defaultSelectedKeys","Item","key","to","title","onClick","logout","Component","Header","Headbar","style","background","padding","Footer","textAlign","PrivateRoute","component","rest","render","props","isLoggedIn","pathname","from","DashboardService","filter","fromDate","toDate","xAxis","fromDateString","moment","format","toDateString","index","this","getRandomColor","color","i","Math","floor","random","selectedCustomDateRangeEnum","selectedCustomDateRangeMoment","baseDate","from_date","to_date","startOf","endOf","subtract","CommonService","array","attr","value","length","RangePicker","Select","Option","DatePicker","HomeView","handleCancel","e","isOpencustomDateRangeModal","atcc","selectedCustomDateRange","selectedXAxisOption","chartData","labels","datasets","incident","getIncidentVehicleCount","bind","getAtccVehicleCount","getBarChartOptions","selectDateRange","selectXAxisOption","refresh","getDateRangeOptions","getXAxisOptions","handleDateRangeChange","graphName","graph","fromToDate","extractFromToDate","then","resposne","rawData","labelDates","rawDataByVehicleData","date","vehicleType","vehicleTypeIndex","dataSet","label","backgroundColor","getColor","vehicleCount","catch","error","helmetMissingIncidents","reverseDirectionIncidents","parseInt","sort","a","b","Moment","helmetMissingDataset","reverseDirectionDataset","dataValue","findIndex","dates","dateString","showCustomDateRangeModal","chartName","yAxisScaleLabel","yAxisLabel","responsive","maintainAspectRatio","animation","duration","hover","animationDuration","responsiveAnimationDuration","legend","position","scales","xAxes","stacked","ticks","beginAtZero","scaleLabel","display","labelString","yAxes","atccChartOptions","incidentChartOptions","onCancel","visible","footer","onChange","changedDateRange","overlay","options","FeedService","feed","ID","Text","Typography","FeedView","loading","videoVisible","feeds","subscribe","event","removeFeed","getFeeds","startFeed","stopFeed","WrappedFeedForm","Form","name","FeedForm","gutter","map","span","site","cover","alt","bordered","actions","submitted","loginError","handleSubmit","preventDefault","validationError","form","getFieldValue","addFeed","fieldsError","getFieldDecorator","getFieldsError","onSubmit","rules","required","message","addonBefore","placeholder","htmlType","disabled","Object","keys","some","field","DeviceService","DeviceView","device","getDevice","width","extra","fingerprint","model","license","registeredTo","Column","Table","confirm","Modal","UserListView","Button","Group","showModal","users","showUserDetails","addUser","refreshUsers","close","getUsers","getRoles","getUser","okText","okType","cancelText","onOk","deleteUser","success","WrappedUserForm","UserForm","bodyStyle","dataSource","pagination","scroll","x","dataIndex","text","record","href","showUser","showDeleteConfirm","createUser","initialValue","role","align","size","TabPane","Tabs","DeviceConfigView","deviceconfig","getDeviceConfig","tab","defaultActiveKey","onTabChange","LoginView","WrappedLoginForm","LoginForm","login","reload","xl","lg","md","sm","xs","prefix","block","withRouter","TrafficIncidentService","Panel","ColumnGroup","Collapse","ButtonGroup","TriggerService","trigger","put","TriggerSet","days","onChange0","onChange1","onChange2","onChange3","onChange4","onChange5","onChange6","onChangeValue","saveTrigger","deleteTrigger","setName","changed","idx","TriggerDays","Start","End","new","createTrigger","Day","target","selected","marks","day","start","end","dlist","min","max","range","TriggerView","triggers","tsRef","React","createRef","handleChange","newTrigger","getTriggers","selectedt","current","NewTrigger","ChangeTrigger","selectedname","Name","selector","ref","layout","page","pageSize","onFromDateChange","onFromTimeChange","onToDateChange","onToTimeChange","onPageChange","onPageSizeChange","handleRefresh","refreshNow","handleLayoutChange","handleFilterChange","time","fromTime","toTime","minuteStep","secondStep","icon","changeLayout","AnprService","lpr","Paragraph","AnprView","handleOnClick","events","workingEvent","workingEventLoading","magnifyEvent","magnifyEventId","zoomFactor","minZoomFactor","maxZoomFactor","onLprInputChange","editEvent","updateEvent","updateZoomFactor","getEvents","archiveEvent","anprText","alert","header","renderTable","renderGrid","anprresponse","totalPage","description","count","totalPages","mid","toFixed","preColor","nextColor","1","2","3","4","5","margin","direction","helmet","download","height","marginTop","strong","editable","copyable","code","eventDate","onShowSizeChange","showSizeChanger","showQuickJumper","defaultCurrent","total","Total","TrafficIncidentView","getIncidents","IncidentTimeline","currentPage","pageSizes","incidentType","toggleVisible","refreshBriefIncidentsNow","onModalPageChange","onModalPageSizeChange","nextProps","getBriefIncidentsRepeated","showLessItems","antIcon","fontSize","spin","indicator","onClose","Anchor","Link","Search","Input","tabList","IncidentRepeatedView","timelineLpr","activeTab","helmetMissing","pages","briefIncident","reverseDirection","pagess","onHelmetMissingPageChange","onReverseDirectionPageChange","onHelmetMissingPageSizeChange","onReverseDirectionPageSizeChange","handleTabClick","refreshHelmetMissingIncidentsNow","refreshReverseDirectionIncidentsNow","search","toggleIncidentTimelineModal","tabIndex","activeTabIndex","defaultActiveTabIndex","getHelmetMissingIncidentsRepeated","getReverseDirectionIncidentsRepeated","hasError","searchText","allowClear","onSearch","enterButton","activeTabKey","renderReverseData","renderHelmetMissingData","repeatedTimes","HotListVehicleService","vehicle","HotListedVehiclesList","activeModal","hotListedVehicleResponse","workingVehicle","archived","vehiclesList","openHotListVehicleForm","handleSubmitWorkingHotListVehicle","handleCancelWorkingHotListVehicle","archiveHotListedVehicle","workingVehicleOnChange","getHotListedVehicles","checked","saveHotListedVehicle","vehicles","hoverable","IncidentHotlistView","getIncidentsHotlisted","renderIncidents","getIncidentTimeline","MasterDataView","archiveEventsLoading","archiveLpr","allData","onMasterDataPageChange","onMasterDataPageSizeChange","refreshIncidentsNow","archiveLprOnChange","getIncidentsList","archiveAllEvent","renderMasterData","Content","App","loggedIn","refreshMenu","sideBar","minHeight","path","exact","Boolean","hostname","match","Root","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","forEach","callback"],"mappings":"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","file":"static/js/main.dbf0fa9a.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nfunction forceLogout() {\r\n    localStorage.clear();\r\n    window.location = '/login';\r\n}\r\n\r\nclass HttpService {\r\n\r\n    static Instance() {\r\n\r\n        let ax = new axios.create({\r\n            baseURL: \"/\",\r\n            timeout: 5000,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        ax.interceptors.request.use(config => {\r\n            let token = JSON.parse(localStorage.getItem('syntoken'));\r\n            if (token) {\r\n                config.headers.Authorization = \"Bearer \" + token.token\r\n            }\r\n            return config\r\n        });\r\n\r\n        axios.interceptors.response.use(undefined, err => {\r\n            if (err.response.config.url.includes('/login'))\r\n                return Promise.reject(err);\r\n\r\n            if (err.response.status === 403) {\r\n                console.log('I am at 403');\r\n                return forceLogout();\r\n            }\r\n            if (err.response.status !== 401) {\r\n                console.log('I am at 401');\r\n                return Promise.reject(err);\r\n            }\r\n        });\r\n\r\n        return ax;\r\n    }\r\n\r\n}\r\n//https://gist.github.com/alfonmga/96474f6adb6ed8dee8bc8bf8627c0ae1\r\nexport default HttpService.Instance()","export function authHeader() {\r\n    // return authorization header with jwt token\r\n    let token = JSON.parse(localStorage.getItem('syntoken'));\r\n\r\n    if (token) {\r\n        return {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n    } else {\r\n        return {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n    }\r\n}","export const config = {\r\n    apiUrl: '/'\r\n};","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();","import axios from \"./axios\";\r\nimport { authHeader } from '../helpers/auth-header';\r\nimport { config } from '../helpers/config'\r\nimport {history} from \"../helpers/history\";\r\nimport {EventBus} from \"../components/event\";\r\n\r\nclass UserService {\r\n\r\n    static Instance() {\r\n        return new UserService()\r\n    }\r\n\r\n    getUser(userId) {\r\n        return axios.get('/api/user/' + userId);\r\n    }\r\n\r\n    getUsers() {\r\n        return axios.get('/api/user/');\r\n    }\r\n\r\n    getRoles(){\r\n        return axios.get('/api/user/roles');\r\n    }\r\n\r\n     createUser(user){\r\n        const requestBody = {\r\n             userName:user.userName,\r\n             lastName:user.lastName,\r\n             firstName:user.firstName,\r\n             email:user.email,\r\n             id:user.id,\r\n             roles:user.roles,\r\n        };\r\n\r\n        const request = {\r\n            method: 'POST',\r\n            headers: authHeader(),\r\n            data: JSON.stringify(requestBody),\r\n            url: config.apiUrl + 'api/user/'\r\n        };\r\n        if(user.id){\r\n            request.method='PUT';\r\n        }\r\n        return axios(request);\r\n    }\r\n\r\n    deleteUser(userId){\r\n        return axios.delete('/api/user/' + userId);\r\n    }\r\n\r\n    isLoggedIn() {\r\n        let token = JSON.parse(localStorage.getItem('syntoken'));\r\n        if (!token) {\r\n            console.log(\"cannot locate token, returning false\");\r\n            return false;\r\n        }\r\n        console.log(\"located token, returning true\");\r\n        return true\r\n    }\r\n\r\n    async login(username, password) {\r\n        let response = await axios.post('/login', JSON.stringify({ username, password }), {headers: {\r\n                'Content-Type': 'application/json',\r\n            }});\r\n        console.log(\"got this response\", response);\r\n        let token = response.data;\r\n        if (token) {\r\n            localStorage.setItem('syntoken', JSON.stringify(token));\r\n        }\r\n        return token;\r\n    }\r\n\r\n    logout() {\r\n        localStorage.removeItem(\"syntoken\");\r\n        history.push( \"/#/login\");\r\n        EventBus.publish('login-logout', {})\r\n\r\n    }\r\n}\r\n\r\nexport default UserService.Instance()\r\n\r\n//TODO valiate token,\r\n// https://medium.com/@siddharthac6/json-web-token-jwt-the-right-way-of-implementing-with-node-js-65b8915d550e","import React, {Component} from 'react';\r\nimport {Icon, Layout, Menu,Button} from \"antd\";\r\nimport {Link} from \"react-router-dom\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst {Sider} = Layout;\r\nconst {SubMenu} = Menu;\r\n\r\nexport default class Sidebar extends Component {\r\nstate = {\r\n    collapsed: false,\r\n  };\r\n  toggleCollapsed = () => {\r\n      this.setState({\r\n        collapsed: !this.state.collapsed,\r\n      });\r\n    };\r\n    render() {\r\n        return (\r\n            <Sider\r\n                breakpoint=\"lg\"\r\n                collapsedWidth=\"0\"\r\n                onBreakpoint={broken => {\r\n                    console.log(broken);\r\n                }}\r\n                onCollapse={(collapsed, type) => {\r\n                    console.log(collapsed, type);\r\n                }}\r\n            >\r\n                <div className=\"logo\">\r\n                    <img src={\"synlabs-logo.png\"}/>\r\n                </div>\r\n                <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['0']}>\r\n                    <Menu.Item key=\"0\">\r\n                        <Link to='/'><Icon type='home'/><span className='nav-text'>Home</span></Link>\r\n                    </Menu.Item>\r\n                    <SubMenu\r\n                      key=\"sub1\"\r\n                      title={\r\n                        <span>\r\n                          <Icon type='box-plot'/>\r\n                          <span>ANPR</span>\r\n                        </span>\r\n                      }\r\n                    >\r\n                    <Menu.Item key=\"1\" className=\"sidebar-nav-link\">\r\n                        <Link to='/anpr'><span className='nav-text'>Events</span></Link>\r\n                    </Menu.Item>\r\n                     <Menu.Item key=\"2\" className=\"sidebar-nav-link\">\r\n                          <Link to='/anpr/masterdata'><span className='nav-text'>Repeated Events</span></Link>\r\n                     </Menu.Item></SubMenu>\r\n                     <SubMenu\r\n                       key=\"sub2\"\r\n                       title={\r\n                         <span>\r\n                           <Icon type='box-plot'/>\r\n                           <span>Offends</span>\r\n                         </span>\r\n                       }\r\n                     >\r\n                    <Menu.Item key=\"3\" className=\"sidebar-nav-link\">\r\n                        <Link to='/incidents'><span className='nav-text'>Events</span></Link>\r\n                    </Menu.Item>\r\n                    <Menu.Item key=\"4\" className=\"sidebar-nav-link\">\r\n                        <Link to='/incidents/repeated'><span className='nav-text'>Repeated Events</span></Link>\r\n                    </Menu.Item></SubMenu>\r\n\r\n                    <Menu.Item key=\"5\" className=\"sidebar-nav-link\">\r\n                        <Link to=\"/incidents/hotlisted\"><Icon type='alert'/><span className='nav-text'>Hotlisted Vehicle Event</span></Link>\r\n                    </Menu.Item>\r\n                    <Menu.Item key=\"6\">\r\n                        <Link to='/feed'><Icon type='video-camera'/><span className='nav-text'>Feed</span></Link>\r\n                    </Menu.Item>\r\n                    {/*<SubMenu key=\"admin\" title={<span><Icon type=\"deployment-unit\"/>Admin</span>}>\r\n                        <Menu.Item key=\"51\">\r\n                            <Link to='/user'><Icon type='user'/><span className='nav-text'>Users</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"52\">\r\n                            <Link to='/device'><Icon type='laptop'/><span className='nav-text'>Device</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"53\">\r\n                            <Link to='/trigger'><Icon type=\"clock-circle\"/><span\r\n                                className='nav-text'>Triggers</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>*/}\r\n                    <Menu.Item key=\"7\">\r\n                        <Link to='/' onClick={() => UserService.logout()}><Icon type='logout'/><span\r\n                            className='nav-text'>Logout</span></Link>\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Sider>\r\n        );\r\n    }\r\n}","\r\nimport React, {Component} from 'react';\r\nimport {Layout} from \"antd\";\r\nconst {Header} = Layout;\r\n\r\nexport default class Headbar extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <Header style={{ background: '#fff', padding: 10 }} >&nbsp;</Header>\r\n        )\r\n    }\r\n}","\r\nimport React, {Component} from 'react';\r\nimport {Layout} from \"antd\";\r\nconst {Footer} = Layout;\r\n\r\nexport default class Headbar extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <Footer style={{ textAlign: 'center' }}>SynergyLabs © 2019</Footer>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => (\r\n        UserService.isLoggedIn()\r\n            ? <Component {...props} />\r\n            : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n    )} />\r\n);\r\n\r\nexport default PrivateRoute","import axios from \"./axios\";\r\nimport moment from 'moment';\r\n\r\nclass DashboardService {\r\n\r\n    static Instance() {\r\n        return new DashboardService()\r\n    }\r\n\r\n    getTotalNoOfVehiclesBetweenTwoDates(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/datefilter', filter);\r\n    }\r\n\r\n    getTotalNoOfVehiclesBySelectedDate(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/date', filter);\r\n    }\r\n\r\n    getTotalNoOfVehiclesForLastMonths(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/month', filter);\r\n    }\r\n\r\n    getAtccVehicleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss\"'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/dashboard/atcc/vehicle/count', filter);\r\n    }\r\n\r\n    getIncidentVehicleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/dashboard/incident/vehicle/count', filter);\r\n    }\r\n\r\n    getColor(index) {\r\n        let color = \"\";\r\n        let colors = [\r\n            '#e83e8c',\r\n            '#dc3545',\r\n            '#007bff',\r\n            '#6610f2',\r\n            '#fd7e14',\r\n            '#ffc107',\r\n            '#28a745',\r\n            '#20c997',\r\n            '#17a2b8',\r\n            '#6c757d',\r\n            '#343a40',\r\n            '#6f42c1'];\r\n\r\n        color = colors[index];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        return this.getRandomColor();\r\n\r\n    }\r\n\r\n\r\n    getRandomColor() {\r\n        let letters = '0123456789ABCDEF';\r\n        let color = '#';\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n\r\n\r\n    extractFromToDate(selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n\r\n        let baseDate;\r\n        let from_date;\r\n        let to_date;\r\n        switch (selectedCustomDateRangeEnum) {\r\n            case  \"Today\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"Yesterday\":\r\n                baseDate = moment().subtract(1, 'days');\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"This week\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"This month\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"This quarter\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"This year\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Last week\":\r\n                baseDate = moment().subtract(1, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Last month\":\r\n                baseDate = moment().subtract(1, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Last quarter\":\r\n                baseDate = moment().subtract(1, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Last year\":\r\n                baseDate = moment().subtract(1, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Second Last week\":\r\n                baseDate = moment().subtract(2, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Second Last month\":\r\n                baseDate = moment().subtract(2, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Second Last quarter\":\r\n                baseDate = moment().subtract(2, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Second Last year\":\r\n                baseDate = moment().subtract(2, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Custom\":\r\n                from_date = selectedCustomDateRangeMoment[0].toDate();\r\n                to_date = selectedCustomDateRangeMoment[1].toDate();\r\n                break;\r\n        }\r\n\r\n        return {\r\n            from_date: from_date,\r\n            to_date: to_date\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default DashboardService.Instance()","\r\n\r\nclass CommonService {\r\n\r\n    static Instance() {\r\n        return new CommonService()\r\n    }\r\n\r\n    ifExist(array, attr, value) {\r\n        for (let i = 0; i < array.length; i += 1) {\r\n            if (array[i][attr] === value) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    findIndex(array, attr, value) {\r\n        if (!array) {\r\n            return -1;\r\n        }\r\n        for (let i = 0; i < array.length; i += 1) {\r\n            if (array[i][attr] === value) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default CommonService.Instance()","import React, {Component} from \"react\";\r\nimport {Col, Row, Statistic, TimePicker, DatePicker, Button, Icon, message, Card, Modal,Menu, Dropdown, Select} from \"antd\";\r\nimport DashboardService from \"../services/DashboardService\";\r\nimport CommonService from \"../services/CommonService\";\r\nimport Moment from 'moment';\r\nimport classnames from 'classnames';\r\nimport {Bar, Pie, Line} from 'react-chartjs-2';\r\nimport * as name from \"chartjs-plugin-colorschemes\";\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nconst {Option} = Select;\r\nconst { RangePicker } = DatePicker;\r\n\r\nexport default class HomeView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpencustomDateRangeModal:\"\",\r\n            atcc: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate:{},\r\n                    toDate:{}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            }, incident: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate:{},\r\n                    toDate:{}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            },\r\n        };\r\n\r\n        this.getIncidentVehicleCount = this.getIncidentVehicleCount.bind(this);\r\n        this.getAtccVehicleCount = this.getAtccVehicleCount.bind(this);\r\n        this.getBarChartOptions = this.getBarChartOptions.bind(this);\r\n        this.selectDateRange = this.selectDateRange.bind(this);\r\n        this.selectXAxisOption = this.selectXAxisOption.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n        this.getXAxisOptions = this.getXAxisOptions.bind(this);\r\n        this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n    showCustomDateRangeModal(graphName){\r\n        this.setState({\r\n          isOpencustomDateRangeModal: graphName,\r\n        });\r\n    };\r\n\r\n    handleCancel = e => {\r\n        this.setState({\r\n          isOpencustomDateRangeModal: \"\",\r\n        });\r\n      };\r\n\r\n    selectDateRange(graphName, selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n        let {isOpencustomDateRangeModal} = this.state;\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedCustomDateRange = selectedCustomDateRangeEnum;\r\n        let fromToDate = DashboardService.extractFromToDate(graph.filter.selectedCustomDateRange, selectedCustomDateRangeMoment);\r\n        graph.filter.fromDate = fromToDate.from_date;\r\n        graph.filter.toDate = fromToDate.to_date;\r\n\r\n\r\n        if(selectedCustomDateRangeEnum=== \"Custom\"){\r\n            isOpencustomDateRangeModal = \"\"\r\n        }\r\n        this.setState({[graphName]: graph, isOpencustomDateRangeModal}, () => {\r\n            this.refresh();\r\n        });\r\n\r\n    }\r\n\r\n    selectXAxisOption(graphName, selectedXAxisOption) {\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedXAxisOption = selectedXAxisOption;\r\n        this.setState({[graphName]: graph}, () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    refresh() {\r\n\r\n        this.getAtccVehicleCount(this.state.atcc.filter.fromDate, this.state.atcc.filter.toDate, this.state.atcc.filter.selectedXAxisOption);\r\n\r\n        this.getIncidentVehicleCount(this.state.incident.filter.fromDate, this.state.incident.filter.toDate, this.state.incident.filter.selectedXAxisOption);\r\n    }\r\n\r\n\r\n    getAtccVehicleCount(from_date, to_date, xAxis) {\r\n        let {atcc} = this.state;\r\n        atcc.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        DashboardService.getAtccVehicleCount(from_date, to_date, xAxis).then(resposne => {\r\n\r\n            let rawData = resposne.data;\r\n            if (rawData && rawData.length > 0) {\r\n                //let labelDates = DashboardService.enumerateDaysBetweenDates(from_date, to_date);\r\n                let labelDates = [];\r\n\r\n                let rawDataByVehicleData = [];\r\n                for (let i in rawData) {\r\n\r\n                    if (!labelDates.includes(rawData[i].date)) {\r\n                        labelDates.push(rawData[i].date)\r\n                    }\r\n\r\n                    if (!rawDataByVehicleData[rawData[i].vehicleType]) {\r\n                        rawDataByVehicleData[rawData[i].vehicleType] = {};\r\n                    }\r\n                    if (!rawDataByVehicleData[rawData[i].vehicleType][rawData[i].date]) {\r\n                        rawDataByVehicleData[rawData[i].vehicleType][rawData[i].date] = rawData[i];\r\n                    }\r\n                }\r\n                atcc.chartData.labels = labelDates;\r\n                let vehicleTypeIndex = 0;\r\n                for (let vehicleType in rawDataByVehicleData) {\r\n\r\n                    let color = DashboardService.getColor(vehicleTypeIndex);\r\n                    let dataSet = {\r\n                        label: vehicleType,\r\n                        data: [],\r\n                        backgroundColor: color\r\n                    };\r\n\r\n                    for (let i in labelDates) {\r\n                        if (rawDataByVehicleData[vehicleType][labelDates[i]]) {\r\n                            dataSet.data.push(rawDataByVehicleData[vehicleType][labelDates[i]].vehicleCount);\r\n                        } else {\r\n                            dataSet.data.push(0);\r\n                        }\r\n                    }\r\n                    atcc.chartData.datasets.push(dataSet);\r\n                    vehicleTypeIndex++;\r\n                }\r\n            }\r\n            this.setState({atcc});\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n\r\n    getIncidentVehicleCount(from_date, to_date, xAxis) {\r\n        let {incident} = this.state;\r\n        incident.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        DashboardService.getIncidentVehicleCount(from_date, to_date, xAxis).then(resposne => {\r\n\r\n            let helmetMissingIncidents = resposne.data.helmetMissingIncidents;\r\n            let reverseDirectionIncidents = resposne.data.reverseDirectionIncidents;\r\n\r\n            //Get all unique labels(timestamps) from both type of incidents\r\n            let labels = [];\r\n            for (let i in reverseDirectionIncidents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    reverseDirectionIncidents[i].date = parseInt(reverseDirectionIncidents[i].date);\r\n                }\r\n                if (!labels.includes(reverseDirectionIncidents[i].date)) {\r\n                    labels.push(reverseDirectionIncidents[i].date);\r\n                }\r\n            }\r\n\r\n            for (let i in helmetMissingIncidents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    helmetMissingIncidents[i].date = parseInt(helmetMissingIncidents[i].date);\r\n                }\r\n                if (!labels.includes(helmetMissingIncidents[i].date)) {\r\n                    labels.push(helmetMissingIncidents[i].date);\r\n                }\r\n            }\r\n\r\n            // sort the labels, as it is a timeseries\r\n            if (xAxis === \"Hourly\") {\r\n                labels.sort((a, b) => a - b);\r\n            }\r\n            if (xAxis === \"Daily\") {\r\n                labels.sort((a, b) => new Moment(a).format('YYYY-MM-DD') - new Moment(b).format('YYYY-MM-DD'))\r\n            }\r\n\r\n            //prepare dataset\r\n            let helmetMissingDataset = {\r\n                label: \"Without Helmet\",\r\n                data: [],\r\n                backgroundColor: DashboardService.getColor(0)\r\n            };\r\n            let reverseDirectionDataset = {\r\n                label: \"Reverse Direction\",\r\n                data: [],\r\n                backgroundColor: DashboardService.getColor(2)\r\n            };\r\n\r\n            //fill the value of dataset for each label\r\n            let dataValue = 0;\r\n            let index = -1;\r\n            for (let i in labels) {\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(helmetMissingIncidents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = helmetMissingIncidents[index].vehicleCount;\r\n                }\r\n                helmetMissingDataset.data.push(dataValue);\r\n\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(reverseDirectionIncidents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = reverseDirectionIncidents[index].vehicleCount;\r\n                }\r\n                reverseDirectionDataset.data.push(dataValue);\r\n            }\r\n\r\n            //finalize it with setState\r\n            incident.chartData.labels = labels;\r\n            incident.chartData.datasets.push(helmetMissingDataset);\r\n            incident.chartData.datasets.push(reverseDirectionDataset);\r\n            this.setState({incident});\r\n        }).catch(error => {\r\n            this.setState({incident});\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    handleDateRangeChange(dates, dateString){\r\n\r\n        let startDate = dates[0].toDate();\r\n        let endDate = dates[1].toDate();\r\n        this.setState( () => {\r\n                    this.refresh();\r\n                });\r\n         console.log(dates, dateString);\r\n    }\r\n\r\n    getXAxisOptions(graphName) {\r\n        return (<Menu>\r\n\r\n            <Menu.Item key=\"1\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Hourly\")}>\r\n                Hourly\r\n            </Menu.Item>\r\n            <Menu.Item key=\"5\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Daily\")}>\r\n                Daily\r\n            </Menu.Item>\r\n        </Menu>)\r\n    }\r\n\r\n    getDateRangeOptions(graphName) {\r\n        return (\r\n            <Menu>\r\n                <Menu.Item key=\"1\" onClick={() => this.selectDateRange(graphName, \"Today\")}>\r\n                    Today\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\" onClick={() => this.selectDateRange(graphName, \"Yesterday\")}>\r\n                    Yesterday\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\" onClick={() => this.selectDateRange(graphName, \"This week\")}>\r\n                    This week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\" onClick={() => this.selectDateRange(graphName, \"Last week\")}>\r\n                    Last week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\" onClick={() => this.selectDateRange(graphName, \"This month\")}>\r\n                    This month\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\" onClick={() => this.selectDateRange(graphName, \"This year\")}>\r\n                    This year\r\n                </Menu.Item>\r\n                <Menu.Item key=\"7\" onClick={() => this.selectDateRange(graphName, \"Last year\")}>\r\n                    Last year\r\n                </Menu.Item>\r\n                <Menu.Item  onClick={() =>this.showCustomDateRangeModal(graphName)}>\r\n                    Custom\r\n                </Menu.Item>\r\n\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    getBarChartOptions(chartName) {\r\n        let yAxisScaleLabel = \"Day\";\r\n        if (this.state[chartName].filter.selectedXAxisOption === \"Hourly\") {\r\n            yAxisScaleLabel = \"Hours(24-hour)\"\r\n        }\r\n        let yAxisLabel = \"Vehicles\";\r\n        if (chartName === \"incident\") {\r\n            yAxisLabel = \"Challans\"\r\n        }\r\n\r\n        let options = {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            animation: {\r\n                duration: 0\r\n            },\r\n            hover: {\r\n                animationDuration: 0\r\n            },\r\n            responsiveAnimationDuration: 0,\r\n            legend: {\r\n                position: 'right'\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisScaleLabel\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisLabel\r\n                    }\r\n                }]\r\n            }\r\n        };\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n        let {atcc, incident} = this.state;\r\n        const atccChartOptions = this.getBarChartOptions(\"atcc\");\r\n        const incidentChartOptions = this.getBarChartOptions(\"incident\");\r\n        return (\r\n            <div>\r\n            <div>\r\n\r\n                    <Modal\r\n                     onCancel={this.handleCancel}\r\n                      title=\"Custom Date Range\"\r\n                      visible={this.state.isOpencustomDateRangeModal ? true : false}\r\n                      footer={[\r\n                      ]}\r\n\r\n                    >\r\n                         <RangePicker\r\n                          onChange={(changedDateRange)=> this.selectDateRange(this.state.isOpencustomDateRangeModal, \"Custom\", changedDateRange)} />\r\n                    </Modal>\r\n                  </div>\r\n                <div>\r\n                    <Card title={<div>ATCC\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"atcc\")}>\r\n                            <Button>\r\n                                {atcc.filter.selectedCustomDateRange ? atcc.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                        &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"atcc\")}>\r\n                            <Button>\r\n                                {atcc.filter.selectedXAxisOption ? atcc.filter.selectedXAxisOption : \"Select\"} <Icon\r\n                                type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>}>\r\n                        <Line data={atcc.chartData} options={atccChartOptions}/>\r\n\r\n                    </Card>\r\n                    <br/>\r\n                    <Card title={<div>Incidents\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"incident\")}>\r\n                            <Button>\r\n                                {incident.filter.selectedCustomDateRange ? incident.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                        &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"incident\")}>\r\n                            <Button>\r\n                                {incident.filter.selectedXAxisOption ? incident.filter.selectedXAxisOption : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>}>\r\n                        <Line data={incident.chartData} options={incidentChartOptions}/>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import axios from './axios';\r\n\r\nclass FeedService {\r\n\r\n    static Instance() {\r\n        return new FeedService()\r\n    }\r\n\r\n    getFeeds() {\r\n        return axios.get('/api/feeds');\r\n    }\r\n\r\n    getFeed(feed) {\r\n        return axios.get('/api/feed/' + feed.ID);\r\n    }\r\n\r\n    addFeed(feed) {\r\n        return axios.post('/api/feed/', feed)\r\n    }\r\n\r\n    removeFeed(feed) {\r\n        return axios.delete('/api/feed/' + feed.ID);\r\n    }\r\n\r\n    startFeed(feed) {\r\n        return axios.get('/api/feed/' +feed.ID+ '/start');\r\n    }\r\n\r\n    stopFeed(feed) {\r\n        return axios.get('/api/feed/' +feed.ID+ '/stop');\r\n    }\r\n}\r\n\r\nexport default FeedService.Instance()\r\n","import React, {Component} from \"react\";\r\nimport {Button, Card, Col, Form, Input, Row, Tag, Typography} from \"antd\";\r\nimport FeedService from \"../services/FeedService\";\r\nimport {EventBus} from \"../components/event\";\r\nconst {Text} = Typography;\r\n\r\nexport default class FeedView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loading: true,\r\n            videoVisible: false,\r\n            feeds: {},\r\n        };\r\n\r\n        EventBus.subscribe('feed-refresh', (event) => this.refresh())\r\n        this.removeFeed = this.removeFeed.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        FeedService.getFeeds().then(request => {\r\n            this.setState({\"feeds\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    removeFeed(feed) {\r\n        FeedService.removeFeed(feed).then(() => {\r\n            this.refresh()\r\n        })\r\n    }\r\n\r\n    startFeed(feed) {\r\n        FeedService.startFeed(feed).then(() => {\r\n            //this should force re-render :)\r\n            this.setState({\"refresh_state\": Math.random()})\r\n        })\r\n    }\r\n\r\n    stopFeed(feed) {\r\n        FeedService.stopFeed(feed).then(() => {\r\n            //this should force re-render :)\r\n            this.setState({\"refresh_state\": Math.random()})\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        let feeds = this.state.feeds;\r\n\r\n        if (this.state.loading || !this.state.feeds || this.state.feeds.length === 0) {\r\n            feeds = []\r\n        }\r\n\r\n        const WrappedFeedForm = Form.create({name: 'feed_form'})(FeedForm);\r\n\r\n        return (\r\n            <Row gutter={16}>\r\n                {\r\n                    feeds.map((feed, index) =>\r\n\r\n                        <Col span={8} key={index}>\r\n\r\n                            <Card\r\n                                title={\r\n                                    <Tag color=\"#f50\">{feed.site}/{feed.location}/{feed.name}</Tag>\r\n                                }\r\n                                cover={<img alt=\"feedview\" src={\"/api/feed/\" + feed.ID+ \"/view\"}/>}\r\n                                bordered={true}\r\n                                actions={[\r\n                                    <Button onClick={() => {this.startFeed(feed)}}>Start</Button>,\r\n                                    <Button onClick={() => {this.stopFeed(feed)}}>Stop</Button>,\r\n                                    <Button onClick={() => {this.removeFeed(feed)}}>Delete</Button>\r\n                                ]}\r\n                            >\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n\r\n                <Col span={8} key={-1}>\r\n\r\n                    <Card bordered={true}>\r\n                        <WrappedFeedForm/>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n\r\nfunction hasErrors(fieldsError) {\r\n    return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass FeedForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false,\r\n            loading: false,\r\n            loginError: '',\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n\r\n    handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        const form = this.props.form;\r\n        var feed = {};\r\n        feed.url = form.getFieldValue(\"url\");\r\n        feed.site = form.getFieldValue(\"site\");\r\n        feed.location = form.getFieldValue(\"location\");\r\n        feed.name = form.getFieldValue(\"name\");\r\n        let validationError;\r\n        if (!feed.url) {\r\n            validationError = \"Missing url\"\r\n        }\r\n\r\n        if (!feed.site) {\r\n            validationError = \"Missing site\"\r\n        }\r\n\r\n        if (!feed.location) {\r\n            validationError = \"Missing location\"\r\n        }\r\n\r\n        if (!feed.name) {\r\n            validationError = \"Missing name\"\r\n        }\r\n\r\n        if (validationError) {\r\n            this.setState({validationError: validationError});\r\n            return\r\n        }\r\n\r\n        console.log('saving feed', feed);\r\n        this.setState({submitted: true, loading: true});\r\n\r\n        FeedService.addFeed(feed).then(response => {\r\n            EventBus.publish('feed-refresh', {})\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator, getFieldsError} = this.props.form;\r\n        const validationError = this.state.validationError;\r\n        return (\r\n            <Form onSubmit={this.handleSubmit}>\r\n                <Form.Item>\r\n                    {getFieldDecorator('url', {rules: [{required: true, message: 'enter feed url!'}],})(\r\n                        <Input addonBefore=\"Feed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" placeholder=\"rtsp://\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('site', {rules: [{required: true, message: 'enter site!'}],})(\r\n                        <Input addonBefore=\"Site&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\r\n                               placeholder=\"Site (e.g. gurgaon)\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('location', {rules: [{required: true, message: 'enter location!'}],})(\r\n                        <Input addonBefore=\"Location\" placeholder=\"Location (e.g. 9th floor)\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('name', {rules: [{required: true, message: 'enter name!'}],})(\r\n                        <Input addonBefore=\"Name&nbsp;&nbsp;&nbsp;&nbsp;\" placeholder=\"Name (e.g. front gate )\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Button htmlType=\"submit\" type=\"primary\" disabled={hasErrors(getFieldsError())}>Add</Button>\r\n                {validationError && <Text type=\"danger\">{validationError}</Text>}\r\n            </Form>\r\n        )\r\n    }\r\n}","import axios from './axios';\r\nimport { authHeader } from '../helpers/auth-header';\r\nimport { config } from '../helpers/config'\r\n\r\nclass DeviceService {\r\n\r\n    static Instance() {\r\n        return new DeviceService()\r\n    }\r\n\r\n    getDevice() {\r\n       return axios.get('/api/device');\r\n    }\r\n\r\n    getDeviceConfig() {\r\n        return axios.get('/api/device/config');\r\n    }\r\n\r\n}\r\n\r\nexport default DeviceService.Instance()","import React, {Component} from \"react\";\r\nimport {Card, Icon} from 'antd';\r\nimport DeviceService from \"../services/DeviceService\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default class DeviceView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {loading:true, device:{}}\r\n    }\r\n\r\n    componentDidMount() {\r\n        DeviceService.getDevice().then(request => {\r\n            this.setState({\"device\" : request.data, loading : false})\r\n        },\r\n        error =>{\r\n            console.log(\"error\");\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let loading = this.state.loading;\r\n        let device = this.state.device;\r\n\r\n        if (loading) {\r\n            return (<div>Loading..</div>)\r\n        }\r\n\r\n        return (\r\n\r\n            <div>\r\n                <Card title=\"Device details\" style={{width: 300}} extra={<Link to=\"/device/conf\"><Icon type=\"setting\" /></Link>}>\r\n                    <p>ID: {device.fingerprint}</p>\r\n                    <p>Name: {device.name}</p>\r\n                    <p>Model: {device.model}</p>\r\n                    <p>License: {device.license}</p>\r\n                    <p>Status: {device.status}</p>\r\n                    <p>RegisteredTo: {device.registeredTo}</p>\r\n\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {Table, Divider,Row,Col,Card,Form,Button,Input,Icon,Typography,Select,Modal,message} from 'antd';\r\nimport UserService from \"../services/UserService\";\r\nimport {EventBus} from \"../components/event\";\r\nimport '../form.css';\r\nconst { Column} = Table;\r\nconst {Text} = Typography;\r\nconst { confirm } = Modal;\r\nconst { Option } = Select;\r\nconst ButtonGroup = Button.Group;\r\nexport default class UserListView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            users: [],\r\n            showUserDetails:false,\r\n            mode:\"Add\",\r\n            user:{userName:\"\", lastName:\"\",firstName:\"\",email:\"\",password:\"\",roles:[],id:\"\"},\r\n            roles:[],\r\n            visible: false ,\r\n        }\r\n\r\n\r\n        this.addUser=this.addUser.bind(this);\r\n        this.refresh=this.refresh.bind(this);\r\n        this.refreshUsers=this.refreshUsers.bind(this);\r\n        this.close=this.close.bind(this);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh(){\r\n        UserService.getUsers().then(request => {\r\n            this.setState({\"users\": request.data, loading: false,showUserDetails:false})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n\r\n        UserService.getRoles().then(request =>{\r\n            this.setState({roles:request.data})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n    }\r\n\r\n    refreshUsers(){\r\n        this.refresh();\r\n    }\r\n\r\n    showModal = () => {\r\n        this.setState({\r\n          visible: true,\r\n        });\r\n    };\r\n\r\n\r\n    addUser(){\r\n        this.setState({mode:\"Add\",showUserDetails:true, user:{userName:\"\", lastName:\"\",firstName:\"\",email:\"\",password:\"\"}})\r\n    }\r\n\r\n    showUser(userId){\r\n        this.setState({showUserDetails:true,mode:\"Edit\"})\r\n        UserService.getUser(userId).then(response =>{\r\n            this.setState({user : response.data})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.setState({showUserDetails:false})\r\n    }\r\n\r\n     showDeleteConfirm(userId,refresh) {\r\n      confirm({\r\n        title: 'Are you sure you want to make user inactive?',\r\n        okText: 'Yes',\r\n        okType: 'danger',\r\n        cancelText: 'No',\r\n        onOk() {\r\n          console.log('OK');\r\n          UserService.deleteUser(userId).then(response=>{\r\n            message.success(\"User Deactivated!\");\r\n            refresh();\r\n          },\r\n          error=>{\r\n            message.error(error.response.data.message);\r\n          });\r\n\r\n\r\n        },\r\n        onCancel() {\r\n          console.log('Cancel');\r\n        },\r\n      });\r\n     }\r\n\r\n    render() {\r\n\r\n     const WrappedUserForm = Form.create({name: 'user_form'})(UserForm);\r\n     const showUserDetails=this.state.showUserDetails;\r\n     const mode=this.state.mode;\r\n     const user=this.state.user;\r\n\r\n        return (\r\n         <div>\r\n            <Row gutter={2}>\r\n                <Col span={2}>\r\n                    <Button type=\"primary\" onClick={this.addUser}>\r\n                         + ADD\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n            <br/>\r\n            <Row gutter={24}>\r\n                <Col span={12}>\r\n                    <Card\r\n                      className=\"limitable\"\r\n                      bodyStyle={{ padding: \"0px\", width: \"100%\" }}\r\n                    >\r\n                     <Table dataSource={this.state.users} pagination={false} scroll={{ x: true}} >\r\n                            <Column title=\"Username\" dataIndex=\"userName\" key=\"userName\" render={(text, record) => (\r\n                                <span><a href={\"user/\" + record.ID}>{text}</a></span>\r\n                            )}/>\r\n                            <Column title=\"Email\" dataIndex=\"email\" key=\"email\" />\r\n                            <Column title=\"Token\" dataIndex=\"token\" key=\"token\" />\r\n                            <Column title=\"Action\" key=\"action\" render={(text, record) => (\r\n                                    <span>\r\n                                        <a onClick={this.showUser.bind(this,record.id)}>Edit</a>\r\n                                        <Divider type=\"vertical\" />\r\n                                        <a onClick={this.showDeleteConfirm.bind(this,record.id,this.refresh)}>Delete</a>\r\n                                    </span>\r\n                                )}\r\n                            />\r\n                     </Table>\r\n                    </Card>\r\n                </Col>\r\n\r\n               {showUserDetails ?\r\n                 <Col span={12}>\r\n                   <WrappedUserForm user={this.state.user} roles={this.state.roles} refresh={this.refreshUsers} close={this.close} mode={this.state.mode}/>\r\n                 </Col>\r\n                :null}\r\n\r\n            </Row>\r\n         </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass UserForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user:{},\r\n            loading: false\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.close = this.close.bind(this);\r\n\r\n    }\r\n\r\n    close(){\r\n        this.props.close();\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const form = this.props.form;\r\n        var user = {};\r\n        user.firstName = form.getFieldValue(\"firstname\");\r\n        user.userName = form.getFieldValue(\"username\");\r\n        user.lastName = form.getFieldValue(\"lastname\");\r\n        user.email = form.getFieldValue(\"email\");\r\n        user.password = form.getFieldValue(\"password\");\r\n        user.roles=form.getFieldValue(\"role\");\r\n        user.id=this.props.user.id;\r\n        let validationError;\r\n        if (!user.firstName) {\r\n            validationError = \"Missing firstname\"\r\n        }\r\n        if (!user.userName) {\r\n            validationError = \"Missing username\"\r\n        }\r\n        if (!user.lastName) {\r\n            validationError = \"Missing lastname\"\r\n        }\r\n        if (!user.email) {\r\n            validationError = \"Missing email\"\r\n        }\r\n\r\n        if(user.roles.length==0){\r\n            validationError=\"Missing role\"\r\n        }\r\n        if (validationError) {\r\n            this.setState({validationError: validationError});\r\n            return\r\n        }\r\n        this.setState({loading: true});\r\n        console.log('saving user', user);\r\n        UserService.createUser(user).then(response => {\r\n            if(user.id){\r\n                 message.success(\"User updated\")\r\n            }\r\n            else{\r\n                 message.success(\"User created\")\r\n            }\r\n            this.setState({loading: false});\r\n            this.props.refresh();\r\n\r\n        }).catch(error=> {\r\n            console.log(error);\r\n            this.setState({loading: false});\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator} = this.props.form;\r\n        const validationError = this.state.validationError;\r\n\r\n         return (\r\n            <Card title={this.props.mode==\"Add\"? \"Add User\" : \"Edit User\"}>\r\n\r\n               <Form onSubmit={this.handleSubmit} className=\"user-form\" >\r\n                    <Form.Item label=\"Username\" className=\"formitem\">\r\n                        {getFieldDecorator('username', {\r\n                            initialValue:this.props.user.userName,\r\n                            rules: [{required: true, message: 'Please input your username!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Username\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Firstname\" className=\"formitem\">\r\n                        {getFieldDecorator('firstname', {\r\n                            initialValue:this.props.user.firstName,\r\n                            rules: [{required: true, message: 'Please input your Firstname!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Firstname\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Lastname\" className=\"formitem\">\r\n                        {getFieldDecorator('lastname', {\r\n                            initialValue:this.props.user.lastName,\r\n                            rules: [{required: true, message: 'Please input your lastname!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Lastname\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Email\" className=\"formitem\">\r\n                        {getFieldDecorator('email', {\r\n                            initialValue:this.props.user.email,\r\n                            rules: [{required: true, message: 'Please input your email!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"email\"\r\n                                placeholder=\"email\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Role\" className=\"formitem\">\r\n                          {getFieldDecorator('role', {\r\n                            initialValue:this.props.user.roles,\r\n                            rules: [{ required: true, message: 'Please select role!' }],\r\n                          })(\r\n                            <Select mode=\"multiple\"\r\n                              placeholder=\"Select a role\"\r\n                            >\r\n                            {this.props.roles.map(role =>\r\n                                 <option key={role.id} value={role.name} >{role.name}</option>\r\n                             )}\r\n\r\n                            </Select>,\r\n                              )}\r\n                    </Form.Item>\r\n                    <br/>\r\n                    <div align=\"right\">\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"user-form-button\"  size=\"small\" loading={this.state.loading}>\r\n                            Save\r\n                        </Button>\r\n                        <span>&nbsp;&nbsp;</span>\r\n                        <Button type=\"secondary\" className=\"user-form-button\"  size=\"small\" onClick={this.close}>\r\n                            Close\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {validationError && <Text type=\"danger\">{validationError}</Text>}\r\n               </Form>\r\n            </Card>\r\n\r\n\r\n         )\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport DeviceService from \"../services/DeviceService\";\r\nimport { Tabs } from 'antd';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default class DeviceConfigView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loading:true, deviceconfig:{}}\r\n    }\r\n\r\n    componentDidMount() {\r\n        DeviceService.getDeviceConfig().then(request => {\r\n            this.setState({\"deviceconfig\" : request.data, loading : false})\r\n        })\r\n    }\r\n\r\n    onTabChange(tab) {\r\n        console.log(\"tab changed\", tab)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Tabs defaultActiveKey=\"1\" onChange={this.onTabChange}>\r\n                <TabPane tab=\"Feed\" key=\"common\">\r\n                    Feed details\r\n                </TabPane>\r\n                <TabPane tab=\"Basic Intrusion\" key=\"bi\">\r\n                    Basic Intrusion\r\n                </TabPane>\r\n                <TabPane tab=\"Advanced Intrusion\" key=\"ai\">\r\n                    Advanced Intrusion\r\n                </TabPane>\r\n            </Tabs>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport UserService from \"../services/UserService\";\r\nimport {EventBus} from \"../components/event\";\r\nimport {Button, Col, Form, Icon, Input, Row, Typography, Card} from 'antd';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {history} from \"../helpers/history\";\r\nimport {Router} from 'react-router';\r\n\r\nconst {Text} = Typography;\r\n\r\n\r\nclass LoginView extends Component {\r\n\r\n    componentDidMount() {\r\n        if (UserService.isLoggedIn()) {\r\n            history.push(\"/#/\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const WrappedLoginForm = Form.create({name: 'login_form'})(LoginForm);\r\n        return (\r\n            <WrappedLoginForm/>\r\n        )\r\n    }\r\n}\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false,\r\n            loading: false,\r\n            loginError: '',\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        const form = this.props.form;\r\n        const username = form.getFieldValue(\"username\");\r\n        const password = form.getFieldValue(\"password\");\r\n        this.setState({submitted: true});\r\n\r\n        if (!(username && password)) {\r\n            return\r\n        }\r\n\r\n        this.setState({loading: true});\r\n        let self = this;\r\n        UserService.login(username, password)\r\n            .then(token => {\r\n                const {from} = history.state || {from: {pathname: \"/\"}};\r\n                history.push(from);\r\n               /* EventBus.publish('login-logout', {});*/\r\n                window.location.reload();\r\n\r\n            }).catch(error => {\r\n            this.setState({\r\n                loginError: \"Something went wrong, please try again\",\r\n                loading: false\r\n            })\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator} = this.props.form;\r\n        const loginError = this.state.loginError;\r\n\r\n        return (\r\n            <Row>\r\n                <Col xl={{span: 8}} lg={{span: 6}} md={{span: 4}} sm={{span: 2}} xs={{span: 2}}/>\r\n                <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n                    <Card title={ <img style={{}} src={\"synlabs-logo-full.png\"}/>}>\r\n                        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                            <Form.Item>\r\n                                {getFieldDecorator('username', {\r\n                                    rules: [{required: true, message: 'Please input your username!'}],\r\n                                })(\r\n                                    <Input\r\n                                        prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                                        placeholder=\"Username\"\r\n                                    />,\r\n                                )}\r\n                            </Form.Item>\r\n                            <Form.Item>\r\n                                {getFieldDecorator('password', {\r\n                                    rules: [{required: true, message: 'Please input your Password!'}],\r\n                                })(\r\n                                    <Input\r\n                                        prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                                        type=\"password\"\r\n                                        placeholder=\"Password\"\r\n                                    />,\r\n                                )}\r\n                            </Form.Item>\r\n                            <Form.Item>\r\n                                <Button type=\"primary\" htmlType=\"submit\" block className=\"login-form-button\">\r\n                                    Log in\r\n                                </Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                        {loginError && <Text type=\"danger\">{loginError}</Text>\r\n                        }\r\n                    </Card>\r\n\r\n\r\n                </Col>\r\n            </Row>\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(LoginView);\r\n","\r\nimport axios from \"./axios\";\r\n\r\nclass TrafficIncidentService {\r\n\r\n    static Instance() {\r\n        return new TrafficIncidentService()\r\n    }\r\n\r\n    getIncidents(filter) {\r\n        return axios.post('/api/traffic/incident/', filter);\r\n    }\r\n\r\n    archiveIncident(incident) {\r\n        return axios.delete('/api/traffic/incident/' + incident.id);\r\n    }\r\n}\r\n\r\nexport default TrafficIncidentService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Button,\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    DatePicker,\r\n    Divider,\r\n    Empty,\r\n    Icon,\r\n    message,\r\n    Modal,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    TimePicker\r\n} from 'antd';\r\nimport IncidentService from \"../services/TrafficIncidentService\";\r\nimport ReactPlayer from \"react-player\";\r\nimport Moment from 'react-moment';\r\n\r\nconst {Column, ColumnGroup} = Table;\r\nconst {Panel} = Collapse;\r\nconst ButtonGroup = Button.Group;\r\nconst {confirm} = Modal;\r\n\r\n\r\nexport default class IncidentListView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            videoVisible: false,\r\n            layout: \"list\",\r\n            incidents: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 10\r\n            }\r\n        };\r\n        this.handleDone = this.handleDone.bind(this);\r\n        this.archiveIncident = this.archiveIncident.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n        this.onFromDateChange = this.onFromDateChange.bind(this);\r\n        this.onFromTimeChange = this.onFromTimeChange.bind(this);\r\n\r\n        this.onToDateChange = this.onToDateChange.bind(this);\r\n        this.onToTimeChange = this.onToTimeChange.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        let self = this;\r\n        IncidentService.getIncidents(this.state.filter).then(response => {\r\n            console.log(\"daada\", response.data);\r\n            self.setState({\"incidents\": response.data, loading: false})\r\n        },\r\n        error => {\r\n            message.error(error.response.data.message);\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        IncidentService.getIncidents(filter).then(request => {\r\n            this.setState({\"incidentsresponse\": request.data, loading: false, filter: filter})\r\n        })\r\n    }\r\n\r\n    archiveIncident(incident) {\r\n        IncidentService.archiveIncident(incident).then(() => {\r\n                this.refresh();\r\n                message.success(\"Incident successfully archived!\");\r\n            },\r\n            error => {\r\n                message.error(error.response.data.message);\r\n            })\r\n    }\r\n\r\n    changeLayout(layout) {\r\n        this.setState({\"layout\": layout});\r\n    }\r\n\r\n    showVideo(videoid) {\r\n\r\n        let cp = ReactPlayer.canPlay(\"/api/incident/video/\" + this.state.videoid + \"/video.mp4\");\r\n        this.setState({\r\n            videoVisible: true,\r\n            videoid: videoid\r\n        });\r\n    };\r\n\r\n    handleDone() {\r\n        this.setState({\r\n            videoVisible: false,\r\n            videoid: \"\"\r\n        });\r\n    };\r\n\r\n    onFromDateChange(date) {\r\n        let filter = this.state.filter;\r\n        if (date != null) {\r\n            filter.fromDate = date.format(\"YYYY-MM-DD\");\r\n        } else {\r\n            filter.fromDate = null;\r\n        }\r\n        this.setState({filter: filter});\r\n    }\r\n\r\n    onFromTimeChange(time) {\r\n\r\n        let filter = this.state.filter;\r\n        if (time != null) {\r\n            filter.fromTime = time.format(\"HH:mm:ss\");\r\n        } else {\r\n            filter.fromTime = null;\r\n        }\r\n        this.setState({filter: filter});\r\n    }\r\n\r\n    onToDateChange(date) {\r\n        let filter = this.state.filter;\r\n        if (date != null) {\r\n            filter.toDate = date.format(\"YYYY-MM-DD\");\r\n        } else {\r\n            filter.toDate = null;\r\n        }\r\n        this.setState({filter: filter});\r\n    }\r\n\r\n    onToTimeChange(time) {\r\n        let filter = this.state.filter;\r\n        if (time != null) {\r\n            filter.toTime = time.format(\"HH:mm:ss\");\r\n        } else {\r\n            filter.toTime = null;\r\n        }\r\n        this.setState({filter: filter});\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    showDeleteConfirm(incident, refresh) {\r\n        confirm({\r\n            title: 'Are you sure you want to archive the incident ?',\r\n            okText: 'Yes',\r\n            okType: 'danger',\r\n            cancelText: 'No',\r\n            onOk() {\r\n                console.log('OK');\r\n                IncidentService.archiveIncident(incident).then(() => {\r\n                        refresh();\r\n                        message.success(\"Incident successfully archived!\");\r\n                    },\r\n                    error => {\r\n                        message.error(error.response.data.message);\r\n                    })\r\n            },\r\n            onCancel() {\r\n                console.log('Cancel');\r\n            },\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n\r\n        return (\r\n\r\n            <div>\r\n                <Modal\r\n                    title=\"Video\"\r\n                    visible={this.state.videoVisible}\r\n                    onOk={this.handleDone}\r\n                    onCancel={this.handleDone}\r\n                >\r\n                    {this.state.videoVisible ? (<ReactPlayer controls={true}\r\n                                                             url={\"/api/incident/video/\" + this.state.videoid + \"/video.mp4\"}\r\n                                                             width=\"300\"/>) : (<div><Empty/></div>)}\r\n                </Modal>\r\n\r\n                <Collapse bordered={false} defaultActiveKey={['1', '2']}>\r\n                    <Panel header=\"Filter\" key=\"1\">\r\n                        <span>From: </span>\r\n                        <DatePicker onChange={this.onFromDateChange}/>&nbsp;&nbsp;\r\n                        <TimePicker minuteStep={15} secondStep={60} onChange={this.onFromTimeChange}/>&nbsp;&nbsp;\r\n                        <span>To: </span>\r\n                        <DatePicker onChange={this.onToDateChange}/>&nbsp;&nbsp;\r\n                        <TimePicker minuteStep={15} secondStep={60} onChange={this.onToTimeChange}/>&nbsp;&nbsp;\r\n\r\n                        <ButtonGroup>\r\n                            <Button type={layout === \"list\" ? \"primary\" : \"\"} size=\"small\" icon=\"unordered-list\"\r\n                                    onClick={() => {\r\n                                        this.changeLayout(\"list\")\r\n                                    }}/>\r\n                            <Button type={layout === \"table\" ? \"primary\" : \"\"} size=\"small\" icon=\"table\"\r\n                                    onClick={() => {\r\n                                        this.changeLayout(\"table\")\r\n                                    }}/>\r\n                        </ButtonGroup>&nbsp;&nbsp;\r\n                        <Button onClick={() => {\r\n                            this.refresh()\r\n                        }}><Icon type=\"reload\"/>Reload</Button>\r\n                    </Panel>\r\n                    <Panel header=\"Incidents\" key=\"2\">\r\n                        {layout === \"table\" ? (this.renderGrid()) : (this.renderTable())}\r\n                    </Panel>\r\n                </Collapse>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n        if (this.state.loading || !this.state.incidents || this.state.incidents.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let incidents = this.state.incidents.events;\r\n        let count = this.state.incidents.totalPages * this.state.incidents.pageSize;\r\n\r\n\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                <Col>\r\n                    <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                                showQuickJumper\r\n                                defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                                pageSize={this.state.filter.pageSize}/>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row gutter={16}>\r\n                {\r\n                    incidents.map((incident, index) =>\r\n                        <Col span={8} key={index}>\r\n                            <Card\r\n                                title={\r\n                                    <div>\r\n                                        <Tag color=\"#f50\">{incident.eventType}</Tag>\r\n                                        <Tag color=\"#2db7f5\">{incident.eventDate}</Tag>\r\n                                        <Tag color=\"#87d068\"><span><Moment\r\n                                            format=\"LTS\">{incident.eventStart}</Moment></span><Icon\r\n                                            type=\"right\" hidden/><span hidden><Moment\r\n                                            format=\"LTS\">{incident.eventEnd}</Moment></span></Tag>\r\n                                        <Tag color=\"#108ee9\" hidden>{incident.eventDuration}s</Tag>\r\n                                    </div>\r\n                                }\r\n                                bordered={true}\r\n                                cover={<img alt=\"incident image\"\r\n                                            src={\"/api/incident/image/\" + incident.imageId + \"/image.jpg\"}/>}\r\n                                actions={[\r\n                                    <Icon type=\"right\" key=\"play\" onClick={() => this.showVideo(incident.videoId)}/>,\r\n                                    <Icon type=\"edit\" key=\"edit\"/>,\r\n                                    <Icon type=\"delete\" key=\"delete\"\r\n                                          onClick={this.showDeleteConfirm.bind(this, incident, this.refresh)}/>,\r\n                                ]}\r\n                            >\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.incidents || this.state.incidents.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let incidents = this.state.incidents.events;\r\n        let count = this.state.incidents.totalPages * this.state.incidents.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={incidents} pagination={pagination}>\r\n                <Column title=\"ID\" dataIndex=\"id\" key=\"id\"/>\r\n                <Column title=\"Type\" dataIndex=\"eventType\" key=\"eventType\"/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"/>\r\n                <Column title=\"Time\" dataIndex=\"eventStart\" key=\"eventStart\"\r\n                        render={eventStart => (<Moment format=\"LTS\">{eventStart}</Moment>)}/>\r\n                <Column title=\"Duration\" dataIndex=\"eventDuration\" key=\"eventDuration\"\r\n                        render={dur => (<span>{dur}s</span>)}/>\r\n                <Column title=\"Action\" key=\"action\" render={(text, incident) => (\r\n                    <span>\r\n                        <a onClick={() => this.showVideo(incident.videoId)}>Play</a>\r\n                        <Divider type=\"vertical\"/>\r\n                        <a onClick={this.showDeleteConfirm.bind(this, incident, this.refresh)}>Delete</a>\r\n                    </span>\r\n                )}/>\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","\r\nimport axios from './axios';\r\n\r\nclass TriggerService {\r\n\r\n    static Instance() {\r\n        return new TriggerService()\r\n    }\r\n\r\n    getTrigger() {\r\n        return axios.get('/api/trigger/');\r\n    }\r\n\r\n    getTriggers() {\r\n        return axios.get('/api/triggers');\r\n    }\r\n\r\n    createTrigger(trigger) {\r\n        return axios.post('/api/trigger/', trigger);\r\n    }\r\n\r\n    saveTrigger(trigger) {\r\n        return axios.put('/api/trigger/' + trigger.ID, trigger);\r\n    }\r\n\r\n    deleteTrigger(trigger) {\r\n        return axios.delete('/api/trigger/' + trigger.ID);\r\n    }\r\n}\r\n\r\nexport default TriggerService.Instance()","import React, {Component} from \"react\";\r\nimport {Slider, Button, Input} from \"antd\";\r\nimport TriggerService from \"../services/TriggerService\";\r\n\r\nexport default class TriggerSet extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.days = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\r\n        this.onChange0 = this.onChange0.bind(this);\r\n        this.onChange1 = this.onChange1.bind(this);\r\n        this.onChange2 = this.onChange2.bind(this);\r\n        this.onChange3 = this.onChange3.bind(this);\r\n        this.onChange4 = this.onChange4.bind(this);\r\n        this.onChange5 = this.onChange5.bind(this);\r\n        this.onChange6 = this.onChange6.bind(this);\r\n        this.onChangeValue = this.onChangeValue.bind(this);\r\n        this.saveTrigger = this.saveTrigger.bind(this);\r\n        this.deleteTrigger = this.deleteTrigger.bind(this);\r\n        this.setName = this.setName.bind(this);\r\n\r\n        this.state = {\r\n            trigger : this.props.trigger,\r\n            changed : false\r\n        }\r\n    }\r\n\r\n    onChange0(value) { this.onChangeValue(0, value)    }\r\n    onChange1(value) { this.onChangeValue(1, value)    }\r\n    onChange2(value) { this.onChangeValue(2, value)    }\r\n    onChange3(value) { this.onChangeValue(3, value)    }\r\n    onChange4(value) { this.onChangeValue(4, value)    }\r\n    onChange5(value) { this.onChangeValue(5, value)    }\r\n    onChange6(value) { this.onChangeValue(6, value)    }\r\n\r\n    onChangeValue(idx, value) {\r\n        let trigger = this.state.trigger;\r\n        trigger.TriggerDays[idx].Start = value[0];\r\n        trigger.TriggerDays[idx].End = value[1];\r\n        this.setState({trigger:trigger, changed: true})\r\n    }\r\n\r\n    saveTrigger() {\r\n\r\n        if (this.state.trigger.new) {\r\n            TriggerService.createTrigger(this.state.trigger)\r\n        } else {\r\n            TriggerService.saveTrigger(this.state.trigger)\r\n        }\r\n\r\n    }\r\n\r\n    NewTrigger() {\r\n        let trigger = {name:\"New\", TriggerDays: [], new:true};\r\n        for (let i=0;i<7;i++) {\r\n            trigger.TriggerDays.push({\r\n                Start:0,\r\n                End:24,\r\n                Day:i,\r\n            })\r\n        }\r\n        this.setState({trigger:trigger, changed: true})\r\n    }\r\n\r\n    setName(e, value) {\r\n        let trigger = this.state.trigger;\r\n        trigger.name = e.target.value;\r\n        this.setState({trigger:trigger, changed: true});\r\n    }\r\n\r\n    deleteTrigger() {\r\n        TriggerService.deleteTrigger(this.state.trigger)\r\n    }\r\n\r\n    ChangeTrigger(trigger) {\r\n        this.setState({trigger:trigger, changed: false})\r\n    }\r\n\r\n    render() {\r\n        let selected = this.state.trigger;\r\n        let changed = this.state.changed;\r\n\r\n        if (!selected) return (<div>Waiting..</div>);\r\n        let marks = {};\r\n        for (let i = 12; i <= 24; i++) {\r\n            let j = i - 12;\r\n            marks[j] = i + ':00'\r\n        }\r\n\r\n        for (let i = 0; i <= 12; i++) {\r\n            let j = i + 12;\r\n            marks[j] = (i < 10 ? '0' : '') + i + ':00'\r\n        }\r\n\r\n\r\n        selected.TriggerDays.map((day, idx) => {\r\n            let start = day.Start;\r\n            let end = day.End;\r\n            if (start > end) {\r\n                day.Start = start - 12;\r\n                day.End = end + 12\r\n            }\r\n        });\r\n\r\n        let dlist = selected.TriggerDays;\r\n\r\n        return (\r\n            <div>\r\n                {selected.new ? (<Input placeholder=\"Name\" onChange={this.setName}/>) : (<span>{selected.ID} - {selected.name}</span>)}\r\n                <div>\r\n                    <span>{this.days[dlist[0].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[0].Start, dlist[0].End]} onChange={this.onChange0}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[1].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[1].Start, dlist[1].End]} onChange={this.onChange1}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[2].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[2].Start, dlist[2].End]} onChange={this.onChange2}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[3].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[3].Start, dlist[3].End]} onChange={this.onChange3}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[4].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[4].Start, dlist[4].End]} onChange={this.onChange4}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[5].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[5].Start, dlist[5].End]} onChange={this.onChange5}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[6].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[6].Start, dlist[6].End]} onChange={this.onChange6}/>\r\n                </div>\r\n\r\n                <Button type=\"primary\" disabled={!changed} onClick={this.saveTrigger}>Save</Button>\r\n                <Button type=\"link\" disabled={changed} onClick={this.deleteTrigger}>Delete</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, {Component} from \"react\";\r\nimport {Select, Button} from 'antd';\r\nimport TriggerService from \"../services/TriggerService\";\r\nimport TriggerSet from \"../components/TriggerSet\";\r\n\r\nconst {Option} = Select;\r\nexport default class TriggerView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loading: true,\r\n            triggers: []\r\n        };\r\n\r\n        this.tsRef = React.createRef();\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.newTrigger = this.newTrigger.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        TriggerService.getTriggers().then(request => {\r\n            this.setState({\r\n                triggers: request.data,\r\n                selected: request.data[0].ID,\r\n                selectedt: request.data[0],\r\n                loading: false\r\n            })\r\n        });\r\n    }\r\n\r\n    newTrigger() {\r\n        this.tsRef.current.NewTrigger();\r\n    }\r\n\r\n    handleChange(id) {\r\n\r\n        console.log(\"changing to ...\", id);\r\n\r\n        for (let i = 0; i < this.state.triggers.length; i++) {\r\n            console.log(\"checking:\", this.state.triggers[i].ID);\r\n            if (id == this.state.triggers[i].ID) {\r\n                console.log(\"selected:\", id);\r\n                this.tsRef.current.ChangeTrigger(this.state.triggers[i]);\r\n                this.setState({selected: id, selectedt: this.state.triggers[i]});\r\n                return\r\n            }\r\n        }\r\n\r\n        console.log(\"cant select:(\")\r\n    }\r\n\r\n    render() {\r\n\r\n        let selected = this.state.selected;\r\n        let selectedt = this.state.selectedt;\r\n        let triggers = this.state.triggers;\r\n\r\n        if (this.state.loading) {\r\n            triggers = [];\r\n        }\r\n\r\n        let selectedname = \"\";\r\n        if (selectedt) {\r\n            selectedname = selectedt.Name\r\n        }\r\n\r\n        console.log(\"SN\", selectedname, selected, selectedt);\r\n        let selector = (\r\n\r\n            <div>\r\n                <Select style={{width: 120}} onChange={this.handleChange}>\r\n                    {\r\n                        triggers.map((trigger, index) =>\r\n                            <Option key={trigger.ID}>{trigger.name}</Option>\r\n                        )\r\n                    }\r\n\r\n                </Select>\r\n                &nbsp;\r\n                <Button type=\"primary\" onClick={this.newTrigger}>New</Button>\r\n            </div>\r\n        );\r\n\r\n        if (selectedt) {\r\n            return (\r\n                <div>\r\n                    {selector}\r\n                    <TriggerSet trigger={selectedt} ref={this.tsRef}/>\r\n                </div>\r\n\r\n            )\r\n        }\r\n\r\n        return (\r\n            selector\r\n        )\r\n    }\r\n}","\r\nimport React, {Component} from \"react\";\r\nimport {Button,  Card, DatePicker, Icon, TimePicker} from 'antd';\r\nimport DeviceService from \"../services/DeviceService\";\r\nimport {Link} from \"react-router-dom\";\r\nconst ButtonGroup = Button.Group;\r\n\r\nexport default class DeviceView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            layout: \"list\",\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 10\r\n            }\r\n        };\r\n        this.onFromDateChange = this.onFromDateChange.bind(this);\r\n        this.onFromTimeChange = this.onFromTimeChange.bind(this);\r\n        this.onToDateChange = this.onToDateChange.bind(this);\r\n        this.onToTimeChange = this.onToTimeChange.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n    }\r\n\r\n    refresh(){\r\n        this.props.handleRefresh();\r\n    }\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    changeLayout(layout) {\r\n        this.setState({\"layout\": layout});\r\n        this.props.handleLayoutChange(layout);\r\n    }\r\n\r\n   onFromDateChange(date) {\r\n       let filter = this.state.filter;\r\n       if(date!=null){\r\n         filter.fromDate = date.format(\"YYYY-MM-DD\");\r\n       }\r\n       else{\r\n           filter.fromDate=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onFromTimeChange(time) {\r\n       let filter = this.state.filter;\r\n       if(time!=null){\r\n         filter.fromTime = time.format(\"HH:mm:ss\");\r\n       }\r\n       else{\r\n           filter.fromTime=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onToDateChange(date) {\r\n       let filter = this.state.filter;\r\n       if(date!=null){\r\n         filter.toDate = date.format(\"YYYY-MM-DD\");\r\n       }\r\n       else{\r\n         filter.toDate=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onToTimeChange(time) {\r\n       let filter = this.state.filter;\r\n       if(time!=null){\r\n        filter.toTime = time.format(\"HH:mm:ss\");\r\n       }\r\n       else{\r\n         filter.toTime=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n\r\n        return (\r\n            <div>\r\n                <span>From: </span>\r\n                <DatePicker onChange={this.onFromDateChange}/>&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60} onChange={this.onFromTimeChange}/>&nbsp;&nbsp;\r\n                <span>To: </span>\r\n                <DatePicker onChange={this.onToDateChange}/>&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60} onChange={this.onToTimeChange}/>&nbsp;&nbsp;\r\n\r\n                <ButtonGroup>\r\n                    <Button type={layout === \"list\" ? \"primary\" : \"\"} size=\"small\" icon=\"table\"\r\n                            onClick={() => {\r\n                                this.changeLayout(\"list\")\r\n                            }}/>\r\n                    <Button type={layout === \"table\" ? \"primary\" : \"\"} size=\"small\" icon=\"unordered-list\"\r\n                            onClick={() => {\r\n                                this.changeLayout(\"table\")\r\n                            }}/>\r\n                </ButtonGroup>&nbsp;&nbsp;\r\n                <Button onClick={() => {\r\n                    this.refresh()\r\n                }}><Icon type=\"reload\"/>Reload</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass AnprService {\r\n\r\n    static Instance() {\r\n        return new AnprService()\r\n    }\r\n\r\n    getEvents(filter) {\r\n        return axios.post('/api/anpr/events', filter);\r\n    }\r\n\r\n    getIncidents(filter) {\r\n        return axios.post('/api/anpr/incidents', filter);\r\n    }\r\n\r\n    getIncidentsHotlisted(filter) {\r\n        return axios.post('/api/anpr/incidents/hotListed', filter);\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        return axios.delete('/api/anpr/' + event.id);\r\n    }\r\n\r\n    archiveAllEvent(lpr) {\r\n            return axios.put('/api/anpr/events/archive/' + lpr);\r\n        }\r\n\r\n    updateEvent(event) {\r\n        return axios.put('/api/anpr/event', event);\r\n    }\r\n\r\n    getEventFile(id) {\r\n        return axios.get('/public/anpr/anprText/' + id + '/image.jpg');\r\n    }\r\n\r\n    getHelmetMissingIncidentsRepeated(filter) {\r\n            return axios.post('/api/incident/repeated/helmet-missing', filter);\r\n    }\r\n    getReverseDirectionIncidentsRepeated(filter) {\r\n            return axios.post('/api/incident/repeated/reverse', filter);\r\n    }\r\n    getBriefIncidentsRepeated(filter) {\r\n                return axios.post('/api/incident/timeline', filter);\r\n    }\r\n     getIncidentTimeline(filter) {\r\n                     return axios.post('/api/anpr/events/list/bylpr', filter);\r\n     }\r\n     getIncidentsList(filter) {\r\n                    return axios.post('/api/anpr/events/list/lpr/count', filter);\r\n     }\r\n\r\n}\r\n\r\nexport default AnprService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Divider,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Modal,\r\n    message, Input, Button, Menu, Dropdown, Typography, Slider\r\n} from 'antd';\r\nimport GenericFilter from \"../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../services/AnprService\";\r\nimport Magnifier from \"react-magnifier\";\r\n\r\nconst {Paragraph, Text} = Typography;\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\n\r\n\r\nexport default class AnprView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible:true,\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getEvents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getEvents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n    handleOnClick = e => {\r\n                console.log(e);\r\n                this.setState({\r\n                  visible: false,\r\n                });\r\n              };\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return (\r\n            <div>\r\n                <h3>ANPR</h3>\r\n                <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                    <Panel header=\"Filter\" key=\"1\">\r\n                        LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/> <br/><br/>\r\n                        <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                       handleFilterChange={this.handleFilterChange}\r\n                                       handleLayoutChange={this.handleLayoutChange}/>\r\n                    </Panel>\r\n                </Collapse>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </div>)\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}} >\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"delete\"/>{' '}\r\n                                            Delete\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                    src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        :\r\n                                        <div style={{height:\"54px\",textAlign: \"center\"}}>\r\n                                            <Button size=\"small\"  onClick={() => this.magnifyEvent(event)} >\r\n                                                <Icon type=\"zoom-in\"/>Zoom Image\r\n                                            </Button>\r\n                                        </div>\r\n\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}   />\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"schedule\"/> <Moment\r\n                                            format=\"lll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"LP Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a> )}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet?\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>N/A</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"warning\"/>{' '}\r\n                                Delete</Button>\r\n                        )}\r\n                />\r\n\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Divider,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Modal,\r\n    message, Input, Button, Menu, Dropdown, Typography, Slider\r\n} from 'antd';\r\nimport GenericFilter from \"../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../services/AnprService\";\r\nimport Magnifier from \"react-magnifier\";\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\nconst {Paragraph, Text} = Typography;\r\n\r\n\r\nexport default class TrafficIncidentView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 24\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return (<div>\r\n            <h3>Incidents</h3>\r\n            <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                <Panel header=\"Filter\" key=\"1\">\r\n                    LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/> <br/><br/>\r\n                    <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                   handleFilterChange={this.handleFilterChange}\r\n                                   handleLayoutChange={this.handleLayoutChange}/>\r\n                </Panel>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </Collapse>\r\n        </div>)\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"delete\"/>{' '}\r\n                                            Delete\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                    src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        : <div style={{height:\"54px\",textAlign: \"center\"}}>\r\n                                               <Button size=\"small\" type=\"primary\" onClick={() => this.magnifyEvent(event)} >\r\n                                                   <Icon type=\"zoom-in\"/>Zoom Image\r\n                                               </Button>\r\n                                           </div>\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}/>\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code> <Moment format=\"lll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a>)}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>Yes</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"delete\"/>{' '}\r\n                                Delete</Button>\r\n                        )}\r\n                />\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\"\r\nimport {\r\n  Anchor,\r\n  Card,\r\n  Col,\r\n  Collapse,\r\n  Divider,\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Pagination,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Timeline,\r\n  Modal,\r\n  Tabs,\r\n  message,\r\n  Input,\r\n  Button,\r\n  Menu,\r\n  Dropdown,\r\n  Typography,\r\n  Slider\r\n} from \"antd\";\r\nimport Moment from \"react-moment\";\r\n\r\nimport AnprService from \"../../services/AnprService\";\r\n\r\nconst {Paragraph, Text} = Typography;\r\nconst {Column} = Table;\r\nexport default class IncidentTimeline extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n          loading:false,\r\n          anprresponse: {},\r\n          filter:{\r\n            currentPage: 1,\r\n            pageSizes: 24,\r\n            lpr: \"\",\r\n            incidentType:\"\"\r\n          }\r\n        };\r\n\r\n       this.toggleVisible = this.toggleVisible.bind(this);\r\n       this.refreshBriefIncidentsNow = this.refreshBriefIncidentsNow.bind(this);\r\n       this.onModalPageChange = this.onModalPageChange.bind(this);\r\n              this.onModalPageSizeChange = this.onModalPageSizeChange.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        let filter = this.state.filter;\r\n        if((filter.lpr != nextProps.lpr) || (filter.incidentType != nextProps.incidentType)) {\r\n            filter.lpr = nextProps.lpr;\r\n            filter.incidentType = nextProps.incidentType;\r\n            this.setState({filter},()=>{\r\n              this.refreshBriefIncidentsNow();\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    toggleVisible(){\r\n        let filter = this.state.filter;\r\n                filter.currentPage = 1;\r\n                this.setState({filter: filter});\r\n                this.props.toggleVisible();\r\n\r\n    }\r\n\r\n    refreshBriefIncidentsNow() {\r\n\r\n           let {loading, filter, anprresponse} = this.state;\r\n\r\n           if(filter.lpr && filter.incidentType){\r\n              this.setState({loading : true});\r\n              AnprService.getBriefIncidentsRepeated(filter).then(request =>\r\n              {\r\n                loading = false;\r\n                anprresponse= request.data;\r\n                this.setState({loading, anprresponse});\r\n              }).catch(error=> {\r\n               loading = false;\r\n               this.setState({loading});\r\n               alert(\"Something went wrong\");\r\n                 });\r\n           }\r\n\r\n    }\r\n    onModalPageChange(currentPage, pageSizes){\r\n             let filter = this.state.filter;\r\n             filter.currentPage = currentPage;\r\n             filter.pageSizes = pageSizes;\r\n             this.refreshBriefIncidentsNow(filter);\r\n          }\r\n\r\n          onModalPageSizeChange(current, pageSizes) {\r\n               let filter = this.state.filter;\r\n               filter.pageSizes = pageSizes;\r\n               this.refreshBriefIncidentsNow(filter);\r\n            }\r\n\r\n    render(){\r\n         let events = this.state.anprresponse.events;\r\n         let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSizes;\r\n\r\n                  const paginationOption = {\r\n                         showSizeChanger: false,\r\n                         showQuickJumper: false,\r\n                         pageSize:5,\r\n                         showLessItems: true,\r\n                         onShowSizeChange: this.onModalPageSizeChange,\r\n                         onChange: this.onModalPageChange,\r\n                         total: count\r\n                     };\r\n\r\n                     const pagination = {\r\n                         ...paginationOption,\r\n                         total: count,\r\n                         current: this.state.filter.currentPage,\r\n                         pageSizes: this.state.filter.pageSizes\r\n                     };\r\n\r\n         if (this.state.loading)\r\n         {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n         }\r\n\r\n         if (!this.state.anprresponse.events){\r\n                   return <Empty description={false}/>\r\n         }\r\n\r\n        return <Modal\r\n\r\n                title={<div>{this.state.filter.incidentType}<Paragraph copyable>{this.state.filter.lpr}</Paragraph></div> }\r\n                visible={this.props.visible}\r\n                onCancel={this.toggleVisible}\r\n                onClose={this.toggleVisible}\r\n                footer={[\r\n                         <Button key=\"close\"  type=\"primary\" onClick={this.toggleVisible}>\r\n                           Close\r\n                         </Button>\r\n                        ]}\r\n                >\r\n                 <div>\r\n                                               <Table dataSource={events} pagination={pagination}>\r\n                                                    <Column title=\"When and Where\"\r\n                                                             render={(text, record, index)=> <Timeline.Item>\r\n                                                           <div>\r\n                                                             <p><Icon type=\"clock-circle\" />  <Moment format=\"lll\">{record.eventDate}</Moment></p>\r\n                                                             <p><Icon type=\"environment\"/> {record.location}</p>\r\n                                                             <a title={\"click here to download\"}\r\n                                                               href={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}\r\n                                                             download={true}>\r\n                                                             <img alt=\"event\"\r\n                                                                 src={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}style={{width:160,height:\"auto\"}}/>\r\n                                                             </a>\r\n                                                           </div>\r\n                                                             </Timeline.Item>\r\n                                                             }/>\r\n                                                    <Column  title=\"Captured Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                                                              render={id => (\r\n                                                                      <a title={\"click here to download\"}  href={\"/public/anpr/vehicle/\" + id + \"/image.jpg\"}\r\n                                                                      download={true}>\r\n                                                                      <img alt=\"event\"\r\n                                                                      src={\"/public/anpr/vehicle/\" + id + \"/image.jpg\" }style={{width:200,height:\"auto\"}}/></a>)}/>\r\n                                               </Table>\r\n                                            </div>\r\n               </Modal>\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport {\r\n  Anchor,\r\n  Card,\r\n  Col,\r\n  Collapse,\r\n  Divider,\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Pagination,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Timeline,\r\n  Modal,\r\n  Tabs,\r\n  message,\r\n  Input,\r\n  Button,\r\n  Menu,\r\n  Dropdown,\r\n  Typography,\r\n  Slider\r\n} from \"antd\";\r\nimport GenericFilter from \"../../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../../services/AnprService\";\r\nimport IncidentTimeline from \"./IncidentTimeline\";\r\nimport Magnifier from \"react-magnifier\";\r\n\r\nconst { Link } = Anchor;\r\nconst { Panel } = Collapse;\r\nconst { Paragraph, Text } = Typography;\r\nconst {Column} = Table;\r\nconst { TabPane } = Tabs;\r\nconst { Search } = Input;\r\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\r\nconst tabList = [\r\n    {\r\n        key: 'Reverse',\r\n        tab: 'Reverse',\r\n    },\r\n    {\r\n        key: 'Helmet-Missing',\r\n        tab: 'Helmet-Missing',\r\n    },\r\n];\r\n\r\nexport default class IncidentRepeatedView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab:\"Reverse\",\r\n      visible:false,\r\n      timelineLpr:\"\",\r\n      filter: {\r\n        lpr: \"\"\r\n      },\r\n      helmetMissing:{\r\n        loading:false,\r\n        anprresponse: {},\r\n        filter: {\r\n          pages: 1,\r\n          pageSizes: 24,\r\n          lpr: \"\",\r\n          incidentType:\"\"\r\n        }\r\n      },\r\n      briefIncident:{\r\n        loading:false,\r\n        anprresponse: {},\r\n          filter:{\r\n            lpr: \"\",\r\n          }\r\n      },\r\n      reverseDirection:{\r\n        loading:false,\r\n        anprresponse: {},\r\n        filter: {\r\n          pagess: 1,\r\n          pageSizes: 24,\r\n           lpr: \"\",\r\n           incidentType:\"\"\r\n        }\r\n      }\r\n    };\r\n\r\n    this.refresh = this.refresh.bind(this);\r\n    this.handleRefresh = this.handleRefresh.bind(this);\r\n    this.onHelmetMissingPageChange = this.onHelmetMissingPageChange.bind(this);\r\n    this.onReverseDirectionPageChange = this.onReverseDirectionPageChange.bind(this);\r\n    this.onHelmetMissingPageSizeChange = this.onHelmetMissingPageSizeChange.bind(this);\r\n    this.onReverseDirectionPageSizeChange = this.onReverseDirectionPageSizeChange.bind(this);\r\n    this.handleTabClick = this.handleTabClick.bind(this);\r\n    this.refreshHelmetMissingIncidentsNow = this.refreshHelmetMissingIncidentsNow.bind(this);\r\n    this.refreshReverseDirectionIncidentsNow = this.refreshReverseDirectionIncidentsNow.bind(this);\r\n    this.onLprInputChange=this.onLprInputChange.bind(this);\r\n    this.search=this.search.bind(this);\r\n    this.onTabChange=this.onTabChange.bind(this);\r\n    this.toggleIncidentTimelineModal = this.toggleIncidentTimelineModal.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refresh();\r\n  }\r\n\r\n  handleTabClick(tabIndex) {\r\n       this.setState({\r\n         activeTabIndex:\r\n          tabIndex === this.state.activeTabIndex\r\n            ? this.props.defaultActiveTabIndex\r\n          : tabIndex\r\n       });\r\n     }\r\n\r\n  refresh() {\r\n     this.refreshHelmetMissingIncidentsNow();\r\n     this.refreshReverseDirectionIncidentsNow();\r\n  }\r\n\r\n  showModal = (lpr) => {\r\n      this.setState({\r\n        visible: true,\r\n        timelineLpr: lpr\r\n      });\r\n  }\r\n\r\n  toggleIncidentTimelineModal(){\r\n    let visible = this.state.visible;\r\n    this.setState({visible: !visible});\r\n  }\r\n\r\n  //cant use refresh to read from state as state may not have been set\r\n  refreshHelmetMissingIncidentsNow() {\r\n\r\n     let helmetMissing = this.state.helmetMissing;\r\n     helmetMissing.loading = true;\r\n     this.setState({helmetMissing:helmetMissing});\r\n\r\n     AnprService.getHelmetMissingIncidentsRepeated(this.state.helmetMissing.filter).then(request =>\r\n         {\r\n           helmetMissing.loading = false;\r\n           helmetMissing.anprresponse= request.data;\r\n           this.setState({helmetMissing:helmetMissing});\r\n         }).catch(error=> {\r\n              helmetMissing.loading = false;\r\n              this.setState({helmetMissing:helmetMissing});\r\n              alert(\"Something went wrong\");\r\n            });\r\n  }\r\n  refreshReverseDirectionIncidentsNow() {\r\n      let reverseDirection = this.state.reverseDirection;\r\n      reverseDirection.loading=true;\r\n      this.setState({reverseDirection:reverseDirection});\r\n      AnprService.getReverseDirectionIncidentsRepeated(this.state.reverseDirection.filter).then(request =>\r\n          {\r\n           reverseDirection.loading = false;\r\n           reverseDirection.anprresponse= request.data;\r\n           this.setState({reverseDirection:reverseDirection});\r\n          }).catch(error=> {\r\n             reverseDirection.loading = false;\r\n             this.setState({ hasError: true });\r\n             alert(\"Something went wrong\");\r\n          });\r\n  }\r\n\r\n\r\n  handleRefresh(){\r\n    this.refresh();\r\n  }\r\n\r\n  onLprInputChange(e) {\r\n    let filter = this.state.filter;\r\n    filter.lpr = e.target.value;\r\n    this.setState({filter: filter})\r\n  }\r\n\r\n  search(searchText) {\r\n    let {filter, reverseDirection, helmetMissing} = this.state;\r\n    filter.lpr = searchText;\r\n    reverseDirection.filter.lpr = searchText;\r\n    helmetMissing.filter.lpr = searchText;\r\n    this.setState({filter,reverseDirection,helmetMissing},()=>{\r\n      this.refresh();\r\n    });\r\n  }\r\n\r\n  onHelmetMissingPageChange(page, pageSize){\r\n    let filter = this.state.helmetMissing.filter;\r\n    filter.page = page;\r\n    filter.pageSize = pageSize;\r\n    this.refreshHelmetMissingIncidentsNow(filter);\r\n  }\r\n\r\n  onReverseDirectionPageChange(pages, pageSizes){\r\n     let filter = this.state.reverseDirection.filter;\r\n     filter.pages = pages;\r\n     filter.pageSizes = pageSizes;\r\n     this.refreshReverseDirectionIncidentsNow(filter);\r\n  }\r\n\r\n  onHelmetMissingPageSizeChange(current, pageSize){\r\n    let filter = this.state.helmetMissing.filter;\r\n    filter.pageSize = pageSize;\r\n    this.refreshHelmetMissingIncidentsNow(filter);\r\n  }\r\n\r\n  onReverseDirectionPageSizeChange(current, pageSizes) {\r\n     let filter = this.state.reverseDirection.filter;\r\n     filter.pageSizes = pageSizes;\r\n     this.refreshReverseDirectionIncidentsNow(filter);\r\n  }\r\n\r\n  onTabChange(key) {\r\n      this.setState({activeTab: key})\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n          <div>\r\n            <div>\r\n\r\n            </div>\r\n\r\n                <Card\r\n                style={{width: '100%'}}\r\n                title={<Row>\r\n                  <Col xl={{span: 16}} lg={{span: 16}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n                       <h4>Repeated Incidents</h4>\r\n                  </Col>\r\n                  <Col xl={{span: 8}} lg={{span: 8}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n\r\n                     <Search  allowClear\r\n                       placeholder=\"Search Vehicle \"\r\n                       onChange={this.onLprInputChange}\r\n                       style={{textAlign:\"right\"}}\r\n                       onSearch={value => this.search(value)} enterButton\r\n                      />\r\n                  </Col>\r\n                </Row>}\r\n\r\n                tabList={tabList}\r\n                activeTabKey={this.state.activeTab}\r\n\r\n                onTabChange={key => {\r\n                    this.onTabChange(key);\r\n                }}\r\n                >\r\n                 {this.state.activeTab === \"Reverse\" ? (this.renderReverseData()) : this.renderHelmetMissingData()}\r\n\r\n                 <IncidentTimeline\r\n                   lpr={this.state.timelineLpr}\r\n                   incidentType={this.state.activeTab}\r\n                   visible={this.state.visible}\r\n                   toggleVisible={this.toggleIncidentTimelineModal}\r\n                   />\r\n              </Card>\r\n\r\n          </div>\r\n    );\r\n  }\r\n\r\n  renderReverseData(){\r\n\r\n\r\n   let events = this.state.reverseDirection.anprresponse.events;\r\n   let count = this.state.reverseDirection.anprresponse.totalPages * this.state.reverseDirection.anprresponse.pageSizes;\r\n\r\n   const paginationOption = {\r\n       showSizeChanger: true,\r\n       showQuickJumper: true,\r\n       onShowSizeChange: this.onReverseDirectionPageSizeChange,\r\n       onChange: this.onReverseDirectionPageChange,\r\n       total: count\r\n   };\r\n\r\n   const pagination = {\r\n       ...paginationOption,\r\n       total: count,\r\n       current: this.state.reverseDirection.filter.pages,\r\n       pageSizes: this.state.reverseDirection.filter.pageSizes\r\n   };\r\n\r\n   if (this.state.reverseDirection.loading)\r\n   {\r\n      const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n      return <Spin indicator={antIcon}/>\r\n   }\r\n\r\n   if (!this.state.reverseDirection.anprresponse.events){\r\n       return <Empty description={false}/>\r\n   }\r\n\r\n   return (\r\n     <div>\r\n       <Table dataSource={events} pagination={pagination}>\r\n\r\n         <Column  title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n            render={anprText => <Button onClick={()=> this.showModal(anprText)}>{anprText}</Button>}/>\r\n\r\n         <Column title=\"Repeated Times\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n             render={repeatedTimes => repeatedTimes}/>\r\n       </Table>\r\n     </div>\r\n\r\n   )\r\n  }\r\n\r\n  renderHelmetMissingData(){\r\n\r\n\r\n   let events = this.state.helmetMissing.anprresponse.events;\r\n   let count = this.state.helmetMissing.anprresponse.totalPages * this.state.helmetMissing.anprresponse.pageSize;\r\n\r\n   const paginationOptions = {\r\n       showSizeChanger: true,\r\n       showQuickJumper: true,\r\n       onShowSizeChange: this.onHelmetMissingPageSizeChange,\r\n       onChange: this.onHelmetMissingPageChange,\r\n       total: count\r\n   };\r\n\r\n   const pagination = {\r\n       ...paginationOptions,\r\n       total: count,\r\n       current: this.state.helmetMissing.filter.page,\r\n       pageSize: this.state.helmetMissing.filter.pageSize\r\n   };\r\n\r\n   if (this.state.helmetMissing.loading)\r\n   {\r\n      const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n      return <Spin indicator={antIcon}/>\r\n   }\r\n\r\n   if (!this.state.helmetMissing.anprresponse.events){\r\n             return <Empty description={false}/>\r\n   }\r\n\r\n    return (\r\n      <div>\r\n         <Table dataSource={events} pagination={pagination}>\r\n\r\n              <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                      render={anprText => <Button onClick={()=> this.showModal(anprText)}>{anprText}</Button>}/>\r\n               <Column title=\"Repeated Times\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n                      render={repeatedTimes => repeatedTimes}/>\r\n         </Table>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass HotListVehicleService {\r\n\r\n    static Instance() {\r\n        return new HotListVehicleService()\r\n    }\r\n\r\n    getHotListedVehicles(filter) {\r\n        return axios.post('/api/hotlist/vehicle/list', filter);\r\n    }\r\n\r\n    saveHotListedVehicle(vehicle) {\r\n        return axios.post('/api/hotlist/vehicle/save', vehicle);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default HotListVehicleService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Modal,\r\n    message, Input, Typography, Spin, Checkbox, Tag\r\n} from 'antd';\r\n\r\nimport HotListVehicleService from \"../../services/HotListVehicleService\";\r\n\r\nconst {Search} = Input;\r\nconst {Text} = Typography;\r\n\r\nexport default class HotListedVehiclesList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeModal: \"\",\r\n            hotListedVehicleResponse: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 40,\r\n                lpr: \"\"\r\n            },\r\n            workingVehicle: {\r\n                id: undefined,\r\n                lpr: \"\",\r\n                archived: false\r\n            },\r\n            loading: {\r\n                vehiclesList: false\r\n            }\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.openHotListVehicleForm = this.openHotListVehicleForm.bind(this);\r\n        this.handleSubmitWorkingHotListVehicle = this.handleSubmitWorkingHotListVehicle.bind(this);\r\n        this.handleCancelWorkingHotListVehicle = this.handleCancelWorkingHotListVehicle.bind(this);\r\n        this.archiveHotListedVehicle = this.archiveHotListedVehicle.bind(this);\r\n        this.workingVehicleOnChange = this.workingVehicleOnChange.bind(this);\r\n        this.search = this.search.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh(this.state.filter);\r\n    }\r\n\r\n    refresh(filter) {\r\n        let loading = this.state.loading;\r\n        loading.vehiclesList = true;\r\n        this.setState({loading});\r\n        HotListVehicleService.getHotListedVehicles(filter).then(response => {\r\n            loading.vehiclesList = false;\r\n            this.setState({hotListedVehicleResponse: response.data, loading})\r\n        }).catch(error => {\r\n            loading.vehiclesList = false;\r\n            this.setState({loading});\r\n            message.error('Something went wrong!');\r\n        })\r\n    }\r\n\r\n\r\n    archiveHotListedVehicle(event) {\r\n        HotListVehicleService.archiveHotListedVehicle(event).then(request => {\r\n            this.refresh(this.state.filter);\r\n            message.success('Vehicle archived!');\r\n        }).catch(error => {\r\n            message.error('Something went wrong!');\r\n        })\r\n    }\r\n\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter);\r\n    }\r\n\r\n\r\n    confirm(e) {\r\n        console.log(e);\r\n        message.success('Click on Yes');\r\n    }\r\n\r\n    cancel(e) {\r\n        console.log(e);\r\n        message.error('Click on No');\r\n    }\r\n\r\n    openHotListVehicleForm(vehicle) {\r\n        let workingVehicle = {\r\n            id: undefined,\r\n            lpr: \"\",\r\n            archived: false\r\n        };\r\n        if (vehicle) {\r\n            workingVehicle.id = vehicle.id;\r\n            workingVehicle.lpr = vehicle.lpr;\r\n            workingVehicle.archived = vehicle.archived;\r\n        }\r\n\r\n        this.setState({\r\n            activeModal: \"workingVehicle\", workingVehicle: workingVehicle\r\n        });\r\n    };\r\n\r\n    workingVehicleOnChange(e) {\r\n        let {workingVehicle} = this.state;\r\n\r\n        switch (e.target.type) {\r\n            case \"checkbox\":\r\n                workingVehicle[e.target.name] = e.target.checked;\r\n                break;\r\n            default:\r\n                workingVehicle[e.target.name] = e.target.value;\r\n                break;\r\n\r\n        }\r\n        this.setState({workingVehicle: workingVehicle});\r\n    }\r\n\r\n    handleSubmitWorkingHotListVehicle(e) {\r\n        HotListVehicleService.saveHotListedVehicle(this.state.workingVehicle).then(response => {\r\n            this.refresh(this.state.filter);\r\n            let workingVehicle = {\r\n                id: undefined,\r\n                lpr: \"\",\r\n                archived: false\r\n            };\r\n            this.setState({activeModal: \"\", workingVehicle});\r\n            message.success('Saved!');\r\n        }).catch(error => {\r\n            message.error('Something went wrong!');\r\n        })\r\n    };\r\n\r\n    handleCancelWorkingHotListVehicle(e) {\r\n        let workingVehicle = {\r\n            id: undefined,\r\n            lpr: \"\",\r\n            archived: false\r\n        };\r\n        this.setState({\r\n            activeModal: \"\",\r\n            workingVehicle\r\n        });\r\n    };\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    search(searchText) {\r\n        let {filter} = this.state;\r\n        filter.lpr = searchText;\r\n        this.setState({filter: filter});\r\n        this.refresh(filter)\r\n    }\r\n\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    render() {\r\n        let {filter, hotListedVehicleResponse, workingVehicle, loading} = this.state;\r\n\r\n        let vehicles = hotListedVehicleResponse.events;\r\n        let count = hotListedVehicleResponse.totalPages * hotListedVehicleResponse.pageSize;\r\n\r\n\r\n        if (loading.vehiclesList) {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col xl={{span: 8}} lg={{span: 8}} md={{span: 16}} sm={{span: 12}} xs={{span: 12}}>\r\n                        <Search allowClear placeholder=\"input search text\" name=\"lpr\" value={filter.lpr}\r\n                                onChange={this.onLprInputChange} onSearch={value => this.search(value)} enterButton/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <br/>\r\n                <div>\r\n                    <div>\r\n                        <Row>\r\n                            <Col xl={{span: 3}} lg={{span: 4}} md={{span: 6}} sm={{span: 8}} xs={{span: 16}}\r\n                                 key={\"new\"}>\r\n                                <Card style={{backgroundColor: \"#40a9ff\"}} hoverable\r\n                                      onClick={() => this.openHotListVehicleForm(undefined)}>\r\n                                    <div style={{textAlign: \"center\"}}>\r\n                                        <Text style={{color: \"white\"}} strong>\r\n                                            <Icon type=\"plus\"/> New</Text>\r\n                                    </div>\r\n                                </Card>\r\n                            </Col>\r\n                            {(vehicles || []).map((vehicle, index) =>\r\n                                <Col xl={{span: 3}} lg={{span: 4}} md={{span: 6}} sm={{span: 8}} xs={{span: 16}}\r\n                                     key={index}>\r\n                                    <div style={{textAlign: \"center\"}}>\r\n                                        <Card hoverable onClick={() => this.openHotListVehicleForm(vehicle)}\r\n                                              style={{backgroundColor: vehicle.archived ? \"#fafafa\" : \"\"}}>\r\n                                            <div style={{textAlign: \"center\"}}>\r\n                                                <Text delete={vehicle.archived} strong>\r\n                                                    {vehicle.lpr}\r\n                                                </Text>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </div>\r\n                                </Col>\r\n                            )}\r\n                        </Row>\r\n\r\n                        <Modal\r\n                            title={<div><Tag>{workingVehicle.id ? \"EDIT\" : \"NEW\"}</Tag>{' '}<Text\r\n                                copyable={workingVehicle.lpr.length > 0}>{workingVehicle.lpr}</Text></div>}\r\n                            visible={this.state.activeModal === \"workingVehicle\"}\r\n                            onOk={this.handleSubmitWorkingHotListVehicle}\r\n                            onCancel={this.handleCancelWorkingHotListVehicle}\r\n                        >\r\n                            <Checkbox onChange={this.workingVehicleOnChange} name={\"archived\"}\r\n                                      checked={workingVehicle.archived}>Archive</Checkbox>\r\n                            <br/>\r\n                            <br/>\r\n                            <Input onChange={this.workingVehicleOnChange} name={\"lpr\"} value={workingVehicle.lpr}\r\n                                   size=\"large\"\r\n                                   placeholder=\"Enter vehicle number here\"/>\r\n\r\n\r\n                        </Modal>\r\n\r\n\r\n                    </div>\r\n                    {(hotListedVehicleResponse && hotListedVehicleResponse.totalPages > 1) ?\r\n                        <div style={{textAlign: \"right\"}}>\r\n                            <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange}\r\n                                        showSizeChanger\r\n                                        showQuickJumper\r\n                                        defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                                        pageSize={this.state.filter.pageSize}/>\r\n                        </div> : null}\r\n\r\n\r\n                </div>\r\n\r\n            </div>)\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Divider,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Modal,\r\n    message, Input, Button, Menu, Dropdown, Typography, Slider, Popconfirm,\r\n} from 'antd';\r\nimport GenericFilter from \"../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../services/AnprService\";\r\nimport HotListVehicleService from \"../services/HotListVehicleService\";\r\nimport Magnifier from \"react-magnifier\";\r\nimport HotListedVehiclesList from \"../components/HotListedVehicles/HotListedVehiclesList\";\r\n\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\nconst {Paragraph, Text} = Typography;\r\nconst tabList = [\r\n    {\r\n        key: 'incidents',\r\n        tab: 'Incidents',\r\n    },\r\n    {\r\n        key: 'vehicles',\r\n        tab: 'Vehicles',\r\n    },\r\n];\r\n\r\n\r\nexport default class IncidentHotlistView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeTab: \"incidents\",\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getIncidentsHotlisted(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getIncidentsHotlisted(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n\r\n    onTabChange(key) {\r\n        if (key === \"incidents\") {\r\n            this.refresh();\r\n        }\r\n        this.setState({activeTab: key})\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n\r\n        return (<div>\r\n            <Card\r\n                style={{width: '100%'}}\r\n                title=\"Hotlist\"\r\n                tabList={tabList}\r\n                activeTabKey={this.state.activeTab}\r\n                onTabChange={key => {\r\n                    this.onTabChange(key);\r\n                }}\r\n            >\r\n                {this.state.activeTab === \"incidents\" ? (this.renderIncidents()) : <HotListedVehiclesList/>}\r\n            </Card>\r\n\r\n\r\n        </div>)\r\n    }\r\n\r\n\r\n    renderIncidents() {\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return <div>\r\n            <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                <Panel header=\"Filter\" key=\"1\">\r\n                    LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/> <br/><br/>\r\n                    <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                   handleFilterChange={this.handleFilterChange}\r\n                                   handleLayoutChange={this.handleLayoutChange}/>\r\n                </Panel>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </Collapse>\r\n\r\n        </div>;\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"delete\"/>{' '}\r\n                                            Delete\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                                src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        : <div style={{height:\"54px\",textAlign: \"center\"}}>\r\n                                               <Button size=\"small\" type=\"primary\" onClick={() => this.magnifyEvent(event)} >\r\n                                                   <Icon type=\"zoom-in\"/>Zoom Image\r\n                                               </Button>\r\n                                           </div>\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}/>\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code> <Moment format=\"lll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a>)}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>Yes</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"delete\"/>{' '}\r\n                                Delete</Button>\r\n                        )}\r\n                />\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\"\r\nimport {\r\n  Anchor,\r\n  Card,\r\n  Col,\r\n  Collapse,\r\n  Divider,\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Pagination,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Timeline,\r\n  Modal,\r\n  Tabs,\r\n  message,\r\n  Input,\r\n  Button,\r\n  Menu,\r\n  Dropdown,\r\n  Typography,\r\n  Slider\r\n} from \"antd\";\r\nimport Moment from \"react-moment\";\r\n\r\nimport AnprService from \"../../services/AnprService\";\r\n\r\nconst {Paragraph, Text} = Typography;\r\nconst {Column} = Table;\r\nexport default class IncidentTimeline extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n          loading:false,\r\n          anprresponse: {},\r\n          filter:{\r\n            currentPage: 1,\r\n            pageSizes: 24,\r\n            lpr: \"\",\r\n            incidentType:\"\"\r\n          }\r\n        };\r\n\r\n       this.toggleVisible = this.toggleVisible.bind(this);\r\n       this.refreshBriefIncidentsNow = this.refreshBriefIncidentsNow.bind(this);\r\n       this.onModalPageChange = this.onModalPageChange.bind(this);\r\n       this.onModalPageSizeChange = this.onModalPageSizeChange.bind(this);\r\n       this.refreshBriefIncidentsNow=this.refreshBriefIncidentsNow.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        let filter = this.state.filter;\r\n        if((filter.lpr != nextProps.lpr) || (filter.incidentType != nextProps.incidentType)) {\r\n            filter.lpr = nextProps.lpr;\r\n            filter.incidentType = nextProps.incidentType;\r\n            this.setState({filter},()=>{\r\n              this.refreshBriefIncidentsNow();\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    toggleVisible(){\r\n        let filter = this.state.filter;\r\n        filter.currentPage = 1;\r\n        this.setState({filter: filter});\r\n        this.props.toggleVisible();\r\n\r\n    }\r\n\r\n    refreshBriefIncidentsNow() {\r\n\r\n           let {loading, filter, anprresponse} = this.state;\r\n\r\n           if(filter.lpr && filter.incidentType){\r\n              this.setState({loading : true});\r\n              AnprService.getIncidentTimeline(filter).then(request =>\r\n              {\r\n                loading = false;\r\n                anprresponse= request.data;\r\n                this.setState({loading, anprresponse});\r\n              }).catch(error=> {\r\n               loading = false;\r\n               this.setState({loading});\r\n               alert(\"Something went wrong\");\r\n                 });\r\n           }\r\n\r\n    }\r\n      onModalPageChange(currentPage, pageSizes){\r\n         let filter = this.state.filter;\r\n         filter.currentPage = currentPage;\r\n         filter.pageSizes = pageSizes;\r\n         this.refreshBriefIncidentsNow(filter);\r\n      }\r\n\r\n      onModalPageSizeChange(current, pageSizes) {\r\n           let filter = this.state.filter;\r\n           filter.pageSizes = pageSizes;\r\n           this.refreshBriefIncidentsNow(filter);\r\n        }\r\n\r\n    render(){\r\n         let events = this.state.anprresponse.events;\r\n         let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSizes;\r\n\r\n         const paginationOption = {\r\n                showSizeChanger: false,\r\n                showQuickJumper: false,\r\n                pageSize:5,\r\n                showLessItems: true,\r\n                onShowSizeChange: this.onModalPageSizeChange,\r\n                onChange: this.onModalPageChange,\r\n                total: count\r\n            };\r\n\r\n            const pagination = {\r\n                ...paginationOption,\r\n                total: count,\r\n                current: this.state.filter.currentPage,\r\n                pageSizes: this.state.filter.pageSizes\r\n            };\r\n\r\n         if (this.state.loading)\r\n         {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n         }\r\n\r\n         if (!this.state.anprresponse.events){\r\n                   return <Empty description={false}/>\r\n         }\r\n\r\n        return <Modal\r\n\r\n                title={<div><Paragraph copyable>{this.state.filter.lpr}</Paragraph></div> }\r\n                visible={this.props.visible}\r\n                onCancel={this.toggleVisible}\r\n                onClose={this.toggleVisible}\r\n                footer={[\r\n                         <Button key=\"close\"  type=\"primary\" onClick={this.toggleVisible}>\r\n                           Close\r\n                         </Button>\r\n                        ]}\r\n                >\r\n                   <div>\r\n                              <Table dataSource={events} pagination={pagination}>\r\n                                   <Column title=\"When and Where\"\r\n\r\n\r\n                                            render={(text, record, index)=> <Timeline.Item>\r\n                                          <div>\r\n                                            <p><Icon type=\"clock-circle\" />  <Moment format=\"lll\">{record.eventDate}</Moment></p>\r\n                                            <p><Icon type=\"environment\"/> {record.location}</p>\r\n                                            <a title={\"click here to download\"}\r\n                                              href={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}\r\n                                            download={true}>\r\n                                            <img alt=\"event\"\r\n                                                src={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}style={{width:160,height:\"auto\"}}/>\r\n                                            </a>\r\n                                          </div>\r\n                                            </Timeline.Item>\r\n                                            }/>\r\n                                   <Column  title=\"Captured Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                                             render={id => (\r\n                                                     <a title={\"click here to download\"}  href={\"/public/anpr/vehicle/\" + id + \"/image.jpg\"}\r\n                                                     download={true}>\r\n                                                     <img alt=\"event\"\r\n                                                     src={\"/public/anpr/vehicle/\" + id + \"/image.jpg\" }style={{width:200,height:\"auto\"}}/></a>)}/>\r\n                              </Table>\r\n                           </div>\r\n\r\n               </Modal>\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport {\r\n  Anchor,\r\n  Card,\r\n  Col,\r\n  Collapse,\r\n  Checkbox,\r\n  Divider,\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Pagination,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Timeline,\r\n  Modal,\r\n  Tabs,\r\n  message,\r\n  Input,\r\n  Button,\r\n  Menu,\r\n  Dropdown,\r\n  Typography,\r\n  Slider\r\n} from \"antd\";\r\nimport GenericFilter from \"../../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../../services/AnprService\";\r\nimport IncidentTimeline from \"./IncidentTimeline\";\r\nimport Magnifier from \"react-magnifier\";\r\n\r\nconst { Link } = Anchor;\r\nconst { Panel } = Collapse;\r\nconst { Paragraph, Text } = Typography;\r\nconst {Column} = Table;\r\nconst { TabPane } = Tabs;\r\nconst { Search } = Input;\r\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\r\n\r\nexport default class MasterDataView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      archiveEventsLoading: \"\",\r\n      activeTab:\"All-Incidents\",\r\n      visible:false,\r\n      timelineLpr:\"\",\r\n      filter: {\r\n        lpr: \"\",\r\n      },\r\n      archiveLpr:{\r\n                 anprresponse: {},\r\n                 lpr: \"\",\r\n              },\r\n\r\n      allData:{\r\n        loading:false,\r\n        anprresponse: {},\r\n        filter: {\r\n          pages: 1,\r\n          pageSizes: 24,\r\n           lpr: \"\",\r\n           incidentType:\"\",\r\n        }\r\n      }\r\n    };\r\n\r\n    this.refresh = this.refresh.bind(this);\r\n    this.handleRefresh = this.handleRefresh.bind(this);\r\n    this.onMasterDataPageChange = this.onMasterDataPageChange.bind(this);\r\n    this.onMasterDataPageSizeChange = this.onMasterDataPageSizeChange.bind(this);\r\n    this.handleTabClick = this.handleTabClick.bind(this);\r\n    this.refreshIncidentsNow = this.refreshIncidentsNow.bind(this);\r\n    this.onLprInputChange=this.onLprInputChange.bind(this);\r\n    this.search=this.search.bind(this);\r\n    this.onTabChange=this.onTabChange.bind(this);\r\n    this.toggleIncidentTimelineModal = this.toggleIncidentTimelineModal.bind(this);\r\n    this.archiveLprOnChange = this.archiveLprOnChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refresh();\r\n  }\r\n\r\n  handleTabClick(tabIndex) {\r\n       this.setState({\r\n         activeTabIndex:\r\n          tabIndex === this.state.activeTabIndex\r\n            ? this.props.defaultActiveTabIndex\r\n          : tabIndex\r\n       });\r\n     }\r\n\r\n  refresh() {\r\n     this.refreshIncidentsNow();\r\n  }\r\n\r\n  showModal = (lpr) => {\r\n        this.setState({\r\n          visible: true,\r\n          timelineLpr: lpr\r\n        });\r\n  }\r\n  toggleIncidentTimelineModal(){\r\n      let visible = this.state.visible;\r\n      this.setState({visible: !visible});\r\n  }\r\n\r\n  //cant use refresh to read from state as state may not have been set\r\n\r\n  refreshIncidentsNow() {\r\n      let allData = this.state.allData;\r\n      allData.loading=true;\r\n      this.setState({allData:allData});\r\n      AnprService.getIncidentsList(this.state.allData.filter).then(request =>\r\n      {\r\n           allData.loading = false;\r\n           allData.anprresponse= request.data;\r\n           this.setState({allData:allData});\r\n      }).catch(error=> {\r\n             allData.loading = false;\r\n             this.setState({ hasError: true });\r\n             alert(\"Something went wrong\");\r\n      });\r\n  }\r\n\r\n  handleRefresh(){\r\n    this.refresh();\r\n  }\r\n\r\n  onLprInputChange(e) {\r\n    let filter = this.state.filter;\r\n    filter.lpr = e.target.value;\r\n    this.setState({filter: filter})\r\n  }\r\n\r\n  search(searchText) {\r\n    let {filter, allData} = this.state;\r\n    filter.lpr = searchText;\r\n    allData.filter.lpr = searchText;\r\n    this.setState({filter,allData},()=>{\r\n      this.refresh();\r\n    });\r\n  }\r\n\r\n  onMasterDataPageChange(pages, pageSizes){\r\n     let filter = this.state.allData.filter;\r\n     filter.pages = pages;\r\n     filter.pageSizes = pageSizes;\r\n     this.refreshIncidentsNow(filter);\r\n  }\r\n\r\n  onMasterDataPageSizeChange(current, pageSizes) {\r\n     let filter = this.state.allData.filter;\r\n     filter.pageSizes = pageSizes;\r\n     this.refreshIncidentsNow(filter);\r\n  }\r\n\r\n  onTabChange(key) {\r\n      this.setState({activeTab: key})\r\n  }\r\n   archiveLprOnChange(lpr) {\r\n          this.setState({archiveEventsLoading : lpr});\r\n          AnprService.archiveAllEvent(lpr).then(request => {\r\n            this.setState({archiveEventsLoading : \"\"});\r\n            this.refresh(this.state.archiveLpr);\r\n            message.success('Vehicle archived!');\r\n          }).catch(error => {\r\n              this.setState({archiveEventsLoading : \"\"});\r\n              message.error('Something went wrong!');\r\n          })\r\n   }\r\n\r\n  render() {\r\n\r\n    return (\r\n          <div>\r\n            <div>\r\n\r\n            </div>\r\n\r\n                <Card\r\n                style={{width: '100%'}}\r\n                title={<Row>\r\n                  <Col xl={{span: 16}} lg={{span: 16}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n                       <h4>Master-Anpr-Data</h4>\r\n                  </Col>\r\n                  <Col xl={{span: 8}} lg={{span: 8}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n\r\n                     <Search  allowClear\r\n                       placeholder=\"Search Vehicle \"\r\n                       onChange={this.onLprInputChange}\r\n                       style={{textAlign:\"right\"}}\r\n                       onSearch={value => this.search(value)} enterButton\r\n                      />\r\n                  </Col>\r\n                </Row>}\r\n\r\n\r\n\r\n                onTabChange={key => {\r\n                    this.onTabChange(key);\r\n                }}\r\n                >\r\n                  {this.renderMasterData()}\r\n                 <IncidentTimeline\r\n                                    lpr={this.state.timelineLpr}\r\n                                    incidentType={this.state.activeTab}\r\n                                    visible={this.state.visible}\r\n                                    toggleVisible={this.toggleIncidentTimelineModal}\r\n                                    />\r\n\r\n              </Card>\r\n\r\n          </div>\r\n    );\r\n  }\r\n\r\n  renderMasterData(){\r\n\r\n\r\n   let events = this.state.allData.anprresponse.events;\r\n   let count = this.state.allData.anprresponse.totalPages * this.state.allData.anprresponse.pageSizes;\r\n\r\n   let {archiveLpr} = this.state;\r\n\r\n   const paginationOption = {\r\n       showSizeChanger: true,\r\n       showQuickJumper: true,\r\n       onShowSizeChange: this.onMasterDataPageSizeChange,\r\n       onChange: this.onMasterDataPageChange,\r\n       total: count\r\n   };\r\n\r\n   const pagination = {\r\n       ...paginationOption,\r\n       total: count,\r\n       current: this.state.allData.filter.pages,\r\n       pageSizes: this.state.allData.filter.pageSizes\r\n   };\r\n\r\n   if (this.state.allData.loading)\r\n   {\r\n      const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n      return <Spin indicator={antIcon}/>\r\n   }\r\n\r\n   if (!this.state.allData.anprresponse.events){\r\n       return <Empty description={false}/>\r\n   }\r\n\r\n   return (\r\n     <div>\r\n       <Table dataSource={events} pagination={pagination}>\r\n\r\n         <Column  title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n            render={anprText => <Button onClick={()=> this.showModal(anprText)}>{anprText}</Button>}/>\r\n\r\n         <Column title=\"Incident Count\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n             render={repeatedTimes => repeatedTimes}/>\r\n\r\n         <Column\r\n             render={(text,record,index)=><div>\r\n              <p><Button type={'danger'} loading={this.state.archiveEventsLoading === record.anprText} onClick={()=>this.archiveLprOnChange(record.anprText)}>Archive</Button></p>\r\n\r\n             </div>\r\n             }/>\r\n       </Table>\r\n     </div>\r\n\r\n   )\r\n  }\r\n\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport './App.css';\r\nimport {Layout} from 'antd';\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Headbar from \"./components/Headbar\";\r\nimport Footerbar from \"./components/Footerbar\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport HomeView from \"./views/HomeView\";\r\nimport FeedView from \"./views/FeedView\";\r\nimport {Route} from \"react-router-dom\";\r\nimport DeviceView from \"./views/DeviceView\";\r\nimport UserListView from \"./views/UserListView\";\r\nimport DeviceConfigView from \"./views/DeviceConfigView\";\r\n\r\nimport UserService from \"./services/UserService\";\r\nimport {EventBus} from \"./components/event\"\r\nimport LoginView from \"./views/LoginView\";\r\nimport IncidentListView from \"./views/IncidentListView\";\r\nimport TriggerView from \"./views/TriggerView\";\r\nimport AnprView from \"./views/AnprView\";\r\nimport TrafficIncidentView from \"./views/TrafficIncidentView\";\r\nimport IncidentRepeatedView from \"./views/incidentsRepeated/IncidentRepeatedView\";\r\nimport IncidentHotlistView from \"./views/IncidentHotlistView\";\r\nimport MasterDataView from \"./views/masterData/MasterDataView\";\r\n\r\nconst {Content} = Layout;\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loggedIn: false};\r\n\r\n        EventBus.subscribe('login-logout', (event) => this.refreshMenu(event))\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshMenu()\r\n    }\r\n\r\n    refreshMenu() {\r\n        this.setState({loggedIn: UserService.isLoggedIn()});\r\n    }\r\n\r\n    render() {\r\n\r\n        const isLoggedIn = this.state.loggedIn;\r\n\r\n        const sideBar = isLoggedIn ? <Sidebar/> : null;\r\n        const header = isLoggedIn ? <Headbar isLoggedIn={isLoggedIn}/> : null;\r\n\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <Layout style={{minHeight: '100vh'}}>\r\n                    {sideBar}\r\n                    <Layout>\r\n                        {header}\r\n                        <Content style={{margin: '24px 16px 0'}}>\r\n                            <div style={{padding: 4}} >\r\n                                <Route path='/login' exact={true} component={LoginView}/>\r\n                                <PrivateRoute path='/' exact={true} component={HomeView}/>\r\n                                <PrivateRoute path='/incidents' exact={true} component={TrafficIncidentView}/>\r\n                                <PrivateRoute path='/incidents/hotlisted' exact={true} component={IncidentHotlistView}/>\r\n                                <PrivateRoute path='/incidents/repeated' exact={true} component={IncidentRepeatedView}/>\r\n                                <PrivateRoute path='/anpr' exact={true} component={AnprView}/>\r\n                                <PrivateRoute path='/anpr/masterdata' exact={true} component={MasterDataView}/>\r\n                                <PrivateRoute path='/user' exact={true} component={UserListView}/>\r\n                                <PrivateRoute path='/feed' exact={true} component={FeedView}/>\r\n                                <PrivateRoute path='/trigger' exact={true} component={TriggerView}/>\r\n                                <PrivateRoute path='/device' exact={true} component={DeviceView}/>\r\n                                <PrivateRoute path='/device/conf' exact={true} component={DeviceConfigView}/>\r\n\r\n                            </div>\r\n                        </Content>\r\n                        <Footerbar/>\r\n                    </Layout>\r\n                </Layout>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'antd/dist/antd.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {HashRouter as Router, Switch} from 'react-router-dom';\r\n\r\nclass Root extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <Router>\r\n                    <Switch>\r\n                        <App/>\r\n                    </Switch>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<Root/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","const EventBus  = {\r\n    events : {},\r\n    publish: function (event, data) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(callback => callback(data))\r\n    },\r\n    subscribe: function (event, callback) {\r\n        if (!this.events[event]) this.events[event] = [];\r\n        this.events[event].push(callback)\r\n    }\r\n};\r\n\r\nmodule.exports = {EventBus};"],"sourceRoot":""}