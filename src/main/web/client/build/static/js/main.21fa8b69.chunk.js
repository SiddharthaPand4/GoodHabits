(window.webpackJsonpsynvisionweb=window.webpackJsonpsynvisionweb||[]).push([[0],{342:function(e,t,a){e.exports=a(663)},346:function(e,t,a){},348:function(e,t,a){},545:function(e,t,a){},663:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(10),i=a(17),l=a(16),s=a(18),o=a(0),c=a.n(o),u=a(13),h=a.n(u),d=(a(346),a(347),a(348),a(664)),m=a(233),g=a(14),p=a(34),f=a(121),v=a.n(f),E=a(160),b=a(223),y=a.n(b);var k=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"Instance",value:function(){var e=new y.a.create({baseURL:"/",timeout:5e3,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("syntoken"));return t&&(e.headers.Authorization="Bearer "+t.token),e})),y.a.interceptors.response.use(void 0,(function(e){return e.response.config.url.includes("/login")?Promise.reject(e):403===e.response.status?(console.log("I am at 403"),localStorage.clear(),void(window.location="/login")):401!==e.response.status?(console.log("I am at 401"),Promise.reject(e)):void 0})),e}}]),e}().Instance();function C(){var e=JSON.parse(localStorage.getItem("syntoken"));return e?{Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"}:{Accept:"application/json","Content-Type":"application/json"}}var O="/",S=a(61),D=Object(S.a)(),w=a(91),j=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getMenu",value:function(){return k.get("/api/user/menu")}},{key:"getUser",value:function(e){return k.get("/api/user/"+e)}},{key:"getUsers",value:function(){return k.get("/api/user/")}},{key:"getRoles",value:function(){return k.get("/api/user/roles")}},{key:"createUser",value:function(e){var t={userName:e.userName,lastName:e.lastName,firstName:e.firstName,email:e.email,id:e.id,roles:e.roles},a={method:"POST",headers:C(),data:JSON.stringify(t),url:O+"api/user/"};return e.id&&(a.method="PUT"),k(a)}},{key:"deleteUser",value:function(e){return k.delete("/api/user/"+e)}},{key:"isLoggedIn",value:function(){return JSON.parse(localStorage.getItem("syntoken"))?(console.log("located token, returning true"),!0):(console.log("cannot locate token, returning false"),!1)}},{key:"login",value:function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/login",JSON.stringify({username:t,password:a}),{headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,console.log("got this response",n),(r=n.data)&&localStorage.setItem("syntoken",JSON.stringify(r)),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem("syntoken"),D.push("/#/login"),w.EventBus.publish("login-logout",{})}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),I=d.a.Sider,x=m.a.SubMenu,T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={collapsed:!1,loaded:!1,menu:{}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.getMenu().then((function(t){e.setState({menu:t.data,loaded:!0})}))}},{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.state.menu;return c.a.createElement(I,{collapsible:!0,breakpoint:"lg",collapsedWidth:"0"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"synlabs-logo.png"})),c.a.createElement(m.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["0"]},c.a.createElement(m.a.Item,{key:"0"},c.a.createElement(p.b,{to:"/"},c.a.createElement(g.a,{type:"home"}),c.a.createElement("span",{className:"nav-text"},"Home"))),(e.items||[]).map((function(e,t){return c.a.createElement(x,{key:e.key,title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"box-plot"}),c.a.createElement("span",null,e.title))},(e.submenu||[]).map((function(e,t){return c.a.createElement(m.a.Item,{key:e.key,className:"sidebar-nav-link"},c.a.createElement(p.b,{to:e.link},c.a.createElement("span",{className:"nav-text"},e.title)))})))})),c.a.createElement(x,{key:"sub1",title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"box-plot"}),c.a.createElement("span",null,"ANPR"))},c.a.createElement(m.a.Item,{key:"1",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/anpr"},c.a.createElement("span",{className:"nav-text"},"Events"))),c.a.createElement(m.a.Item,{key:"2",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/anpr/masterdata"},c.a.createElement("span",{className:"nav-text"},"Repeated Events")))),c.a.createElement(x,{key:"sub2",title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"box-plot"}),c.a.createElement("span",null,"Offences"))},c.a.createElement(m.a.Item,{key:"3",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/incidents"},c.a.createElement("span",{className:"nav-text"},"Events"))),c.a.createElement(m.a.Item,{key:"4",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/incidents/repeated"},c.a.createElement("span",{className:"nav-text"},"Repeated Events")))),c.a.createElement(m.a.Item,{key:"5",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/incidents/hotlisted"},c.a.createElement(g.a,{type:"alert"}),c.a.createElement("span",{className:"nav-text"},"Hotlist"))),c.a.createElement(x,{key:"pgs",title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"car"}),c.a.createElement("span",null,"Parking"))},c.a.createElement(m.a.Item,{key:"pgs-1",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/pgs/dashboard"},c.a.createElement("span",{className:"nav-text"},"Dashboard"))),c.a.createElement(m.a.Item,{key:"pgs-2",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/pgs/console"},c.a.createElement("span",{className:"nav-text"},"Operator Console"))),c.a.createElement(m.a.Item,{key:"pgs-3",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/pgs/inout"},c.a.createElement("span",{className:"nav-text"},"Check-In/Out"))),c.a.createElement(m.a.Item,{key:"pgs-4",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/pgs/reports"},c.a.createElement("span",{className:"nav-text"},"Reports")))),c.a.createElement(m.a.Item,{key:"6"},c.a.createElement(p.b,{to:"/feed"},c.a.createElement(g.a,{type:"video-camera"}),c.a.createElement("span",{className:"nav-text"},"Feed"))),c.a.createElement(x,{key:"admin",title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"deployment-unit"}),"Admin")},c.a.createElement(m.a.Item,{key:"51"},c.a.createElement(p.b,{to:"/user"},c.a.createElement(g.a,{type:"user"}),c.a.createElement("span",{className:"nav-text"},"Users"))),c.a.createElement(m.a.Item,{key:"52"},c.a.createElement(p.b,{to:"/device"},c.a.createElement(g.a,{type:"laptop"}),c.a.createElement("span",{className:"nav-text"},"Device"))),c.a.createElement(m.a.Item,{key:"53"},c.a.createElement(p.b,{to:"/trigger"},c.a.createElement(g.a,{type:"clock-circle"}),c.a.createElement("span",{className:"nav-text"},"Triggers")))),c.a.createElement(x,{key:"sub3",title:c.a.createElement("span",null,c.a.createElement(g.a,{type:"box-plot"}),c.a.createElement("span",null,"People Counting"))},c.a.createElement(m.a.Item,{key:"9",className:"sidebar-nav-link"},c.a.createElement(p.b,{to:"/people-counting/events"},c.a.createElement("span",{className:"nav-text"},"Events"))),c.a.createElement(m.a.Item,{key:"8",className:"sidebar-nav-link"}," ",c.a.createElement(p.b,{to:"/people-counting/dashboard"},c.a.createElement("span",{className:"nav-text"},"Dashboard")))),c.a.createElement(m.a.Item,{key:"7"},c.a.createElement(p.b,{to:"/",onClick:function(){return j.logout()}},c.a.createElement(g.a,{type:"logout"}),c.a.createElement("span",{className:"nav-text"},"Logout")))))}}]),t}(o.Component),R=d.a.Header,P=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(R,{style:{background:"#fff",padding:10}},"\xa0")}}]),t}(o.Component),L=d.a.Footer,z=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(L,{style:{textAlign:"center"}},"Powered by SynergyLabs \xa9 2019")}}]),t}(o.Component),M=a(322),A=a(82),N=function(e){var t=e.component,a=Object(M.a)(e,["component"]);return c.a.createElement(A.b,Object.assign({},a,{render:function(e){return j.isLoggedIn()?c.a.createElement(t,e):c.a.createElement(A.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=a(51),H=a(3),V=a(667),Y=a(673),B=a(677),X=a(173),U=a(68),_=a(6),Z=a.n(_),W=function(){function e(){Object(n.a)(this,e),this.colors=["#e83e8c","#dc3545","#007bff","#6610f2","#fd7e14","#ffc107","#28a745","#20c997","#17a2b8","#6c757d","#343a40","#6f42c1"]}return Object(r.a)(e,[{key:"getTotalNoOfVehiclesBetweenTwoDates",value:function(e){return k.post("/api/dashboard/vehiclescount/datefilter",e)}},{key:"getTotalNoOfVehiclesBySelectedDate",value:function(e){return k.post("/api/dashboard/vehiclescount/date",e)}},{key:"getTotalNoOfVehiclesForLastMonths",value:function(e){return k.post("/api/dashboard/vehiclescount/month",e)}},{key:"getAtccVehicleCount",value:function(e,t,a){var n={fromDateString:Z()(e).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t).format('YYYY-MM-DD HH:mm:ss"'),xAxis:a};return k.post("/api/dashboard/atcc/vehicle/count",n)}},{key:"getIncidentVehicleCount",value:function(e,t,a){var n={fromDateString:Z()(e).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t).format("YYYY-MM-DD HH:mm:ss"),xAxis:a};return k.post("/api/dashboard/incident/vehicle/count",n)}},{key:"getParkingVehicleCount",value:function(e,t,a){var n={fromDateString:Z()(e).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t).format("YYYY-MM-DD HH:mm:ss"),xAxis:a};return k.post("/api/apms/guidance/parking/vehicle/count",n)}},{key:"getColors",value:function(){return this.colors}},{key:"getColor",value:function(e){var t=this.colors[e];return t||this.getRandomColor()}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"extractFromToDate",value:function(e,t){var a,n,r;switch(e){case"Today":n=(a=Z()()).startOf("day").toDate(),r=a.endOf("day").toDate();break;case"Yesterday":n=(a=Z()().subtract(1,"days")).startOf("day").toDate(),r=a.endOf("day").toDate();break;case"This week":n=(a=Z()()).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"This month":n=(a=Z()()).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"This quarter":n=(a=Z()()).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"This year":n=(a=Z()()).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Last week":n=(a=Z()().subtract(1,"weeks")).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"Last month":n=(a=Z()().subtract(1,"months")).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"Last quarter":n=(a=Z()().subtract(1,"quarters")).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"Last year":n=(a=Z()().subtract(1,"years")).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Second Last week":n=(a=Z()().subtract(2,"weeks")).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"Second Last month":n=(a=Z()().subtract(2,"months")).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"Second Last quarter":n=(a=Z()().subtract(2,"quarters")).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"Second Last year":n=(a=Z()().subtract(2,"years")).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Custom":default:n=t[0].toDate(),r=t[1].toDate()}return{from_date:n,to_date:r}}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),q=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"ifExist",value:function(e,t,a){for(var n=0;n<e.length;n+=1)if(e[n][t]===a)return!0;return!1}},{key:"findIndex",value:function(e,t,a){if(!e)return-1;for(var n=0;n<e.length;n+=1)if(e[n][t]===a)return n;return-1}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),J=a(54),Q=V.a.RangePicker,G=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleCancel=function(){a.setState({isOpencustomDateRangeModal:""})},a.state={isOpencustomDateRangeModal:"",atcc:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"Hourly",fromDate:{},toDate:{}},chartData:{labels:[],datasets:[]}},incident:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"Hourly",fromDate:{},toDate:{}},chartData:{labels:[],datasets:[]}}},a.getIncidentVehicleCount=a.getIncidentVehicleCount.bind(Object(H.a)(a)),a.getAtccVehicleCount=a.getAtccVehicleCount.bind(Object(H.a)(a)),a.getBarChartOptions=a.getBarChartOptions.bind(Object(H.a)(a)),a.selectDateRange=a.selectDateRange.bind(Object(H.a)(a)),a.selectXAxisOption=a.selectXAxisOption.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a.getDateRangeOptions=a.getDateRangeOptions.bind(Object(H.a)(a)),a.getXAxisOptions=a.getXAxisOptions.bind(Object(H.a)(a)),a.handleDateRangeChange=a.handleDateRangeChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"showCustomDateRangeModal",value:function(e){this.setState({isOpencustomDateRangeModal:e})}},{key:"selectDateRange",value:function(e,t,a){var n,r=this,i=this.state.isOpencustomDateRangeModal,l=this.state[e];l.filter.selectedCustomDateRange=t;var s=W.extractFromToDate(l.filter.selectedCustomDateRange,a);l.filter.fromDate=s.from_date,l.filter.toDate=s.to_date,"Custom"===t&&(i=""),this.setState((n={},Object(F.a)(n,e,l),Object(F.a)(n,"isOpencustomDateRangeModal",i),n),(function(){r.refresh()}))}},{key:"selectXAxisOption",value:function(e,t){var a=this,n=this.state[e];n.filter.selectedXAxisOption=t,this.setState(Object(F.a)({},e,n),(function(){a.refresh()}))}},{key:"refresh",value:function(){this.getAtccVehicleCount(this.state.atcc.filter.fromDate,this.state.atcc.filter.toDate,this.state.atcc.filter.selectedXAxisOption),this.getIncidentVehicleCount(this.state.incident.filter.fromDate,this.state.incident.filter.toDate,this.state.incident.filter.selectedXAxisOption)}},{key:"getAtccVehicleCount",value:function(e,t,a){var n=this,r=this.state.atcc;r.chartData={labels:[],datasets:[]},W.getAtccVehicleCount(e,t,a).then((function(e){var t=e.data;if(t&&t.length>0){var a=[],i=[];for(var l in t)a.includes(t[l].date)||a.push(t[l].date),i[t[l].vehicleType]||(i[t[l].vehicleType]={}),i[t[l].vehicleType][t[l].date]||(i[t[l].vehicleType][t[l].date]=t[l]);r.chartData.labels=a;var s=0;for(var o in i){var c={label:o,data:[],backgroundColor:W.getColor(s)};for(var u in a)i[o][a[u]]?c.data.push(i[o][a[u]].vehicleCount):c.data.push(0);r.chartData.datasets.push(c),s++}}n.setState({atcc:r})})).catch((function(e){console.log(e)}))}},{key:"getIncidentVehicleCount",value:function(e,t,a){var n=this,r=this.state.incident;r.chartData={labels:[],datasets:[]},W.getIncidentVehicleCount(e,t,a).then((function(e){var t=e.data.helmetMissingIncidents,i=e.data.reverseDirectionIncidents,l=[];for(var s in i)"Hourly"===a&&(i[s].date=parseInt(i[s].date)),l.includes(i[s].date)||l.push(i[s].date);for(var o in t)"Hourly"===a&&(t[o].date=parseInt(t[o].date)),l.includes(t[o].date)||l.push(t[o].date);"Hourly"===a&&l.sort((function(e,t){return e-t})),"Daily"===a&&l.sort((function(e,t){return new Z.a(e).format("YYYY-MM-DD")-new Z.a(t).format("YYYY-MM-DD")}));var c={label:"Without Helmet",data:[],backgroundColor:W.getColor(0)},u={label:"Reverse Direction",data:[],backgroundColor:W.getColor(2)},h=0,d=-1;for(var m in l)h=0,(d=q.findIndex(t,"date",l[m]))>-1&&(h=t[d].vehicleCount),c.data.push(h),h=0,(d=q.findIndex(i,"date",l[m]))>-1&&(h=i[d].vehicleCount),u.data.push(h);r.chartData.labels=l,r.chartData.datasets.push(c),r.chartData.datasets.push(u),n.setState({incident:r})})).catch((function(e){n.setState({incident:r}),console.log(e)}))}},{key:"handleDateRangeChange",value:function(){var e=this;this.setState((function(){e.refresh()}))}},{key:"getXAxisOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectXAxisOption(e,"Hourly")}},"Hourly"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectXAxisOption(e,"Daily")}},"Daily"))}},{key:"getDateRangeOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectDateRange(e,"Today")}},"Today"),c.a.createElement(m.a.Item,{key:"2",onClick:function(){return t.selectDateRange(e,"Yesterday")}},"Yesterday"),c.a.createElement(m.a.Item,{key:"3",onClick:function(){return t.selectDateRange(e,"This week")}},"This week"),c.a.createElement(m.a.Item,{key:"4",onClick:function(){return t.selectDateRange(e,"Last week")}},"Last week"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectDateRange(e,"This month")}},"This month"),c.a.createElement(m.a.Item,{key:"6",onClick:function(){return t.selectDateRange(e,"This year")}},"This year"),c.a.createElement(m.a.Item,{key:"7",onClick:function(){return t.selectDateRange(e,"Last year")}},"Last year"),c.a.createElement(m.a.Item,{onClick:function(){return t.showCustomDateRangeModal(e)}},"Custom"))}},{key:"getBarChartOptions",value:function(e){var t="Day";"Hourly"===this.state[e].filter.selectedXAxisOption&&(t="Hours(24-hour)");var a="Vehicles";return"incident"===e&&(a="Challans"),{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{position:"right"},scales:{xAxes:[{stacked:!0,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:t}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:a}}]}}}},{key:"render",value:function(){var e=this,t=this.state,a=t.atcc,n=t.incident,r=this.getBarChartOptions("atcc"),i=this.getBarChartOptions("incident");return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(Y.a,{onCancel:this.handleCancel,title:"Custom Date Range",visible:!!this.state.isOpencustomDateRangeModal,footer:[]},c.a.createElement(Q,{onChange:function(t){return e.selectDateRange(e.state.isOpencustomDateRangeModal,"Custom",t)}}))),c.a.createElement("div",null,c.a.createElement(B.a,{title:c.a.createElement("div",null,"ATCC \xa0",c.a.createElement(X.a,{overlay:function(){return e.getDateRangeOptions("atcc")}},c.a.createElement(U.a,null,a.filter.selectedCustomDateRange?a.filter.selectedCustomDateRange:"Select",c.a.createElement(g.a,{type:"down"}))),"\xa0",c.a.createElement(X.a,{overlay:function(){return e.getXAxisOptions("atcc")}},c.a.createElement(U.a,null,a.filter.selectedXAxisOption?a.filter.selectedXAxisOption:"Select"," ",c.a.createElement(g.a,{type:"down"}))))},c.a.createElement(J.c,{data:a.chartData,options:r})),c.a.createElement("br",null),c.a.createElement(B.a,{title:c.a.createElement("div",null,"Incidents \xa0",c.a.createElement(X.a,{overlay:function(){return e.getDateRangeOptions("incident")}},c.a.createElement(U.a,null,n.filter.selectedCustomDateRange?n.filter.selectedCustomDateRange:"Select",c.a.createElement(g.a,{type:"down"}))),"\xa0",c.a.createElement(X.a,{overlay:function(){return e.getXAxisOptions("incident")}},c.a.createElement(U.a,null,n.filter.selectedXAxisOption?n.filter.selectedXAxisOption:"Select",c.a.createElement(g.a,{type:"down"}))))},c.a.createElement(J.c,{data:n.chartData,options:i}))))}}]),t}(o.Component),K=a(670),$=a(669),ee=a(124),te=a(74),ae=a(338),ne=a(674),re=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getFeeds",value:function(){return k.get("/api/feeds")}},{key:"getFeed",value:function(e){return k.get("/api/feed/"+e.ID)}},{key:"addFeed",value:function(e){return k.post("/api/feed/",e)}},{key:"removeFeed",value:function(e){return k.delete("/api/feed/"+e.ID)}},{key:"startFeed",value:function(e){return k.get("/api/feed/"+e.ID+"/start")}},{key:"stopFeed",value:function(e){return k.get("/api/feed/"+e.ID+"/stop")}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),ie=K.a.Text,le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,videoVisible:!1,feeds:{}},w.EventBus.subscribe("feed-refresh",(function(e){return a.refresh()})),a.removeFeed=a.removeFeed.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;re.getFeeds().then((function(t){e.setState({feeds:t.data,loading:!1})}))}},{key:"removeFeed",value:function(e){var t=this;re.removeFeed(e).then((function(){t.refresh()}))}},{key:"startFeed",value:function(e){var t=this;re.startFeed(e).then((function(){t.setState({refresh_state:Math.random()})}))}},{key:"stopFeed",value:function(e){var t=this;re.stopFeed(e).then((function(){t.setState({refresh_state:Math.random()})}))}},{key:"render",value:function(){var e=this,t=this.state.feeds;!this.state.loading&&this.state.feeds&&0!==this.state.feeds.length||(t=[]);var a=$.a.create({name:"feed_form"})(se);return c.a.createElement(ee.a,{gutter:16},t.map((function(t,a){return c.a.createElement(te.a,{span:8,key:a},c.a.createElement(B.a,{title:c.a.createElement(ae.a,{color:"#f50"},t.site,"/",t.location,"/",t.name),cover:c.a.createElement("img",{alt:"feedview",src:"/api/feed/"+t.ID+"/view"}),bordered:!0,actions:[c.a.createElement(U.a,{onClick:function(){e.startFeed(t)}},"Start"),c.a.createElement(U.a,{onClick:function(){e.stopFeed(t)}},"Stop"),c.a.createElement(U.a,{onClick:function(){e.removeFeed(t)}},"Delete")]}))})),c.a.createElement(te.a,{span:8,key:-1},c.a.createElement(B.a,{bordered:!0},c.a.createElement(a,null))))}}]),t}(o.Component);var se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={username:"",password:"",submitted:!1,loading:!1,loginError:""},a.handleSubmit=a.handleSubmit.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t,a=this.props.form,n={};n.url=a.getFieldValue("url"),n.site=a.getFieldValue("site"),n.location=a.getFieldValue("location"),n.name=a.getFieldValue("name"),n.url||(t="Missing url"),n.site||(t="Missing site"),n.location||(t="Missing location"),n.name||(t="Missing name"),t?this.setState({validationError:t}):(console.log("saving feed",n),this.setState({submitted:!0,loading:!0}),re.addFeed(n).then((function(e){w.EventBus.publish("feed-refresh",{})})))}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,r=this.state.validationError;return c.a.createElement($.a,{onSubmit:this.handleSubmit},c.a.createElement($.a.Item,null,a("url",{rules:[{required:!0,message:"enter feed url!"}]})(c.a.createElement(ne.a,{addonBefore:"Feed\xa0\xa0\xa0\xa0\xa0\xa0\xa0",placeholder:"rtsp://"}))),c.a.createElement($.a.Item,null,a("site",{rules:[{required:!0,message:"enter site!"}]})(c.a.createElement(ne.a,{addonBefore:"Site\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",placeholder:"Site (e.g. gurgaon)"}))),c.a.createElement($.a.Item,null,a("location",{rules:[{required:!0,message:"enter location!"}]})(c.a.createElement(ne.a,{addonBefore:"Location",placeholder:"Location (e.g. 9th floor)"}))),c.a.createElement($.a.Item,null,a("name",{rules:[{required:!0,message:"enter name!"}]})(c.a.createElement(ne.a,{addonBefore:"Name\xa0\xa0\xa0\xa0",placeholder:"Name (e.g. front gate )"}))),c.a.createElement(U.a,{htmlType:"submit",type:"primary",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},"Add"),r&&c.a.createElement(ie,{type:"danger"},r))}}]),t}(o.Component),oe=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getDevice",value:function(){return k.get("/api/device")}},{key:"getDeviceConfig",value:function(){return k.get("/api/device/config")}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),ce=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,device:{}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;oe.getDevice().then((function(t){e.setState({device:t.data,loading:!1})}),(function(e){console.log("error")}))}},{key:"render",value:function(){var e=this.state.loading,t=this.state.device;return e?c.a.createElement("div",null,"Loading.."):c.a.createElement("div",null,c.a.createElement(B.a,{title:"Device details",style:{width:300},extra:c.a.createElement(p.b,{to:"/device/conf"},c.a.createElement(g.a,{type:"setting"}))},c.a.createElement("p",null,"ID: ",t.fingerprint),c.a.createElement("p",null,"Name: ",t.name),c.a.createElement("p",null,"Model: ",t.model),c.a.createElement("p",null,"License: ",t.license),c.a.createElement("p",null,"Status: ",t.status),c.a.createElement("p",null,"RegisteredTo: ",t.registeredTo)))}}]),t}(o.Component),ue=a(668),he=a(675),de=a(665),me=a(142),ge=(a(545),ue.a.Column),pe=K.a.Text,fe=Y.a.confirm,ve=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.state={loading:!0,users:[],showUserDetails:!1,mode:"Add",user:{userName:"",lastName:"",firstName:"",email:"",password:"",roles:[],id:""},roles:[],visible:!1},a.addUser=a.addUser.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a.refreshUsers=a.refreshUsers.bind(Object(H.a)(a)),a.close=a.close.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;j.getUsers().then((function(t){e.setState({users:t.data,loading:!1,showUserDetails:!1})}),(function(e){he.a.error(e.response.data.message)})),j.getRoles().then((function(t){e.setState({roles:t.data})}),(function(e){he.a.error(e.response.data.message)}))}},{key:"refreshUsers",value:function(){this.refresh()}},{key:"addUser",value:function(){this.setState({mode:"Add",showUserDetails:!0,user:{userName:"",lastName:"",firstName:"",email:"",password:""}})}},{key:"showUser",value:function(e){var t=this;this.setState({showUserDetails:!0,mode:"Edit"}),j.getUser(e).then((function(e){t.setState({user:e.data})}),(function(e){he.a.error(e.response.data.message)}))}},{key:"close",value:function(){this.setState({showUserDetails:!1})}},{key:"showDeleteConfirm",value:function(e,t){fe({title:"Are you sure you want to make user inactive?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){console.log("OK"),j.deleteUser(e).then((function(e){he.a.success("User Deactivated!"),t()}),(function(e){he.a.error(e.response.data.message)}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=$.a.create({name:"user_form"})(Ee),a=this.state.showUserDetails;return c.a.createElement("div",null,c.a.createElement(ee.a,{gutter:2},c.a.createElement(te.a,{span:2},c.a.createElement(U.a,{type:"primary",onClick:this.addUser},"+ ADD"))),c.a.createElement("br",null),c.a.createElement(ee.a,{gutter:24},c.a.createElement(te.a,{span:12},c.a.createElement(B.a,{className:"limitable",bodyStyle:{padding:"0px",width:"100%"}},c.a.createElement(ue.a,{dataSource:this.state.users,pagination:!1,scroll:{x:!0}},c.a.createElement(ge,{title:"Username",dataIndex:"userName",key:"userName",render:function(e,t){return c.a.createElement("span",null,c.a.createElement("a",{href:"user/"+t.ID},e))}}),c.a.createElement(ge,{title:"Email",dataIndex:"email",key:"email"}),c.a.createElement(ge,{title:"Token",dataIndex:"token",key:"token"}),c.a.createElement(ge,{title:"Action",key:"action",render:function(t,a){return c.a.createElement("span",null,c.a.createElement("a",{onClick:e.showUser.bind(e,a.id)},"Edit"),c.a.createElement(de.a,{type:"vertical"}),c.a.createElement("a",{onClick:e.showDeleteConfirm.bind(e,a.id,e.refresh)},"Delete"))}})))),a?c.a.createElement(te.a,{span:12},c.a.createElement(t,{user:this.state.user,roles:this.state.roles,refresh:this.refreshUsers,close:this.close,mode:this.state.mode})):null))}}]),t}(o.Component),Ee=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={user:{},loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(H.a)(a)),a.close=a.close.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"close",value:function(){this.props.close()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n=this.props.form,r={};r.firstName=n.getFieldValue("firstname"),r.userName=n.getFieldValue("username"),r.lastName=n.getFieldValue("lastname"),r.email=n.getFieldValue("email"),r.password=n.getFieldValue("password"),r.roles=n.getFieldValue("role"),r.id=this.props.user.id,r.firstName||(a="Missing firstname"),r.userName||(a="Missing username"),r.lastName||(a="Missing lastname"),r.email||(a="Missing email"),0===r.roles.length&&(a="Missing role"),a?this.setState({validationError:a}):(this.setState({loading:!0}),console.log("saving user",r),j.createUser(r).then((function(e){r.id?he.a.success("User updated"):he.a.success("User created"),t.setState({loading:!1}),t.props.refresh()})).catch((function(e){console.log(e),t.setState({loading:!1})})))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.validationError;return c.a.createElement(B.a,{title:"Add"===this.props.mode?"Add User":"Edit User"},c.a.createElement($.a,{onSubmit:this.handleSubmit,className:"user-form"},c.a.createElement($.a.Item,{label:"Username",className:"formitem"},e("username",{initialValue:this.props.user.userName,rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(ne.a,{type:"text",placeholder:"Username"}))),c.a.createElement($.a.Item,{label:"Firstname",className:"formitem"},e("firstname",{initialValue:this.props.user.firstName,rules:[{required:!0,message:"Please input your Firstname!"}]})(c.a.createElement(ne.a,{type:"text",placeholder:"Firstname"}))),c.a.createElement($.a.Item,{label:"Lastname",className:"formitem"},e("lastname",{initialValue:this.props.user.lastName,rules:[{required:!0,message:"Please input your lastname!"}]})(c.a.createElement(ne.a,{type:"text",placeholder:"Lastname"}))),c.a.createElement($.a.Item,{label:"Email",className:"formitem"},e("email",{initialValue:this.props.user.email,rules:[{required:!0,message:"Please input your email!"}]})(c.a.createElement(ne.a,{type:"email",placeholder:"email"}))),c.a.createElement($.a.Item,{label:"Role",className:"formitem"},e("role",{initialValue:this.props.user.roles,rules:[{required:!0,message:"Please select role!"}]})(c.a.createElement(me.a,{mode:"multiple",placeholder:"Select a role"},this.props.roles.map((function(e){return c.a.createElement("option",{key:e.id,value:e.name},e.name)}))))),c.a.createElement("br",null),c.a.createElement("div",null,c.a.createElement(U.a,{type:"primary",htmlType:"submit",className:"user-form-button",size:"small",loading:this.state.loading},"Save"),c.a.createElement("span",null,"\xa0\xa0"),c.a.createElement(U.a,{type:"secondary",className:"user-form-button",size:"small",onClick:this.close},"Close")),t&&c.a.createElement(pe,{type:"danger"},t)))}}]),t}(o.Component),be=a(232),ye=be.a.TabPane,ke=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,deviceconfig:{}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;oe.getDeviceConfig().then((function(t){e.setState({deviceconfig:t.data,loading:!1})}))}},{key:"onTabChange",value:function(e){console.log("tab changed",e)}},{key:"render",value:function(){return c.a.createElement(be.a,{defaultActiveKey:"1",onChange:this.onTabChange},c.a.createElement(ye,{tab:"Feed",key:"common"},"Feed details"),c.a.createElement(ye,{tab:"Basic Intrusion",key:"bi"},"Basic Intrusion"),c.a.createElement(ye,{tab:"Advanced Intrusion",key:"ai"},"Advanced Intrusion"))}}]),t}(o.Component),Ce=K.a.Text,Oe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){j.isLoggedIn()&&D.push("/#/")}},{key:"render",value:function(){var e=$.a.create({name:"login_form"})(Se);return c.a.createElement(e,null)}}]),t}(o.Component),Se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={username:"",password:"",submitted:!1,loading:!1,loginError:""},a.handleSubmit=a.handleSubmit.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.form,n=a.getFieldValue("username"),r=a.getFieldValue("password");if(this.setState({submitted:!0}),n&&r){this.setState({loading:!0});j.login(n,r).then((function(e){var t=(D.state||{from:{pathname:"/"}}).from;D.push(t),window.location.reload()})).catch((function(e){t.setState({loginError:"Something went wrong, please try again",loading:!1})}))}}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.loginError;return c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:8},lg:{span:6},md:{span:4},sm:{span:2},xs:{span:2}}),c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement(B.a,{title:c.a.createElement("img",{style:{},src:"synlabs-logo.png"}),style:{top:50}},c.a.createElement($.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement($.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(ne.a,{prefix:c.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),c.a.createElement($.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(c.a.createElement(ne.a,{prefix:c.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),c.a.createElement($.a.Item,null,c.a.createElement(U.a,{type:"primary",htmlType:"submit",block:!0,className:"login-form-button"},"Log in"))),t&&c.a.createElement(Ce,{type:"danger"},t))))}}]),t}(o.Component),De=Object(A.g)(Oe),we=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getTrigger",value:function(){return k.get("/api/trigger/")}},{key:"getTriggers",value:function(){return k.get("/api/triggers")}},{key:"createTrigger",value:function(e){return k.post("/api/trigger/",e)}},{key:"saveTrigger",value:function(e){return k.put("/api/trigger/"+e.ID,e)}},{key:"deleteTrigger",value:function(e){return k.delete("/api/trigger/"+e.ID)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),je=a(671),Ie=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a.onChange0=a.onChange0.bind(Object(H.a)(a)),a.onChange1=a.onChange1.bind(Object(H.a)(a)),a.onChange2=a.onChange2.bind(Object(H.a)(a)),a.onChange3=a.onChange3.bind(Object(H.a)(a)),a.onChange4=a.onChange4.bind(Object(H.a)(a)),a.onChange5=a.onChange5.bind(Object(H.a)(a)),a.onChange6=a.onChange6.bind(Object(H.a)(a)),a.onChangeValue=a.onChangeValue.bind(Object(H.a)(a)),a.saveTrigger=a.saveTrigger.bind(Object(H.a)(a)),a.deleteTrigger=a.deleteTrigger.bind(Object(H.a)(a)),a.setName=a.setName.bind(Object(H.a)(a)),a.state={trigger:a.props.trigger,changed:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"onChange0",value:function(e){this.onChangeValue(0,e)}},{key:"onChange1",value:function(e){this.onChangeValue(1,e)}},{key:"onChange2",value:function(e){this.onChangeValue(2,e)}},{key:"onChange3",value:function(e){this.onChangeValue(3,e)}},{key:"onChange4",value:function(e){this.onChangeValue(4,e)}},{key:"onChange5",value:function(e){this.onChangeValue(5,e)}},{key:"onChange6",value:function(e){this.onChangeValue(6,e)}},{key:"onChangeValue",value:function(e,t){var a=this.state.trigger;a.TriggerDays[e].Start=t[0],a.TriggerDays[e].End=t[1],this.setState({trigger:a,changed:!0})}},{key:"saveTrigger",value:function(){this.state.trigger.new?we.createTrigger(this.state.trigger):we.saveTrigger(this.state.trigger)}},{key:"NewTrigger",value:function(){for(var e={name:"New",TriggerDays:[],new:!0},t=0;t<7;t++)e.TriggerDays.push({Start:0,End:24,Day:t});this.setState({trigger:e,changed:!0})}},{key:"setName",value:function(e,t){var a=this.state.trigger;a.name=e.target.value,this.setState({trigger:a,changed:!0})}},{key:"deleteTrigger",value:function(){we.deleteTrigger(this.state.trigger)}},{key:"ChangeTrigger",value:function(e){this.setState({trigger:e,changed:!1})}},{key:"render",value:function(){var e=this.state.trigger,t=this.state.changed;if(!e)return c.a.createElement("div",null,"Waiting..");for(var a={},n=12;n<=24;n++){a[n-12]=n+":00"}for(var r=0;r<=12;r++){a[r+12]=(r<10?"0":"")+r+":00"}e.TriggerDays.map((function(e,t){var a=e.Start,n=e.End;a>n&&(e.Start=a-12,e.End=n+12)}));var i=e.TriggerDays;return c.a.createElement("div",null,e.new?c.a.createElement(ne.a,{placeholder:"Name",onChange:this.setName}):c.a.createElement("span",null,e.ID," - ",e.name),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[0].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[0].Start,i[0].End],onChange:this.onChange0})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[1].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[1].Start,i[1].End],onChange:this.onChange1})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[2].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[2].Start,i[2].End],onChange:this.onChange2})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[3].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[3].Start,i[3].End],onChange:this.onChange3})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[4].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[4].Start,i[4].End],onChange:this.onChange4})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[5].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[5].Start,i[5].End],onChange:this.onChange5})),c.a.createElement("div",null,c.a.createElement("span",null,this.days[i[6].Day]),c.a.createElement(je.a,{min:0,max:24,range:!0,marks:a,value:[i[6].Start,i[6].End],onChange:this.onChange6})),c.a.createElement(U.a,{type:"primary",disabled:!t,onClick:this.saveTrigger},"Save"),c.a.createElement(U.a,{type:"link",disabled:t,onClick:this.deleteTrigger},"Delete"))}}]),t}(o.Component),xe=me.a.Option,Te=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,triggers:[]},a.tsRef=c.a.createRef(),a.handleChange=a.handleChange.bind(Object(H.a)(a)),a.newTrigger=a.newTrigger.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;we.getTriggers().then((function(t){e.setState({triggers:t.data,selected:t.data[0].ID,selectedt:t.data[0],loading:!1})}))}},{key:"newTrigger",value:function(){this.tsRef.current.NewTrigger()}},{key:"handleChange",value:function(e){console.log("changing to ...",e);for(var t=0;t<this.state.triggers.length;t++)if(console.log("checking:",this.state.triggers[t].ID),e==this.state.triggers[t].ID)return console.log("selected:",e),this.tsRef.current.ChangeTrigger(this.state.triggers[t]),void this.setState({selected:e,selectedt:this.state.triggers[t]});console.log("cant select:(")}},{key:"render",value:function(){var e=this.state.selected,t=this.state.selectedt,a=this.state.triggers;this.state.loading&&(a=[]);var n="";t&&(n=t.Name),console.log("SN",n,e,t);var r=c.a.createElement("div",null,c.a.createElement(me.a,{style:{width:120},onChange:this.handleChange},a.map((function(e,t){return c.a.createElement(xe,{key:e.ID},e.name)}))),"\xa0",c.a.createElement(U.a,{type:"primary",onClick:this.newTrigger},"New"));return t?c.a.createElement("div",null,r,c.a.createElement(Ie,{trigger:t,ref:this.tsRef})):r}}]),t}(o.Component),Re=a(35),Pe=a(672),Le=a(125),ze=a(336),Me=a(337),Ae=U.a.Group,Ne=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,layout:"list",filter:{page:1,pageSize:10}},a.onFromDateChange=a.onFromDateChange.bind(Object(H.a)(a)),a.onFromTimeChange=a.onFromTimeChange.bind(Object(H.a)(a)),a.onToDateChange=a.onToDateChange.bind(Object(H.a)(a)),a.onToTimeChange=a.onToTimeChange.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"refresh",value:function(){this.props.handleRefresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"changeLayout",value:function(e){this.setState({layout:e}),this.props.handleLayoutChange(e)}},{key:"onFromDateChange",value:function(e){var t=this.state.filter;t.fromDate=null!=e?e.format("YYYY-MM-DD"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onFromTimeChange",value:function(e){var t=this.state.filter;t.fromTime=null!=e?e.format("HH:mm:ss"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onToDateChange",value:function(e){var t=this.state.filter;t.toDate=null!=e?e.format("YYYY-MM-DD"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onToTimeChange",value:function(e){var t=this.state.filter;t.toTime=null!=e?e.format("HH:mm:ss"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"render",value:function(){var e=this,t=this.state.layout;return c.a.createElement("div",null,c.a.createElement("span",null,"From: "),c.a.createElement(V.a,{onChange:this.onFromDateChange}),"\xa0\xa0",c.a.createElement(Me.a,{minuteStep:15,secondStep:60,onChange:this.onFromTimeChange}),"\xa0\xa0",c.a.createElement("span",null,"To: "),c.a.createElement(V.a,{onChange:this.onToDateChange}),"\xa0\xa0",c.a.createElement(Me.a,{minuteStep:15,secondStep:60,onChange:this.onToTimeChange}),"\xa0\xa0",c.a.createElement(Ae,null,c.a.createElement(U.a,{type:"list"===t?"primary":"",size:"small",icon:"table",onClick:function(){e.changeLayout("list")}}),c.a.createElement(U.a,{type:"table"===t?"primary":"",size:"small",icon:"unordered-list",onClick:function(){e.changeLayout("table")}})),"\xa0\xa0",c.a.createElement(U.a,{onClick:function(){e.refresh()}},c.a.createElement(g.a,{type:"reload"}),"Reload"))}}]),t}(o.Component),Fe=a(30),He=a.n(Fe),Ve=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getEvents",value:function(e){return k.post("/api/anpr/events",e)}},{key:"getIncidents",value:function(e){return k.post("/api/anpr/incidents",e)}},{key:"getIncidentsHotlisted",value:function(e){return k.post("/api/anpr/incidents/hotListed",e)}},{key:"archiveEvent",value:function(e){return k.delete("/api/anpr/"+e.id)}},{key:"archiveAllEvent",value:function(e){return k.put("/api/anpr/events/archive/"+e)}},{key:"updateEvent",value:function(e){return k.put("/api/anpr/event",e)}},{key:"getEventFile",value:function(e){return k.get("/public/anpr/anprText/"+e+"/image.jpg")}},{key:"getHelmetMissingIncidentsRepeated",value:function(e){return k.post("/api/incident/repeated/helmet-missing",e)}},{key:"getReverseDirectionIncidentsRepeated",value:function(e){return k.post("/api/incident/repeated/reverse",e)}},{key:"getBriefIncidentsRepeated",value:function(e){return k.post("/api/incident/timeline",e)}},{key:"getIncidentTimeline",value:function(e){return k.post("/api/anpr/events/list/bylpr",e)}},{key:"getIncidentsList",value:function(e){return k.post("/api/anpr/events/list/lpr/count",e)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),Ye=a(118),Be=a(141),Xe=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAnprEventsReport",value:function(e){var t={method:"POST",headers:C(),responseType:"blob",data:JSON.stringify(e),url:O+"api/anpr/anprevent"};return k(t)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),Ue=K.a.Paragraph,_e=K.a.Text,Ze=ue.a.Column,We=Pe.a.Panel,qe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleOnClick=function(e){console.log(e),a.setState({visible:!1})},a.state={visible:!0,loading:!0,layout:"list",events:{},filter:{page:1,pageSize:12},workingEvent:{},workingEventLoading:!1,magnifyEvent:{magnifyEventId:"",zoomFactor:2,minZoomFactor:1,maxZoomFactor:5},downloading:!1},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(H.a)(a)),a.handleLayoutChange=a.handleLayoutChange.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.editEvent=a.editEvent.bind(Object(H.a)(a)),a.updateEvent=a.updateEvent.bind(Object(H.a)(a)),a.magnifyEvent=a.magnifyEvent.bind(Object(H.a)(a)),a.updateZoomFactor=a.updateZoomFactor.bind(Object(H.a)(a)),a.downloadAnprReport=a.downloadAnprReport.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;Ve.getEvents(this.state.filter).then((function(t){e.setState({anprresponse:t.data,loading:!1})}))}},{key:"refreshNow",value:function(e){var t=this;Ve.getEvents(this.state.filter).then((function(e){t.setState({anprresponse:e.data,loading:!1})}))}},{key:"archiveEvent",value:function(e){var t=this;Ve.archiveEvent(e).then((function(e){t.refresh()}))}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,console.log(t),this.setState({filter:t})}},{key:"handleFilterChange",value:function(e){this.setState({filter:e})}},{key:"handleLayoutChange",value:function(e){this.setState({layout:e})}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"editEvent",value:function(e){this.setState({workingEvent:e})}},{key:"magnifyEvent",value:function(e){var t=this.state.magnifyEvent;t.magnifyEventId=e.id,this.setState({magnifyEvent:t})}},{key:"updateZoomFactor",value:function(e){var t=this.state.magnifyEvent;t.zoomFactor=e,this.setState({magnifyEvent:t})}},{key:"updateEvent",value:function(e){var t=this,a=this.state,n=a.workingEvent;a.workingEventLoading;n.anprText=e,this.setState({workingEvent:n,workingEventLoading:!0}),Ve.updateEvent(n).then((function(a){var n=t.state,r=n.workingEvent;n.workingEventLoading;r.anprText=e,t.setState({workingEventLoading:!1})})).catch((function(e){alert("error in saving");t.state.workingEventLoading;t.setState({workingEventLoading:!1})}))}},{key:"downloadAnprReport",value:function(){var e=this;this.setState({downloading:!0});var t=this.state.filter,a={fromDateString:null!=t.from_date?Z()(t.fromDate).format("YYYY-MM-DD HH:mm:ss"):"",toDateString:null!=t.to_date?Z()(t.toDate).format('YYYY-MM-DD HH:mm:ss"'):"",lpr:t.lpr};Xe.getAnprEventsReport(a).then((function(t){e.setState({downloading:!1}),Object(Be.saveAs)(t.data,"anpr-events.csv")})).catch((function(t){e.setState({downloading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.layout,a=this.state.filter.lpr;return c.a.createElement("div",null,c.a.createElement("h3",null,"ANPR"),c.a.createElement(Pe.a,{bordered:!1,defaultActiveKey:["1"]},c.a.createElement(We,{header:"Filter",key:"1"},"LPR: ",c.a.createElement(ne.a,{value:a,style:{width:"200px"},onChange:this.onLprInputChange}),"\xa0\xa0",c.a.createElement(U.a,{onClick:function(){e.downloadAnprReport()}},c.a.createElement(g.a,{type:"download"}),"Download"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Ne,{handleRefresh:this.refresh,filter:this.state.filter,layout:t,handleFilterChange:this.handleFilterChange,handleLayoutChange:this.handleLayoutChange}))),c.a.createElement("div",null,"table"===t?this.renderTable():this.renderGrid()))}},{key:"renderGrid",value:function(){var e=this;if(this.state.loading||!this.state.anprresponse||0===this.state.anprresponse.totalPage)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.workingEventLoading,n=this.state.workingEvent,r=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,i=this.state.magnifyEvent,l=i.magnifyEventId,s=i.zoomFactor,o=i.minZoomFactor,u=i.maxZoomFactor,h=((u-o)/2).toFixed(5),d=s>=h?"":"rgba(0, 0, 0, .45)",p=s>=h?"rgba(0, 0, 0, .45)":"",f={1:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:d},type:"zoom-out"}))},2:{label:c.a.createElement("span",null,"2")},3:{label:c.a.createElement("span",null,"3")},4:{label:c.a.createElement("span",null,"4")},5:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:p},type:"zoom-in"}))}};return c.a.createElement("div",{style:{background:"#ECECEC",padding:"5px"}},c.a.createElement(ee.a,null,t.map((function(t,r){return c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24},key:r},c.a.createElement(B.a,{style:{margin:"5px"},title:c.a.createElement("div",null,t.direction&&"rev"===t.direction?c.a.createElement(ae.a,{color:"#f50"},"Reverse"):null,t.helmet?c.a.createElement(ae.a,{color:"#f50"},"Without helmet"):null,t.sectionSpeed?c.a.createElement(ae.a,{color:"#f50"},"Overspeeding"):null),extra:c.a.createElement(X.a,{overlay:c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"0",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom image"),c.a.createElement(m.a.Item,{key:"1"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/vehicle/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Full image")),c.a.createElement(m.a.Item,{key:"2"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Cropped image")),c.a.createElement(m.a.Item,{key:"3"},c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(t)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")))},c.a.createElement(U.a,null,"More ",c.a.createElement(g.a,{type:"down"}))),bordered:!0,cover:l===t.id?c.a.createElement(Ye.a,{src:"/public/anpr/vehicle/"+t.id+"/image.jpg",zoomFactor:s}):c.a.createElement("img",{alt:"event",src:"/public/anpr/vehicle/"+t.id+"/image.jpg"})},c.a.createElement("div",null,l===t.id?c.a.createElement(je.a,{marks:f,min:o,max:u,onChange:e.updateZoomFactor,value:"number"===typeof s?s:0}):c.a.createElement("div",{style:{height:"54px",textAlign:"center"}},c.a.createElement(U.a,{size:"small",type:"dashed",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom Image"))),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+t.id+"/image.jpg"})),c.a.createElement("div",{style:{marginTop:"5px",textAlign:"center"},onClick:function(){return e.editEvent(t)}},c.a.createElement(Ue,{strong:!0,editable:{onChange:e.updateEvent},copyable:!0},t.anprText),c.a.createElement(_e,{type:"secondary"},a&&n.id===t.id?"saving...":""),c.a.createElement(_e,{type:"secondary"},t.speed?"Speed: "+t.speed:""),c.a.createElement("div",null,c.a.createElement(_e,{code:!0},c.a.createElement(g.a,{type:"schedule"})," ",c.a.createElement(He.a,{format:"ll"},t.eventDate)," ","|"," ",c.a.createElement(He.a,{format:"LTS"},t.eventDate))),c.a.createElement("div",null,c.a.createElement(_e,{code:!0},c.a.createElement(g.a,{type:"environment"})," ",t.location)))))}))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(ze.a,{onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:1,total:r,current:this.state.filter.page,pageSize:this.state.filter.pageSize})))}},{key:"renderTable",value:function(){var e=this;if(this.state.loading||!this.state.events||0===this.state.events.Total)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.filter.page,pageSize:this.state.filter.pageSize});return c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(Ze,{title:"Location",dataIndex:"location",key:"location",render:function(e){return e}}),c.a.createElement(Ze,{title:"Date",dataIndex:"eventDate",key:"eventDate",render:function(e){return c.a.createElement(He.a,{format:"L"},e)}}),c.a.createElement(Ze,{title:"Time",dataIndex:"eventDate",key:"eventTime",render:function(e){return c.a.createElement(He.a,{format:"LTS"},e)}}),c.a.createElement(Ze,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(e){return e}}),c.a.createElement(Ze,{title:"LP Image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+e+"/image.jpg"}))}}),c.a.createElement(Ze,{title:"direction",dataIndex:"direction",key:"direction",render:function(e){return e}}),c.a.createElement(Ze,{title:"Helmet?",dataIndex:"helmet",key:"helmet",render:function(e){return e?c.a.createElement("span",null,"No"):c.a.createElement("span",null,"N/A")}}),c.a.createElement(Ze,{title:"Speed",dataIndex:"speed",key:"speed",render:function(e){return c.a.createElement("span",null,e)}}),c.a.createElement(Ze,{title:"Action",key:"action",render:function(t,a){return c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(a)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")}}))}}]),t}(o.Component),Je=ue.a.Column,Qe=Pe.a.Panel,Ge=K.a.Paragraph,Ke=K.a.Text,$e=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,layout:"list",events:{},filter:{page:1,pageSize:12},workingEvent:{},workingEventLoading:!1,magnifyEvent:{magnifyEventId:"",zoomFactor:2,minZoomFactor:1,maxZoomFactor:5}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(H.a)(a)),a.handleLayoutChange=a.handleLayoutChange.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.editEvent=a.editEvent.bind(Object(H.a)(a)),a.updateEvent=a.updateEvent.bind(Object(H.a)(a)),a.magnifyEvent=a.magnifyEvent.bind(Object(H.a)(a)),a.updateZoomFactor=a.updateZoomFactor.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;Ve.getIncidents(this.state.filter).then((function(t){e.setState({anprresponse:t.data,loading:!1})}))}},{key:"refreshNow",value:function(e){var t=this;Ve.getIncidents(this.state.filter).then((function(e){t.setState({anprresponse:e.data,loading:!1})}))}},{key:"archiveEvent",value:function(e){var t=this;Ve.archiveEvent(e).then((function(e){t.refresh()}))}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,console.log(t),this.setState({filter:t})}},{key:"handleFilterChange",value:function(e){this.setState({filter:e})}},{key:"handleLayoutChange",value:function(e){this.setState({layout:e})}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"editEvent",value:function(e){this.setState({workingEvent:e})}},{key:"magnifyEvent",value:function(e){var t=this.state.magnifyEvent;t.magnifyEventId=e.id,this.setState({magnifyEvent:t})}},{key:"updateZoomFactor",value:function(e){var t=this.state.magnifyEvent;t.zoomFactor=e,this.setState({magnifyEvent:t})}},{key:"updateEvent",value:function(e){var t=this,a=this.state,n=a.workingEvent;a.workingEventLoading;n.anprText=e,this.setState({workingEvent:n,workingEventLoading:!0}),Ve.updateEvent(n).then((function(a){var n=t.state,r=n.workingEvent;n.workingEventLoading;r.anprText=e,t.setState({workingEventLoading:!1})})).catch((function(e){alert("error in saving");t.state.workingEventLoading;t.setState({workingEventLoading:!1})}))}},{key:"render",value:function(){var e=this.state.layout,t=this.state.filter.lpr;return c.a.createElement("div",null,c.a.createElement("h3",null,"Incidents"),c.a.createElement(Pe.a,{bordered:!1,defaultActiveKey:["1"]},c.a.createElement(Qe,{header:"Filter",key:"1"},"LPR: ",c.a.createElement(ne.a,{value:t,style:{width:"200px"},onChange:this.onLprInputChange})," ",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Ne,{handleRefresh:this.refresh,filter:this.state.filter,layout:e,handleFilterChange:this.handleFilterChange,handleLayoutChange:this.handleLayoutChange})),c.a.createElement("div",null,"table"===e?this.renderTable():this.renderGrid())))}},{key:"renderGrid",value:function(){var e=this;if(this.state.loading||!this.state.anprresponse||0===this.state.anprresponse.totalPage)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.workingEventLoading,n=this.state.workingEvent,r=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,i=this.state.magnifyEvent,l=i.magnifyEventId,s=i.zoomFactor,o=i.minZoomFactor,u=i.maxZoomFactor,h=((u-o)/2).toFixed(5),d=s>=h?"":"rgba(0, 0, 0, .45)",p=s>=h?"rgba(0, 0, 0, .45)":"",f={1:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:d},type:"zoom-out"}))},2:{label:c.a.createElement("span",null,"2")},3:{label:c.a.createElement("span",null,"3")},4:{label:c.a.createElement("span",null,"4")},5:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:p},type:"zoom-in"}))}};return c.a.createElement("div",{style:{background:"#ECECEC",padding:"5px"}},c.a.createElement(ee.a,null,t.map((function(t,r){return c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24},key:r},c.a.createElement(B.a,{style:{margin:"5px"},title:c.a.createElement("div",null,t.direction&&"rev"===t.direction?c.a.createElement(ae.a,{color:"#f50"},"Reverse"):null,t.helmet?c.a.createElement(ae.a,{color:"#f50"},"Without helmet"):null),extra:c.a.createElement(X.a,{overlay:c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"0",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom image"),c.a.createElement(m.a.Item,{key:"1"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/vehicle/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Full image")),c.a.createElement(m.a.Item,{key:"2"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Cropped image")),c.a.createElement(m.a.Item,{key:"3"},c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(t)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")))},c.a.createElement(U.a,null,"More ",c.a.createElement(g.a,{type:"down"}))),bordered:!0,cover:l===t.id?c.a.createElement(Ye.a,{src:"/public/anpr/vehicle/"+t.id+"/image.jpg",zoomFactor:s}):c.a.createElement("img",{alt:"event",src:"/public/anpr/vehicle/"+t.id+"/image.jpg"})},c.a.createElement("div",null,l===t.id?c.a.createElement(je.a,{marks:f,min:o,max:u,onChange:e.updateZoomFactor,value:"number"===typeof s?s:0}):c.a.createElement("div",{style:{height:"54px",textAlign:"center"}},c.a.createElement(U.a,{size:"small",type:"dashed",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom Image"))),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+t.id+"/image.jpg"})),c.a.createElement("div",{style:{marginTop:"5px",textAlign:"center"},onClick:function(){return e.editEvent(t)}},c.a.createElement(Ge,{strong:!0,editable:{onChange:e.updateEvent},copyable:!0},t.anprText),c.a.createElement(Ke,{type:"secondary"},a&&n.id===t.id?"saving...":""),c.a.createElement("div",null,c.a.createElement(Ke,{code:!0}," ",c.a.createElement(He.a,{format:"ll"},t.eventDate)," ","|"," ",c.a.createElement(He.a,{format:"LTS"},t.eventDate))),c.a.createElement("div",null,c.a.createElement(Ke,{code:!0},c.a.createElement(g.a,{type:"environment"})," ",t.location)))))}))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(ze.a,{onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:1,total:r,current:this.state.filter.page,pageSize:this.state.filter.pageSize})))}},{key:"renderTable",value:function(){var e=this;if(this.state.loading||!this.state.events||0===this.state.events.Total)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.filter.page,pageSize:this.state.filter.pageSize});return c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(Je,{title:"Location",dataIndex:"location",key:"location",render:function(e){return e}}),c.a.createElement(Je,{title:"Date",dataIndex:"eventDate",key:"eventDate",render:function(e){return c.a.createElement(He.a,{format:"L"},e)}}),c.a.createElement(Je,{title:"Time",dataIndex:"eventDate",key:"eventTime",render:function(e){return c.a.createElement(He.a,{format:"LTS"},e)}}),c.a.createElement(Je,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(e){return e}}),c.a.createElement(Je,{title:"image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+e+"/image.jpg"}))}}),c.a.createElement(Je,{title:"direction",dataIndex:"direction",key:"direction",render:function(e){return e}}),c.a.createElement(Je,{title:"Helmet",dataIndex:"helmet",key:"helmet",render:function(e){return e?c.a.createElement("span",null,"No"):c.a.createElement("span",null,"Yes")}}),c.a.createElement(Je,{title:"Action",key:"action",render:function(t,a){return c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(a)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")}}))}}]),t}(o.Component),et=a(331),tt=a(678),at=K.a.Paragraph,nt=(K.a.Text,ue.a.Column),rt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!1,anprresponse:{},filter:{currentPage:1,pageSizes:24,lpr:"",incidentType:""}},a.toggleVisible=a.toggleVisible.bind(Object(H.a)(a)),a.refreshBriefIncidentsNow=a.refreshBriefIncidentsNow.bind(Object(H.a)(a)),a.onModalPageChange=a.onModalPageChange.bind(Object(H.a)(a)),a.onModalPageSizeChange=a.onModalPageSizeChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.filter;a.lpr===e.lpr&&a.incidentType===e.incidentType||(a.lpr=e.lpr,a.incidentType=e.incidentType,this.setState({filter:a},(function(){t.refreshBriefIncidentsNow()})))}},{key:"toggleVisible",value:function(){var e=this.state.filter;e.currentPage=1,this.setState({filter:e}),this.props.toggleVisible()}},{key:"refreshBriefIncidentsNow",value:function(){var e=this,t=this.state,a=t.loading,n=t.filter,r=t.anprresponse;n.lpr&&n.incidentType&&(this.setState({loading:!0}),Ve.getBriefIncidentsRepeated(n).then((function(t){a=!1,r=t.data,e.setState({loading:a,anprresponse:r})})).catch((function(t){a=!1,e.setState({loading:a}),alert("Something went wrong")})))}},{key:"onModalPageChange",value:function(e,t){var a=this.state.filter;a.currentPage=e,a.pageSizes=t,this.refreshBriefIncidentsNow(a)}},{key:"onModalPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSizes=t,this.refreshBriefIncidentsNow(a)}},{key:"render",value:function(){var e=this.state.anprresponse.events,t=this.state.anprresponse.totalPages*this.state.anprresponse.pageSizes,a={showSizeChanger:!1,showQuickJumper:!1,pageSize:5,showLessItems:!0,onShowSizeChange:this.onModalPageSizeChange,onChange:this.onModalPageChange,total:t},n=Object(Re.a)({},a,{total:t,current:this.state.filter.currentPage,pageSizes:this.state.filter.pageSizes});if(this.state.loading){var r=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:r})}return this.state.anprresponse.events?c.a.createElement(Y.a,{title:c.a.createElement("div",null,this.state.filter.incidentType,c.a.createElement(at,{copyable:!0},this.state.filter.lpr)),visible:this.props.visible,onCancel:this.toggleVisible,onClose:this.toggleVisible,footer:[c.a.createElement(U.a,{key:"close",type:"primary",onClick:this.toggleVisible},"Close")]},c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:e,pagination:n},c.a.createElement(nt,{title:"When and Where",render:function(e,t,a){return c.a.createElement(tt.a.Item,null,c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(g.a,{type:"clock-circle"}),"  ",c.a.createElement(He.a,{format:"lll"},t.eventDate)),c.a.createElement("p",null,c.a.createElement(g.a,{type:"environment"})," ",t.location),c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+t.id+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+t.id+"/image.jpg",style:{width:160,height:"auto"}}))))}}),c.a.createElement(nt,{title:"Captured Image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/vehicle/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/vehicle/"+e+"/image.jpg",style:{width:200,height:"auto"}}))}})))):c.a.createElement(Le.a,{description:!1})}}]),t}(o.Component),it=ue.a.Column,lt=ne.a.Search,st=[{key:"Reverse",tab:"Reverse"},{key:"Helmet-Missing",tab:"Helmet-Missing"}],ot=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).showModal=function(e){a.setState({visible:!0,timelineLpr:e})},a.state={activeTab:"Reverse",visible:!1,timelineLpr:"",filter:{lpr:""},helmetMissing:{loading:!1,anprresponse:{},filter:{pages:1,pageSizes:24,lpr:"",incidentType:""}},briefIncident:{loading:!1,anprresponse:{},filter:{lpr:""}},reverseDirection:{loading:!1,anprresponse:{},filter:{pagess:1,pageSizes:24,lpr:"",incidentType:""}}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onHelmetMissingPageChange=a.onHelmetMissingPageChange.bind(Object(H.a)(a)),a.onReverseDirectionPageChange=a.onReverseDirectionPageChange.bind(Object(H.a)(a)),a.onHelmetMissingPageSizeChange=a.onHelmetMissingPageSizeChange.bind(Object(H.a)(a)),a.onReverseDirectionPageSizeChange=a.onReverseDirectionPageSizeChange.bind(Object(H.a)(a)),a.handleTabClick=a.handleTabClick.bind(Object(H.a)(a)),a.refreshHelmetMissingIncidentsNow=a.refreshHelmetMissingIncidentsNow.bind(Object(H.a)(a)),a.refreshReverseDirectionIncidentsNow=a.refreshReverseDirectionIncidentsNow.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.search=a.search.bind(Object(H.a)(a)),a.onTabChange=a.onTabChange.bind(Object(H.a)(a)),a.toggleIncidentTimelineModal=a.toggleIncidentTimelineModal.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"handleTabClick",value:function(e){this.setState({activeTabIndex:e===this.state.activeTabIndex?this.props.defaultActiveTabIndex:e})}},{key:"refresh",value:function(){this.refreshHelmetMissingIncidentsNow(),this.refreshReverseDirectionIncidentsNow()}},{key:"toggleIncidentTimelineModal",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"refreshHelmetMissingIncidentsNow",value:function(){var e=this,t=this.state.helmetMissing;t.loading=!0,this.setState({helmetMissing:t}),Ve.getHelmetMissingIncidentsRepeated(this.state.helmetMissing.filter).then((function(a){t.loading=!1,t.anprresponse=a.data,e.setState({helmetMissing:t})})).catch((function(a){t.loading=!1,e.setState({helmetMissing:t}),alert("Something went wrong")}))}},{key:"refreshReverseDirectionIncidentsNow",value:function(){var e=this,t=this.state.reverseDirection;t.loading=!0,this.setState({reverseDirection:t}),Ve.getReverseDirectionIncidentsRepeated(this.state.reverseDirection.filter).then((function(a){t.loading=!1,t.anprresponse=a.data,e.setState({reverseDirection:t})})).catch((function(a){t.loading=!1,e.setState({hasError:!0}),alert("Something went wrong")}))}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,this.setState({filter:t})}},{key:"search",value:function(e){var t=this,a=this.state,n=a.filter,r=a.reverseDirection,i=a.helmetMissing;n.lpr=e,r.filter.lpr=e,i.filter.lpr=e,this.setState({filter:n,reverseDirection:r,helmetMissing:i},(function(){t.refresh()}))}},{key:"onHelmetMissingPageChange",value:function(e,t){var a=this.state.helmetMissing.filter;a.page=e,a.pageSize=t,this.refreshHelmetMissingIncidentsNow(a)}},{key:"onReverseDirectionPageChange",value:function(e,t){var a=this.state.reverseDirection.filter;a.pages=e,a.pageSizes=t,this.refreshReverseDirectionIncidentsNow(a)}},{key:"onHelmetMissingPageSizeChange",value:function(e,t){var a=this.state.helmetMissing.filter;a.pageSize=t,this.refreshHelmetMissingIncidentsNow(a)}},{key:"onReverseDirectionPageSizeChange",value:function(e,t){var a=this.state.reverseDirection.filter;a.pageSizes=t,this.refreshReverseDirectionIncidentsNow(a)}},{key:"onTabChange",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",null),c.a.createElement(B.a,{style:{width:"100%"},title:c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:16},lg:{span:16},md:{span:12},sm:{span:12},xs:{span:12}},c.a.createElement("h4",null,"Repeated Incidents")),c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:12},sm:{span:12},xs:{span:12}},c.a.createElement(lt,{allowClear:!0,placeholder:"Search Vehicle ",onChange:this.onLprInputChange,style:{textAlign:"right"},onSearch:function(t){return e.search(t)},enterButton:!0}))),tabList:st,activeTabKey:this.state.activeTab,onTabChange:function(t){e.onTabChange(t)}},"Reverse"===this.state.activeTab?this.renderReverseData():this.renderHelmetMissingData(),c.a.createElement(rt,{lpr:this.state.timelineLpr,incidentType:this.state.activeTab,visible:this.state.visible,toggleVisible:this.toggleIncidentTimelineModal})))}},{key:"renderReverseData",value:function(){var e=this,t=this.state.reverseDirection.anprresponse.events,a=this.state.reverseDirection.anprresponse.totalPages*this.state.reverseDirection.anprresponse.pageSizes,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onReverseDirectionPageSizeChange,onChange:this.onReverseDirectionPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.reverseDirection.filter.pages,pageSizes:this.state.reverseDirection.filter.pageSizes});if(this.state.reverseDirection.loading){var i=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:i})}return this.state.reverseDirection.anprresponse.events?c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(it,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(t){return c.a.createElement(U.a,{onClick:function(){return e.showModal(t)}},t)}}),c.a.createElement(it,{title:"Repeated Times",dataIndex:"repeatedTimes",key:"repeatedTimes",render:function(e){return e}}))):c.a.createElement(Le.a,{description:!1})}},{key:"renderHelmetMissingData",value:function(){var e=this,t=this.state.helmetMissing.anprresponse.events,a=this.state.helmetMissing.anprresponse.totalPages*this.state.helmetMissing.anprresponse.pageSize,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onHelmetMissingPageSizeChange,onChange:this.onHelmetMissingPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.helmetMissing.filter.page,pageSize:this.state.helmetMissing.filter.pageSize});if(this.state.helmetMissing.loading){var i=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:i})}return this.state.helmetMissing.anprresponse.events?c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(it,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(t){return c.a.createElement(U.a,{onClick:function(){return e.showModal(t)}},t)}}),c.a.createElement(it,{title:"Repeated Times",dataIndex:"repeatedTimes",key:"repeatedTimes",render:function(e){return e}}))):c.a.createElement(Le.a,{description:!1})}}]),t}(o.Component),ct=a(119),ut=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getHotListedVehicles",value:function(e){return k.post("/api/hotlist/vehicle/list",e)}},{key:"saveHotListedVehicle",value:function(e){return k.post("/api/hotlist/vehicle/save",e)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),ht=ne.a.Search,dt=K.a.Text,mt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={activeModal:"",hotListedVehicleResponse:{},filter:{page:1,pageSize:40,lpr:""},workingVehicle:{id:void 0,lpr:"",archived:!1},loading:{vehiclesList:!1}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.openHotListVehicleForm=a.openHotListVehicleForm.bind(Object(H.a)(a)),a.handleSubmitWorkingHotListVehicle=a.handleSubmitWorkingHotListVehicle.bind(Object(H.a)(a)),a.handleCancelWorkingHotListVehicle=a.handleCancelWorkingHotListVehicle.bind(Object(H.a)(a)),a.archiveHotListedVehicle=a.archiveHotListedVehicle.bind(Object(H.a)(a)),a.workingVehicleOnChange=a.workingVehicleOnChange.bind(Object(H.a)(a)),a.search=a.search.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh(this.state.filter)}},{key:"refresh",value:function(e){var t=this,a=this.state.loading;a.vehiclesList=!0,this.setState({loading:a}),ut.getHotListedVehicles(e).then((function(e){a.vehiclesList=!1,t.setState({hotListedVehicleResponse:e.data,loading:a})})).catch((function(e){a.vehiclesList=!1,t.setState({loading:a}),he.a.error("Something went wrong!")}))}},{key:"archiveHotListedVehicle",value:function(e){var t=this;ut.archiveHotListedVehicle(e).then((function(e){t.refresh(t.state.filter),he.a.success("Vehicle archived!")})).catch((function(e){he.a.error("Something went wrong!")}))}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refresh(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refresh(a)}},{key:"confirm",value:function(e){console.log(e),he.a.success("Click on Yes")}},{key:"cancel",value:function(e){console.log(e),he.a.error("Click on No")}},{key:"openHotListVehicleForm",value:function(e){var t={id:void 0,lpr:"",archived:!1};e&&(t.id=e.id,t.lpr=e.lpr,t.archived=e.archived),this.setState({activeModal:"workingVehicle",workingVehicle:t})}},{key:"workingVehicleOnChange",value:function(e){var t=this.state.workingVehicle;switch(e.target.type){case"checkbox":t[e.target.name]=e.target.checked;break;default:t[e.target.name]=e.target.value}this.setState({workingVehicle:t})}},{key:"handleSubmitWorkingHotListVehicle",value:function(e){var t=this;ut.saveHotListedVehicle(this.state.workingVehicle).then((function(e){t.refresh(t.state.filter);var a={id:void 0,lpr:"",archived:!1};t.setState({activeModal:"",workingVehicle:a}),he.a.success("Saved!")})).catch((function(e){he.a.error("Something went wrong!")}))}},{key:"handleCancelWorkingHotListVehicle",value:function(e){var t={id:void 0,lpr:"",archived:!1};this.setState({activeModal:"",workingVehicle:t})}},{key:"search",value:function(e){var t=this.state.filter;t.lpr=e,this.setState({filter:t}),this.refresh(t)}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,this.setState({filter:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filter,n=t.hotListedVehicleResponse,r=t.workingVehicle,i=t.loading,l=n.events,s=n.totalPages*n.pageSize;if(i.vehiclesList){var o=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:o})}return c.a.createElement("div",null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:16},sm:{span:12},xs:{span:12}},c.a.createElement(ht,{allowClear:!0,placeholder:"input search text",name:"lpr",value:a.lpr,onChange:this.onLprInputChange,onSearch:function(t){return e.search(t)},enterButton:!0}))),c.a.createElement("br",null),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:3},lg:{span:4},md:{span:6},sm:{span:8},xs:{span:16},key:"new"},c.a.createElement(B.a,{style:{backgroundColor:"#40a9ff"},hoverable:!0,onClick:function(){return e.openHotListVehicleForm(void 0)}},c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(dt,{style:{color:"white"},strong:!0},c.a.createElement(g.a,{type:"plus"})," New")))),(l||[]).map((function(t,a){return c.a.createElement(te.a,{xl:{span:3},lg:{span:4},md:{span:6},sm:{span:8},xs:{span:16},key:a},c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(B.a,{hoverable:!0,onClick:function(){return e.openHotListVehicleForm(t)},style:{backgroundColor:t.archived?"#fafafa":""}},c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(dt,{delete:t.archived,strong:!0},t.lpr)))))}))),c.a.createElement(Y.a,{title:c.a.createElement("div",null,c.a.createElement(ae.a,null,r.id?"EDIT":"NEW")," ",c.a.createElement(dt,{copyable:r.lpr.length>0},r.lpr)),visible:"workingVehicle"===this.state.activeModal,onOk:this.handleSubmitWorkingHotListVehicle,onCancel:this.handleCancelWorkingHotListVehicle},c.a.createElement(ct.a,{onChange:this.workingVehicleOnChange,name:"archived",checked:r.archived},"Archive"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{onChange:this.workingVehicleOnChange,name:"lpr",value:r.lpr,size:"large",placeholder:"Enter vehicle number here"}))),n&&n.totalPages>1?c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(ze.a,{onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:1,total:s,current:this.state.filter.page,pageSize:this.state.filter.pageSize})):null))}}]),t}(o.Component),gt=ue.a.Column,pt=Pe.a.Panel,ft=K.a.Paragraph,vt=K.a.Text,Et=[{key:"incidents",tab:"Incidents"},{key:"vehicles",tab:"Vehicles"}],bt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={activeTab:"incidents",loading:!0,layout:"list",events:{},filter:{page:1,pageSize:12},workingEvent:{},workingEventLoading:!1,magnifyEvent:{magnifyEventId:"",zoomFactor:2,minZoomFactor:1,maxZoomFactor:5}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(H.a)(a)),a.handleLayoutChange=a.handleLayoutChange.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.editEvent=a.editEvent.bind(Object(H.a)(a)),a.updateEvent=a.updateEvent.bind(Object(H.a)(a)),a.magnifyEvent=a.magnifyEvent.bind(Object(H.a)(a)),a.updateZoomFactor=a.updateZoomFactor.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;Ve.getIncidentsHotlisted(this.state.filter).then((function(t){e.setState({anprresponse:t.data,loading:!1})}))}},{key:"refreshNow",value:function(e){var t=this;Ve.getIncidentsHotlisted(this.state.filter).then((function(e){t.setState({anprresponse:e.data,loading:!1})}))}},{key:"archiveEvent",value:function(e){var t=this;Ve.archiveEvent(e).then((function(e){t.refresh()}))}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,console.log(t),this.setState({filter:t})}},{key:"handleFilterChange",value:function(e){this.setState({filter:e})}},{key:"handleLayoutChange",value:function(e){this.setState({layout:e})}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"editEvent",value:function(e){this.setState({workingEvent:e})}},{key:"magnifyEvent",value:function(e){var t=this.state.magnifyEvent;t.magnifyEventId=e.id,this.setState({magnifyEvent:t})}},{key:"updateZoomFactor",value:function(e){var t=this.state.magnifyEvent;t.zoomFactor=e,this.setState({magnifyEvent:t})}},{key:"updateEvent",value:function(e){var t=this,a=this.state,n=a.workingEvent;a.workingEventLoading;n.anprText=e,this.setState({workingEvent:n,workingEventLoading:!0}),Ve.updateEvent(n).then((function(a){var n=t.state,r=n.workingEvent;n.workingEventLoading;r.anprText=e,t.setState({workingEventLoading:!1})})).catch((function(e){alert("error in saving");t.state.workingEventLoading;t.setState({workingEventLoading:!1})}))}},{key:"onTabChange",value:function(e){"incidents"===e&&this.refresh(),this.setState({activeTab:e})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(B.a,{style:{width:"100%"},title:"Hotlist",tabList:Et,activeTabKey:this.state.activeTab,onTabChange:function(t){e.onTabChange(t)}},"incidents"===this.state.activeTab?this.renderIncidents():c.a.createElement(mt,null)))}},{key:"renderIncidents",value:function(){var e=this.state.layout,t=this.state.filter.lpr;return c.a.createElement("div",null,c.a.createElement(Pe.a,{bordered:!1,defaultActiveKey:["1"]},c.a.createElement(pt,{header:"Filter",key:"1"},"LPR: ",c.a.createElement(ne.a,{value:t,style:{width:"200px"},onChange:this.onLprInputChange})," ",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Ne,{handleRefresh:this.refresh,filter:this.state.filter,layout:e,handleFilterChange:this.handleFilterChange,handleLayoutChange:this.handleLayoutChange})),c.a.createElement("div",null,"table"===e?this.renderTable():this.renderGrid())))}},{key:"renderGrid",value:function(){var e=this;if(this.state.loading||!this.state.anprresponse||0===this.state.anprresponse.totalPage)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.workingEventLoading,n=this.state.workingEvent,r=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,i=this.state.magnifyEvent,l=i.magnifyEventId,s=i.zoomFactor,o=i.minZoomFactor,u=i.maxZoomFactor,h=((u-o)/2).toFixed(5),d=s>=h?"":"rgba(0, 0, 0, .45)",p=s>=h?"rgba(0, 0, 0, .45)":"",f={1:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:d},type:"zoom-out"}))},2:{label:c.a.createElement("span",null,"2")},3:{label:c.a.createElement("span",null,"3")},4:{label:c.a.createElement("span",null,"4")},5:{label:c.a.createElement("span",null,c.a.createElement(g.a,{style:{color:p},type:"zoom-in"}))}};return c.a.createElement("div",{style:{background:"#ECECEC",padding:"5px"}},c.a.createElement(ee.a,null,t.map((function(t,r){return c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24},key:r},c.a.createElement(B.a,{style:{margin:"5px"},title:c.a.createElement("div",null,t.direction&&"rev"===t.direction?c.a.createElement(ae.a,{color:"#f50"},"Reverse"):null,t.helmet?c.a.createElement(ae.a,{color:"#f50"},"Without helmet"):null),extra:c.a.createElement(X.a,{overlay:c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"0",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom image"),c.a.createElement(m.a.Item,{key:"1"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/vehicle/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Full image")),c.a.createElement(m.a.Item,{key:"2"},c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Cropped image")),c.a.createElement(m.a.Item,{key:"3"},c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(t)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")))},c.a.createElement(U.a,null,"More ",c.a.createElement(g.a,{type:"down"}))),bordered:!0,cover:l===t.id?c.a.createElement(Ye.a,{src:"/public/anpr/vehicle/"+t.id+"/image.jpg",zoomFactor:s}):c.a.createElement("img",{alt:"event",src:"/public/anpr/vehicle/"+t.id+"/image.jpg"})},c.a.createElement("div",null,l===t.id?c.a.createElement(je.a,{marks:f,min:o,max:u,onChange:e.updateZoomFactor,value:"number"===typeof s?s:0}):c.a.createElement("div",{style:{height:"54px",textAlign:"center"}},c.a.createElement(U.a,{size:"small",type:"dashed",onClick:function(){return e.magnifyEvent(t)}},c.a.createElement(g.a,{type:"zoom-in"}),"Zoom Image"))),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+t.id+"/image.jpg"})),c.a.createElement("div",{style:{marginTop:"5px",textAlign:"center"},onClick:function(){return e.editEvent(t)}},c.a.createElement(ft,{strong:!0,editable:{onChange:e.updateEvent},copyable:!0},t.anprText),c.a.createElement(vt,{type:"secondary"},a&&n.id===t.id?"saving...":""),c.a.createElement("div",null,c.a.createElement(vt,{code:!0}," ",c.a.createElement(He.a,{format:"ll"},t.eventDate)," ","|"," ",c.a.createElement(He.a,{format:"LTS"},t.eventDate))),c.a.createElement("div",null,c.a.createElement(vt,{code:!0},c.a.createElement(g.a,{type:"environment"})," ",t.location)))))}))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(ze.a,{onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:1,total:r,current:this.state.filter.page,pageSize:this.state.filter.pageSize})))}},{key:"renderTable",value:function(){var e=this;if(this.state.loading||!this.state.events||0===this.state.events.Total)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.filter.page,pageSize:this.state.filter.pageSize});return c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(gt,{title:"Location",dataIndex:"location",key:"location",render:function(e){return e}}),c.a.createElement(gt,{title:"Date",dataIndex:"eventDate",key:"eventDate",render:function(e){return c.a.createElement(He.a,{format:"L"},e)}}),c.a.createElement(gt,{title:"Time",dataIndex:"eventDate",key:"eventTime",render:function(e){return c.a.createElement(He.a,{format:"LTS"},e)}}),c.a.createElement(gt,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(e){return e}}),c.a.createElement(gt,{title:"image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+e+"/image.jpg"}))}}),c.a.createElement(gt,{title:"direction",dataIndex:"direction",key:"direction",render:function(e){return e}}),c.a.createElement(gt,{title:"Helmet",dataIndex:"helmet",key:"helmet",render:function(e){return e?c.a.createElement("span",null,"No"):c.a.createElement("span",null,"Yes")}}),c.a.createElement(gt,{title:"Action",key:"action",render:function(t,a){return c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(a)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")}}))}}]),t}(o.Component),yt=K.a.Paragraph,kt=ue.a.Column,Ct=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!1,anprresponse:{},filter:{currentPage:1,pageSizes:24,lpr:"",incidentType:""}},a.toggleVisible=a.toggleVisible.bind(Object(H.a)(a)),a.refreshBriefIncidentsNow=a.refreshBriefIncidentsNow.bind(Object(H.a)(a)),a.onModalPageChange=a.onModalPageChange.bind(Object(H.a)(a)),a.onModalPageSizeChange=a.onModalPageSizeChange.bind(Object(H.a)(a)),a.refreshBriefIncidentsNow=a.refreshBriefIncidentsNow.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.filter;a.lpr==e.lpr&&a.incidentType==e.incidentType||(a.lpr=e.lpr,a.incidentType=e.incidentType,this.setState({filter:a},(function(){t.refreshBriefIncidentsNow()})))}},{key:"toggleVisible",value:function(){var e=this.state.filter;e.currentPage=1,this.setState({filter:e}),this.props.toggleVisible()}},{key:"refreshBriefIncidentsNow",value:function(){var e=this,t=this.state,a=t.loading,n=t.filter,r=t.anprresponse;n.lpr&&n.incidentType&&(this.setState({loading:!0}),Ve.getIncidentTimeline(n).then((function(t){a=!1,r=t.data,e.setState({loading:a,anprresponse:r})})).catch((function(t){a=!1,e.setState({loading:a}),alert("Something went wrong")})))}},{key:"onModalPageChange",value:function(e,t){var a=this.state.filter;a.currentPage=e,a.pageSizes=t,this.refreshBriefIncidentsNow(a)}},{key:"onModalPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSizes=t,this.refreshBriefIncidentsNow(a)}},{key:"render",value:function(){var e=this.state.anprresponse.events,t=this.state.anprresponse.totalPages*this.state.anprresponse.pageSizes,a={showSizeChanger:!1,showQuickJumper:!1,pageSize:5,showLessItems:!0,onShowSizeChange:this.onModalPageSizeChange,onChange:this.onModalPageChange,total:t},n=Object(Re.a)({},a,{total:t,current:this.state.filter.currentPage,pageSizes:this.state.filter.pageSizes});if(this.state.loading){var r=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:r})}return this.state.anprresponse.events?c.a.createElement(Y.a,{title:c.a.createElement("div",null,c.a.createElement(yt,{copyable:!0},this.state.filter.lpr)),visible:this.props.visible,onCancel:this.toggleVisible,onClose:this.toggleVisible,footer:[c.a.createElement(U.a,{key:"close",type:"primary",onClick:this.toggleVisible},"Close")]},c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:e,pagination:n},c.a.createElement(kt,{title:"When and Where",render:function(e,t,a){return c.a.createElement(tt.a.Item,null,c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(g.a,{type:"clock-circle"}),"  ",c.a.createElement(He.a,{format:"lll"},t.eventDate)),c.a.createElement("p",null,c.a.createElement(g.a,{type:"environment"})," ",t.location),c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+t.id+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+t.id+"/image.jpg",style:{width:160,height:"auto"}}))))}}),c.a.createElement(kt,{title:"Captured Image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/vehicle/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/vehicle/"+e+"/image.jpg",style:{width:200,height:"auto"}}))}})))):c.a.createElement(Le.a,{description:!1})}}]),t}(o.Component),Ot=ue.a.Column,St=ne.a.Search,Dt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).showModal=function(e){a.setState({visible:!0,timelineLpr:e})},a.state={archiveEventsLoading:"",activeTab:"All-Incidents",visible:!1,timelineLpr:"",filter:{lpr:""},archiveLpr:{anprresponse:{},lpr:""},allData:{loading:!1,anprresponse:{},filter:{pages:1,pageSizes:24,lpr:"",incidentType:""}}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onMasterDataPageChange=a.onMasterDataPageChange.bind(Object(H.a)(a)),a.onMasterDataPageSizeChange=a.onMasterDataPageSizeChange.bind(Object(H.a)(a)),a.handleTabClick=a.handleTabClick.bind(Object(H.a)(a)),a.refreshIncidentsNow=a.refreshIncidentsNow.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.search=a.search.bind(Object(H.a)(a)),a.onTabChange=a.onTabChange.bind(Object(H.a)(a)),a.toggleIncidentTimelineModal=a.toggleIncidentTimelineModal.bind(Object(H.a)(a)),a.archiveLprOnChange=a.archiveLprOnChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"handleTabClick",value:function(e){this.setState({activeTabIndex:e===this.state.activeTabIndex?this.props.defaultActiveTabIndex:e})}},{key:"refresh",value:function(){this.refreshIncidentsNow()}},{key:"toggleIncidentTimelineModal",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"refreshIncidentsNow",value:function(){var e=this,t=this.state.allData;t.loading=!0,this.setState({allData:t}),Ve.getIncidentsList(this.state.allData.filter).then((function(a){t.loading=!1,t.anprresponse=a.data,e.setState({allData:t})})).catch((function(a){t.loading=!1,e.setState({hasError:!0}),alert("Something went wrong")}))}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.lpr=e.target.value,this.setState({filter:t})}},{key:"search",value:function(e){var t=this,a=this.state,n=a.filter,r=a.allData;n.lpr=e,r.filter.lpr=e,this.setState({filter:n,allData:r},(function(){t.refresh()}))}},{key:"onMasterDataPageChange",value:function(e,t){var a=this.state.allData.filter;a.pages=e,a.pageSizes=t,this.refreshIncidentsNow(a)}},{key:"onMasterDataPageSizeChange",value:function(e,t){var a=this.state.allData.filter;a.pageSizes=t,this.refreshIncidentsNow(a)}},{key:"onTabChange",value:function(e){this.setState({activeTab:e})}},{key:"archiveLprOnChange",value:function(e){var t=this;this.setState({archiveEventsLoading:e}),Ve.archiveAllEvent(e).then((function(e){t.setState({archiveEventsLoading:""}),t.refresh(t.state.archiveLpr),he.a.success("Vehicle archived!")})).catch((function(e){t.setState({archiveEventsLoading:""}),he.a.error("Something went wrong!")}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",null),c.a.createElement(B.a,{style:{width:"100%"},title:c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:16},lg:{span:16},md:{span:12},sm:{span:12},xs:{span:12}},c.a.createElement("h4",null,"Master-Anpr-Data")),c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:12},sm:{span:12},xs:{span:12}},c.a.createElement(St,{allowClear:!0,placeholder:"Search Vehicle ",onChange:this.onLprInputChange,style:{textAlign:"right"},onSearch:function(t){return e.search(t)},enterButton:!0}))),onTabChange:function(t){e.onTabChange(t)}},this.renderMasterData(),c.a.createElement(Ct,{lpr:this.state.timelineLpr,incidentType:this.state.activeTab,visible:this.state.visible,toggleVisible:this.toggleIncidentTimelineModal})))}},{key:"renderMasterData",value:function(){var e=this,t=this.state.allData.anprresponse.events,a=this.state.allData.anprresponse.totalPages*this.state.allData.anprresponse.pageSizes,n=(this.state.archiveLpr,{showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onMasterDataPageSizeChange,onChange:this.onMasterDataPageChange,total:a}),r=Object(Re.a)({},n,{total:a,current:this.state.allData.filter.pages,pageSizes:this.state.allData.filter.pageSizes});if(this.state.allData.loading){var i=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(et.a,{indicator:i})}return this.state.allData.anprresponse.events?c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(Ot,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(t){return c.a.createElement(U.a,{onClick:function(){return e.showModal(t)}},t)}}),c.a.createElement(Ot,{title:"Incident Count",dataIndex:"repeatedTimes",key:"repeatedTimes",render:function(e){return e}}),c.a.createElement(Ot,{render:function(t,a,n){return c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(U.a,{type:"danger",loading:e.state.archiveEventsLoading===a.anprText,onClick:function(){return e.archiveLprOnChange(a.anprText)}},"Archive")))}}))):c.a.createElement(Le.a,{description:!1})}}]),t}(o.Component),wt=a(676),jt=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"checkIn",value:function(e){return k.post("/api/apms/check/in?vehicleNo="+e)}},{key:"checkOut",value:function(e){return k.post("/api/apms/check/out?vehicleNo="+e)}},{key:"getEvents",value:function(e){return k.post("/api/apms/events",e)}},{key:"getEventStatus",value:function(e){return k.post("/api/apms/event/status?vehicleNo="+e)}},{key:"getParkingSlotStats",value:function(){return k.get("/api/apms/guidance/stats")}},{key:"getCheckedInVehiclesCount",value:function(){return k.get("/api/apms/guidance/checked-in/current/count")}},{key:"getSlots",value:function(){return k.get("/api/apms/guidance/slots?lot=lucknow")}},{key:"updateSlot",value:function(e){return k.post("/api/apms/guidance/slots",{lot:"lucknow",slot:e.name,status:e.free,misaligned:e.misaligned})}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),It=a(229),xt=(a(281),V.a.RangePicker),Tt={labels:["Occupied","Free"],datasets:[{data:[],backgroundColor:[W.getColor(0),W.getColor(2)]}]},Rt={labels:["Aligned","MisAligned"],datasets:[{data:[],backgroundColor:[W.getColor(6),W.getColor(1)]}]},Pt={labels:["Car - In","Bike - In"],datasets:[{data:[],backgroundColor:[W.getColor(0),W.getColor(2)]}]},Lt=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleCancel=function(e){a.setState({isOpencustomDateRangeModal:""})};var r=Z()();return a.state={loading:{parkingEventData:!1,stats:!1,checkInEventsData:!1},isOpencustomDateRangeModal:"",fo_data:Tt,cb_data:{},entryexit_data:Pt,misAlignedData:Rt,parkingEventData:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"Hourly",fromDate:r.startOf("day").toDate(),toDate:r.endOf("day").toDate()},chartData:{labels:[],datasets:[]}}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.getParkingSlotStats=a.getParkingSlotStats.bind(Object(H.a)(a)),a.getDateRangeOptions=a.getDateRangeOptions.bind(Object(H.a)(a)),a.getParkingVehicleCount=a.getParkingVehicleCount.bind(Object(H.a)(a)),a.getBarChartOptions=a.getBarChartOptions.bind(Object(H.a)(a)),a.selectDateRange=a.selectDateRange.bind(Object(H.a)(a)),a.selectXAxisOption=a.selectXAxisOption.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a.getDateRangeOptions=a.getDateRangeOptions.bind(Object(H.a)(a)),a.getXAxisOptions=a.getXAxisOptions.bind(Object(H.a)(a)),a.handleDateRangeChange=a.handleDateRangeChange.bind(Object(H.a)(a)),a.getCheckedInVehiclesCount=a.getCheckedInVehiclesCount.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){this.getParkingSlotStats(),this.getCheckedInVehiclesCount(),this.getParkingVehicleCount(this.state.parkingEventData.filter.fromDate,this.state.parkingEventData.filter.toDate,this.state.parkingEventData.filter.selectedXAxisOption)}},{key:"selectXAxisOption",value:function(e){var t=this,a=this.state.parkingEventData;a.filter.selectedXAxisOption=e,this.setState({parkingEventData:a},(function(){t.refresh()}))}},{key:"getXAxisOptions",value:function(){var e=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return e.selectXAxisOption("Hourly")}},"Hourly"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return e.selectXAxisOption("Daily")}},"Daily"))}},{key:"showCustomDateRangeModal",value:function(){this.setState({isOpencustomDateRangeModal:!0})}},{key:"selectDateRange",value:function(e,t){var a=this,n=this.state.isOpencustomDateRangeModal,r=this.state.parkingEventData;r.filter.selectedCustomDateRange=e;var i=W.extractFromToDate(r.filter.selectedCustomDateRange,t);r.filter.fromDate=i.from_date,r.filter.toDate=i.to_date,"Custom"===e&&(n=!1),this.setState({parkingEventData:r,isOpencustomDateRangeModal:n},(function(){a.refresh()}))}},{key:"handleDateRangeChange",value:function(e,t){var a=this;this.setState((function(){a.refresh()}))}},{key:"getParkingVehicleCount",value:function(e,t,a){var n=this,r=this.state,i=r.parkingEventData,l=r.loading;i.chartData={labels:[],datasets:[]},l.parkingEventData=!0,this.setState({loading:l}),W.getParkingVehicleCount(e,t,a).then((function(e){var t=e.data.checkInEvents,r=e.data.checkOutEvents,s=[];for(var o in r)"Hourly"===a&&(r[o].date=parseInt(r[o].date)),s.includes(r[o].date)||s.push(r[o].date);for(var c in t)"Hourly"===a&&(t[c].date=parseInt(t[c].date)),s.includes(t[c].date)||s.push(t[c].date);"Hourly"===a&&s.sort((function(e,t){return e-t})),"Daily"===a&&s.sort((function(e,t){return new Z.a(e).format("YYYY-MM-DD")-new Z.a(t).format("YYYY-MM-DD")}));var u={label:"Check In",data:[],borderColor:W.getColor(0)},h={label:"Check Out",data:[],borderColor:W.getColor(2)},d=0,m=-1;for(var g in s)d=0,(m=q.findIndex(t,"date",s[g]))>-1&&(d=t[m].vehicleCount),u.data.push(d),d=0,(m=q.findIndex(r,"date",s[g]))>-1&&(d=r[m].vehicleCount),h.data.push(d);i.chartData.labels=s,i.chartData.datasets.push(u),i.chartData.datasets.push(h),l.parkingEventData=!1,n.setState({parkingEventData:i,loading:l})})).catch((function(e){l.parkingEventData=!1,n.setState({parkingEventData:i,loading:l}),console.log(e)}))}},{key:"getParkingSlotStats",value:function(){var e=this,t=this.state,a=t.fo_data,n=t.loading;n.stats=!0,this.setState({loading:n}),jt.getParkingSlotStats().then((function(t){var r=t.data;a.datasets[0].data[0]=r.parkedSlots,a.datasets[0].data[1]=r.freeSlots,Rt.datasets[0].data[0]=r.parkedSlots-r.parkedMisalignedSlots,Rt.datasets[0].data[1]=r.parkedMisalignedSlots;var i={label:"Car",labels:["Parked Slots","Free Slots"],datasets:[]},l={data:[r.carsParked,r.carSlots-r.carsParked],label:"Car",labels:["Parked Slots","Free Slots"],backgroundColor:[W.getColor(0),W.getColor(2)]};i.datasets.push(Object(It.cloneDeep)(l)),l={label:"Bike",data:[r.bikesParked,r.bikeSlots-r.bikesParked],labels:["Parked Slots","Free Slots"],backgroundColor:[W.getColor(0),W.getColor(2)]},i.datasets.push(Object(It.cloneDeep)(l)),n.stats=!1,e.setState({fo_data:a,cb_data:i,loading:n})})).catch((function(t){n.stats=!1,e.setState({loading:n}),console.log(t)}))}},{key:"getBarChartOptions",value:function(e){var t="Day";"Hourly"===this.state[e].filter.selectedXAxisOption&&(t="Hours(24-hour)");var a="Vehicles";return"parkingEventData"===e&&(a="Entries"),{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{position:"right"},scales:{xAxes:[{stacked:!1,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:t}}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:a}}]}}}},{key:"getCheckedInVehiclesCount",value:function(){var e=this,t=this.state,a=t.entryexit_data,n=t.loading;n.checkInEventsData=!0,this.setState({loading:n}),jt.getCheckedInVehiclesCount().then((function(t){var r=t.data;a.datasets[0].data[0]=r.checkedInCars,a.datasets[0].data[1]=r.checkedInBikes,n.checkInEventsData=!1,e.setState({entryexit_data:a,loading:n})})).catch((function(t){n.checkInEventsData=!1,e.setState({loading:n}),console.log(t)}))}},{key:"getDateRangeOptions",value:function(){var e=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return e.selectDateRange("Today")}},"Today"),c.a.createElement(m.a.Item,{key:"2",onClick:function(){return e.selectDateRange("Yesterday")}},"Yesterday"),c.a.createElement(m.a.Item,{key:"3",onClick:function(){return e.selectDateRange("This week")}},"This week"),c.a.createElement(m.a.Item,{key:"4",onClick:function(){return e.selectDateRange("Last week")}},"Last week"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return e.selectDateRange("This month")}},"This month"),c.a.createElement(m.a.Item,{key:"6",onClick:function(){return e.selectDateRange("This year")}},"This year"),c.a.createElement(m.a.Item,{key:"7",onClick:function(){return e.selectDateRange("Last year")}},"Last year"),c.a.createElement(m.a.Item,{onClick:function(){return e.showCustomDateRangeModal()}},"Custom"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.fo_data,n=t.cb_data,r=(t.parkingEventData,t.loading);this.getBarChartOptions("parkingEventData");return c.a.createElement("div",null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:8},sm:{span:24},xs:{span:24}},c.a.createElement(B.a,null,r.stats?c.a.createElement(wt.a,{active:!0}):c.a.createElement(J.d,{data:a,options:{title:{display:!0,text:"Free/Occupied Slots"},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"},formatter:function(e,t){return e+" Slots"}}}}}))),c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:8},sm:{span:24},xs:{span:24}},c.a.createElement(B.a,null,r.stats?c.a.createElement(wt.a,{active:!0}):c.a.createElement(J.b,{data:n,options:{circumference:Math.PI,rotation:Math.PI,title:{display:!0,text:" Car/Bike"},tooltips:{callbacks:{title:function(e,t){return t.datasets[e[0].datasetIndex].label},label:function(e,t){var a=t.datasets[e.datasetIndex].labels[e.index];return a+": "+t.datasets[e.datasetIndex].data[e.index]}}},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"},formatter:function(e,t){return t.dataset.label+": "+e}}}}}))),c.a.createElement(te.a,{xl:{span:8},lg:{span:8},md:{span:8},sm:{span:24},xs:{span:24}},c.a.createElement(B.a,null,r.stats?c.a.createElement(wt.a,{active:!0}):c.a.createElement(J.d,{data:Rt,options:{title:{display:!0,text:"Aligned/Mis-Aligned Occupied Slots"},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"},formatter:function(e,t){return e+" Slots"}}}}})))),c.a.createElement(Y.a,{onCancel:this.handleCancel,title:"Custom Date Range",visible:!!this.state.isOpencustomDateRangeModal,footer:[]},c.a.createElement(xt,{onChange:function(t){return e.selectDateRange("Custom",t)}})))}}]),t}(o.Component),zt=a(666),Mt=a(230),At=a.n(Mt),Nt=a(80),Ft=me.a.Option,Ht=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleLoad=function(){a.setState({image:a.image})},a.state={image:null},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return c.a.createElement(Nt.Image,{x:this.props.x,y:this.props.y,image:this.state.image,ref:function(t){e.imageNode=t}})}}]),t}(o.Component),Vt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={slots:{},loading:!0,biketotal:0,cartotal:0,bikefull:0,carfull:0,img:"/public/apms/lot/lucknow/image.jpg",baseimg:"/public/apms/lot/lucknow/image.jpg"},a.togglerRef=c.a.createRef(),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.intervalID=setInterval(this.refresh.bind(this),3e4),this.ptTimer=setInterval(this.setOccupied.bind(this),1e3),this.refresh()}},{key:"setOccupied",value:function(){var e=this.state.slots;e.forEach((function(e){e.free||e.lastOccupiedSeconds++})),this.setState({slots:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID),clearInterval(this.ptTimer)}},{key:"refresh",value:function(){var e=this;jt.getSlots().then((function(t){var a=0,n=0,r=0,i=0;t.data.forEach((function(e,t){switch(e.vehicleType){case"Bike":a++,e.free||r++;break;case"Car":n++,e.free||i++}})),e.setState({slots:t.data,loading:!1,carfull:i,cartotal:n,bikefull:r,biketotal:a,img:e.state.baseimg+"?rng="+Math.random()}),At.a.parse(e.props.location.search).edit&&e.togglerRef.current.refresh(t.data)}))}},{key:"getText",value:function(e){return e.free?e.misaligned?e.name+" (Misaligned)":e.name:e.misaligned?e.name+" ("+this.fancyTime(e.lastOccupiedSeconds)+")  (Misaligned)":e.name+" ("+this.fancyTime(e.lastOccupiedSeconds)+") "}},{key:"fancyTime",value:function(e){return e<=60?e+"s":e<=3600?Math.floor(e/60)+"m"+e%60+"s":void 0}},{key:"render",value:function(){var e=this,t=this.state.loading,a=this.state.slots,n=this.state.biketotal,r=this.state.cartotal,i=this.state.bikefull,l=this.state.carfull,s=this.state.img;if(console.log("R",l,r,i,n),t||!a)return c.a.createElement("div",null,"Loading...");var o=At.a.parse(this.props.location.search);return c.a.createElement("div",null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:12},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement(Nt.Stage,{width:1280,height:724},c.a.createElement(Nt.Layer,null,c.a.createElement(Ht,{src:s}),Object.keys(a).map((function(e){return c.a.createElement(Nt.Line,{key:e,points:[a[e].p1x,a[e].p1y,a[e].p2x,a[e].p2y,a[e].p3x,a[e].p3y,a[e].p4x,a[e].p4y],stroke:"red",closed:!0})})),Object.keys(a).map((function(t){return c.a.createElement(Nt.Group,null,c.a.createElement(Nt.Label,{x:a[t].x,y:a[t].y},c.a.createElement(Nt.Tag,{fill:"black",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round",shadowColor:"black"}),c.a.createElement(Nt.Text,{text:e.getText(a[t]),fontFamily:"Calibri",fontSize:12,padding:3,fill:"white"})),c.a.createElement(Nt.Star,{key:t,x:a[t].x,y:a[t].y,numPoints:20,innerRadius:10,outerRadius:10,fill:a[t].free?"green":a[t].misaligned?"blue":"red",opacity:1,rotation:30}))})))))),c.a.createElement(ee.a,null,c.a.createElement(te.a,null,o.edit&&c.a.createElement(Yt,{ref:this.togglerRef,slots:a}))))}}]),t}(o.Component),Yt=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(i.a)(this,Object(l.a)(t).call(this,e));var r={};return e.slots.forEach((function(e){r[e.name]=e})),a.state={slots:r,selectedSlot:"C1",ss:r.C1},a.handleChange=a.handleChange.bind(Object(H.a)(a)),a.updateSlot=a.updateSlot.bind(Object(H.a)(a)),a.onAlignmentChange=a.onAlignmentChange.bind(Object(H.a)(a)),a.onFreeChange=a.onFreeChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"refresh",value:function(e){var t={};e.forEach((function(e){t[e.name]=e}));var a=t[this.state.selectedSlot];this.setState({slots:t,ss:a})}},{key:"handleChange",value:function(e){var t=this.state.slots[this.state.selectedSlot];this.setState({selectedSlot:e,ss:t})}},{key:"onAlignmentChange",value:function(e){var t=this.state.ss;t.misaligned=e,this.setState({ss:t})}},{key:"onFreeChange",value:function(e){var t=this.state.ss;t.free=e,this.setState({ss:t})}},{key:"updateSlot",value:function(){jt.updateSlot(this.state.ss)}},{key:"render",value:function(){var e=this.state.ss,t=this.props.slots;return c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Slot"),c.a.createElement("th",null,"Free"),c.a.createElement("th",null,"MisAligned"),c.a.createElement("th",null,"\xa0")),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(me.a,{onChange:this.handleChange,value:e.name},(t||[]).map((function(e,t){return c.a.createElement(Ft,{value:e.name},e.name)})))),c.a.createElement("td",null,c.a.createElement(zt.a,{checked:e.free,onChange:this.onFreeChange})),c.a.createElement("td",null,c.a.createElement(zt.a,{checked:e.misaligned,onChange:this.onAlignmentChange})),c.a.createElement("td",null,c.a.createElement(U.a,{onClick:this.updateSlot},"GO")))))}}]),t}(o.Component),Bt=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getParkingEventsReport",value:function(e){var t={method:"POST",headers:C(),responseType:"blob",data:JSON.stringify(e),url:O+"api/report/parkingevents"};return k(t)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),Xt=me.a.Option,Ut=V.a.RangePicker,_t=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleCancel=function(e){a.setState({isOpencustomDateRangeModal:""})},a.state={isOpencustomDateRangeModal:"",atcc:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"All Entry-Exit",fromDate:Z()().startOf("day").toDate(),toDate:Z()().endOf("day").toDate(),reportType:"CSV",filterType:"inout"},chartData:{labels:[],datasets:[]}},incident:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"Hourly",fromDate:{},toDate:{}},chartData:{labels:[],datasets:[]}},downloading:!1},a.selectDateRange=a.selectDateRange.bind(Object(H.a)(a)),a.selectXAxisOption=a.selectXAxisOption.bind(Object(H.a)(a)),a.getDateRangeOptions=a.getDateRangeOptions.bind(Object(H.a)(a)),a.getXAxisOptions=a.getXAxisOptions.bind(Object(H.a)(a)),a.handleChange=a.handleChange.bind(Object(H.a)(a)),a.downloadReport=a.downloadReport.bind(Object(H.a)(a)),a.handleChangeReportType=a.handleChangeReportType.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){var t=Object(Re.a)({},this.state.atcc);t.filter.filterType=e,this.setState({atcc:t})}},{key:"handleChangeReportType",value:function(e){var t=Object(Re.a)({},this.state.atcc);t.filter.reportType=e,this.setState({atcc:t})}},{key:"showCustomDateRangeModal",value:function(e){this.setState({isOpencustomDateRangeModal:e})}},{key:"selectDateRange",value:function(e,t,a){var n,r=this.state.isOpencustomDateRangeModal,i=this.state[e];i.filter.selectedCustomDateRange=t;var l=W.extractFromToDate(i.filter.selectedCustomDateRange,a);i.filter.fromDate=l.from_date,i.filter.toDate=l.to_date,"Custom"===t&&(r=""),this.setState((n={},Object(F.a)(n,e,i),Object(F.a)(n,"isOpencustomDateRangeModal",r),n),(function(){}))}},{key:"downloadReport",value:function(){var e=this;this.setState({downloading:!0});var t=this.state.atcc.filter,a={fromDateString:Z()(t.fromDate).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t.toDate).format('YYYY-MM-DD HH:mm:ss"'),xAxis:t.selectedXAxisOption,reportType:t.reportType,filterType:t.filterType};Bt.getParkingEventsReport(a).then((function(a){e.setState({downloading:!1}),"CSV"==t.reportType?Object(Be.saveAs)(a.data,"parking-events.csv"):"JSON"==t.reportType&&Object(Be.saveAs)(a.data,"parking-events.json")})).catch((function(t){e.setState({downloading:!1})}))}},{key:"selectXAxisOption",value:function(e,t){var a=this.state[e];a.filter.selectedXAxisOption=t,this.setState(Object(F.a)({},e,a))}},{key:"getXAxisOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectXAxisOption(e,"All Entry-Exit")}},"All Entry-Exit"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectXAxisOption(e,"DayWise Summary")}},"DayWise Summary"))}},{key:"getDateRangeOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectDateRange(e,"Today")}},"Today"),c.a.createElement(m.a.Item,{key:"2",onClick:function(){return t.selectDateRange(e,"Yesterday")}},"Yesterday"),c.a.createElement(m.a.Item,{key:"3",onClick:function(){return t.selectDateRange(e,"This week")}},"This week"),c.a.createElement(m.a.Item,{key:"4",onClick:function(){return t.selectDateRange(e,"Last week")}},"Last week"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectDateRange(e,"This month")}},"This month"),c.a.createElement(m.a.Item,{key:"6",onClick:function(){return t.selectDateRange(e,"This year")}},"This year"),c.a.createElement(m.a.Item,{key:"7",onClick:function(){return t.selectDateRange(e,"Last year")}},"Last year"),c.a.createElement(m.a.Item,{onClick:function(){return t.showCustomDateRangeModal(e)}},"Custom"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.atcc;t.incident,c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(Y.a,{onCancel:this.handleCancel,title:"Custom Date Range",visible:!!this.state.isOpencustomDateRangeModal,footer:[]},c.a.createElement(Ut,{onChange:function(t){return e.selectDateRange(e.state.isOpencustomDateRangeModal,"Custom",t)}}))),c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:8},lg:{span:6},md:{span:4},sm:{span:2},xs:{span:2}}),c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement(B.a,{title:c.a.createElement("div",null,"Parking Guidance Report")},c.a.createElement($.a,null,c.a.createElement($.a.Item,null,"Select Date Range",c.a.createElement(X.a,{overlay:function(){return e.getDateRangeOptions("atcc")}},c.a.createElement(U.a,{style:{width:"-webkit-fill-available"}},a.filter.selectedCustomDateRange?a.filter.selectedCustomDateRange:"Select",c.a.createElement(g.a,{type:"down"})))),c.a.createElement($.a.Item,null,"Report Type",c.a.createElement(X.a,{overlay:function(){return e.getXAxisOptions("atcc")}},c.a.createElement(U.a,{style:{width:"-webkit-fill-available"}},a.filter.selectedXAxisOption?a.filter.selectedXAxisOption:"Select"," ",c.a.createElement(g.a,{type:"down"})))),c.a.createElement($.a.Item,null,"Report Format",c.a.createElement(me.a,{defaultValue:"CSV",onChange:this.handleChangeReportType},c.a.createElement(Xt,{value:"CSV"},"CSV"),c.a.createElement(Xt,{value:"JSON"},"JSON"))),c.a.createElement($.a.Item,null,c.a.createElement(U.a,{type:"primary",htmlType:"submit",onClick:this.downloadReport,block:!0,loading:this.state.downloading},"Download")))))))}}]),t}(o.Component),Zt=ue.a.Column,Wt=ne.a.Search,qt=c.a.createElement(g.a,{type:"loading",style:{fontSize:24},spin:!0}),Jt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:{checkIn:!1,checkOut:!1},vehicleLastParkingEvent:{},filter:{page:1,pageSize:10,loading:!1,apmsresponse:{},vehicleNo:""}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.copyVehicleNo=a.copyVehicleNo.bind(Object(H.a)(a)),a.getEventsList=a.getEventsList.bind(Object(H.a)(a)),a.addCheckIn=a.addCheckIn.bind(Object(H.a)(a)),a.onLprInputChange=a.onLprInputChange.bind(Object(H.a)(a)),a.addCheckOut=a.addCheckOut.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"refresh",value:function(){var e=this.state.filter;e.page=1,this.getEventsList(e),e.vehicleNo&&e.vehicleNo.length>2&&this.getEventsStatus(e.vehicleNo)}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"onLprInputChange",value:function(e){var t=this.state.filter;t.vehicleNo=e.target.value,this.setState({filter:t}),t.vehicleNo&&t.vehicleNo.length>2&&this.getEventsStatus(t.vehicleNo)}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.getEventsList(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.getEventsList(a)}},{key:"copyVehicleNo",value:function(e){var t=this.state.filter;t.vehicleNo=e,this.setState({filter:t}),t.vehicleNo&&t.vehicleNo.length>2&&this.getEventsStatus(t.vehicleNo)}},{key:"addCheckIn",value:function(){var e=this,t=this.state.filter.vehicleNo,a=this.state.loading;t&&(a.checkIn=!0,this.setState({loading:a}),jt.checkIn(t).then((function(t){e.refresh(),a.checkIn=!1,e.setState({loading:a})})).catch((function(t){a.checkIn=!1,e.setState({loading:a}),alert("Something went wrong")})))}},{key:"addCheckOut",value:function(){var e=this,t=this.state.filter.vehicleNo,a=this.state.loading;t&&(a.checkOut=!0,this.setState({loading:a}),jt.checkOut(t).then((function(t){a.checkOut=!1,e.setState({loading:a}),e.refresh()})).catch((function(t){a.checkOut=!1,e.setState({loading:a}),alert("Something went wrong")})))}},{key:"getEventsStatus",value:function(e){var t=this;jt.getEventStatus(e).then((function(e){t.setState({vehicleLastParkingEvent:e.data})})).catch((function(e){alert("Something went wrong")}))}},{key:"getEventsList",value:function(e){var t=this;e.loading=!0,this.setState({filter:e}),jt.getEvents(e).then((function(a){for(var n in e.loading=!1,e.apmsresponse=a.data,e.apmsresponse.events)e.apmsresponse.events[n].timeDiff=t.getTimeDifference(e.apmsresponse.events[n]);t.setState({filter:e})})).catch((function(a){e.loading=!1,t.setState({hasError:!0}),alert("Something went wrong")}))}},{key:"getTimeDifference",value:function(e){var t=Z()(e.checkIn),a=Z()(e.checkOut);if(t&a)return Z.a.utc(Z()(a,"DD/MM/YYYY HH:mm").diff(Z()(t,"DD/MM/YYYY HH:mm"))).format("HH:mm")}},{key:"isEmpty",value:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==typeof e)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}},{key:"getEventId",value:function(){var e=Object(Re.a)({},this.state.filter);return!e.loading&&e.apmsresponse.events&&e.apmsresponse.events.length>0?parseInt(e.apmsresponse.events[0].id):0}},{key:"render",value:function(){var e=this,t=this.state.filter,a=this.state.filter.apmsresponse.events,n=this.state.filter.vehicleNo,r=this.state.vehicleLastParkingEvent,i=this.state.loading,l=this.state.filter.apmsresponse.totalPages*this.state.filter.apmsresponse.pageSize,s={showSizeChanger:!1,showQuickJumper:!1,showLessItems:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:l},o=Object(Re.a)({},s,{total:l,current:this.state.filter.page,pageSizes:this.state.filter.pageSize}),u=!0,h=!0;return(this.isEmpty(r)||r.checkOut)&&n&&(u=!1),this.isEmpty(r)||r.checkOut||!n||(h=!1),c.a.createElement("div",null,c.a.createElement("h3",null,"Parking Event"),c.a.createElement(B.a,null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:{span:12},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement("img",{width:"440",height:"260",src:"/public/apms/parking/event/"+r.id+"/image.jpg"})),c.a.createElement(te.a,{xl:{span:12},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement(Wt,{allowClear:!0,value:n,placeholder:"Enter Vehicle No.",enterButton:"Search",onChange:this.onLprInputChange,size:"large",onSearch:function(){return e.onPageChange(1,t.pageSize)}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(U.a,{type:"primary",size:"large",block:"false",icon:"arrow-down",loading:i.checkIn,disabled:u,onClick:function(){return e.addCheckIn()}},"Entry"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(U.a,{type:"primary",size:"large",block:"false",icon:"arrow-up",loading:i.checkOut,disabled:h,onClick:function(){return e.addCheckOut()}},"Exit"))),c.a.createElement("br",null)),this.state.filter.loading?c.a.createElement(et.a,{indicator:qt}):c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:a,pagination:o},c.a.createElement(Zt,{title:"Vehicle no.",dataIndex:"vehicleNo",key:"vehicleNo",render:function(t){return c.a.createElement(U.a,{onClick:function(){return e.copyVehicleNo(t)}},t)}}),c.a.createElement(Zt,{title:"Entry-time",dataIndex:"checkIn",key:"checkIn",render:function(e){return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(He.a,{format:"LLL"},e)),c.a.createElement(He.a,{fromNow:!0},e))}}),c.a.createElement(Zt,{title:"Exit-time",dataIndex:"checkOut",key:"checkOut",render:function(e){return e?c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(He.a,{format:"LLL"},e)),c.a.createElement(He.a,{fromNow:!0},e)):""}}),c.a.createElement(Zt,{title:"Time-diff(HH:mm)",render:function(e,t){return t.timeDiff}})))))}}]),t}(o.Component),Qt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,layout:"list",filter:{page:1,pageSize:10}},a.onFromDateChange=a.onFromDateChange.bind(Object(H.a)(a)),a.onFromTimeChange=a.onFromTimeChange.bind(Object(H.a)(a)),a.onToDateChange=a.onToDateChange.bind(Object(H.a)(a)),a.onToTimeChange=a.onToTimeChange.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"refresh",value:function(){this.props.handleRefresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"onFromDateChange",value:function(e){var t=this.state.filter;t.fromDate=null!=e?e.format("YYYY-MM-DD"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onFromTimeChange",value:function(e){var t=this.state.filter;t.fromTime=null!=e?e.format("HH:mm:ss"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onToDateChange",value:function(e){var t=this.state.filter;t.toDate=null!=e?e.format("YYYY-MM-DD"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"onToTimeChange",value:function(e){var t=this.state.filter;t.toTime=null!=e?e.format("HH:mm:ss"):null,this.setState({filter:t}),this.props.handleFilterChange(t)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("span",null,"From: "),c.a.createElement(V.a,{onChange:this.onFromDateChange}),"\xa0\xa0\xa0\xa0\xa0",c.a.createElement(Me.a,{minuteStep:15,secondStep:60,onChange:this.onFromTimeChange}),"\xa0\xa0\xa0\xa0\xa0",c.a.createElement("span",null,"To: "),c.a.createElement(V.a,{onChange:this.onToDateChange}),"\xa0\xa0\xa0\xa0\xa0",c.a.createElement(Me.a,{minuteStep:15,secondStep:60,onChange:this.onToTimeChange}),"\xa0\xa0\xa0\xa0\xa0",c.a.createElement(U.a,{onClick:function(){e.refresh()}},c.a.createElement(g.a,{type:"reload"}),"Reload"))}}]),t}(o.Component),Gt=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getPeopleData",value:function(e){return k.post("/api/apc/pplData",e)}},{key:"archiveEvent",value:function(e){return k.delete("/api/apc/"+e.id)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),Kt=K.a.Paragraph,$t=ue.a.Column,ea=Pe.a.Panel,ta=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,events:{},filter:{page:1,pageSize:24}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(H.a)(a)),a.onEventIdInputChange=a.onEventIdInputChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refresh(a)}},{key:"refresh",value:function(e){var t=this;e||(e=this.state.filter),this.setState({loading:!0}),Gt.getPeopleData(e).then((function(a){var n=a.data;e.pageSize=n.pageSize,e.currentPage=n.pageNumber,e.totalPages=n.totalPages,t.setState({filter:e,loading:!1,events:n.list})})).catch((function(e){he.a.error("Error, something went wrong!!")}))}},{key:"handleFilterChange",value:function(e){this.setState({filter:e})}},{key:"handleRefresh",value:function(){this.refresh(this.state.refresh)}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refresh(a)}},{key:"archiveEvent",value:function(e){var t=this;Gt.archiveEvent(e).then((function(){t.refresh()}))}},{key:"onEventIdInputChange",value:function(e){var t=this.state.filter;t.eventId=e.target.value,console.log(t),this.setState({filter:t})}},{key:"render",value:function(){var e=this.state.filter.eventId;return c.a.createElement("div",null,c.a.createElement(Pe.a,{bordered:!0,defaultActiveKey:["1"]},c.a.createElement(ea,{header:"Filter",key:"1"},"Event Id: ",c.a.createElement(ne.a,{value:e,style:{width:"200px"},onChange:this.onEventIdInputChange})," ",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Qt,{handleRefresh:this.refresh,filter:this.state.filter,handleFilterChange:this.handleFilterChange}))),c.a.createElement("div",null,this.renderTable()))}},{key:"renderTable",value:function(){if(this.state.loading||!this.state.events||0===this.state.events.length)return c.a.createElement(Le.a,{description:!1});var e=this.state.events,t=this.state.filter.totalPages*this.state.filter.pageSize,a={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:t},n=Object(Re.a)({},a,{total:t,current:this.state.filter.currentPage,pageSize:this.state.filter.pageSize});return c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:e,pagination:n},c.a.createElement($t,{title:"ID",dataIndex:"eventId",key:"eventId",render:function(e){return c.a.createElement(Kt,{strong:!0,copyable:!0},e)}}),c.a.createElement($t,{title:"Date",dataIndex:"eventDate",key:"eventDate",render:function(e){return c.a.createElement(He.a,{format:"L"},e)}}),c.a.createElement($t,{title:"Archived",dataIndex:"archived",key:"archived",render:function(e){return c.a.createElement("p",null,e?"Archived":"Active")}}),c.a.createElement($t,{title:"Direction",dataIndex:"direction",key:"direction",render:function(e){return e}})))}}]),t}(o.Component),aa=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getApcPeopleCount",value:function(e,t,a){var n={fromDateString:Z()(e).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t).format('YYYY-MM-DD HH:mm:ss"'),xAxis:a};return k.post("/api/apc/dashboard/peoplecount",n)}},{key:"getApcPeakHour",value:function(e,t){var a={fromDateString:Z()(e).format("YYYY-MM-DD HH:mm:ss"),toDateString:Z()(t).format('YYYY-MM-DD HH:mm:ss"')};return k.post("/api/apc/dashboard/peakhour",a)}},{key:"getColor",value:function(e){return["#e83e8c","#dc3545","#007bff","#6610f2","#fd7e14","#ffc107","#28a745","#20c997","#17a2b8","#6c757d","#343a40","#6f42c1"][e]||this.getRandomColor()}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"extractFromToDate",value:function(e,t){var a,n,r;switch(e){case"Today":n=(a=Z()()).startOf("day").toDate(),r=a.endOf("day").toDate();break;case"Yesterday":n=(a=Z()().subtract(1,"days")).startOf("day").toDate(),r=a.endOf("day").toDate();break;case"This week":n=(a=Z()()).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"This month":n=(a=Z()()).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"This quarter":n=(a=Z()()).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"This year":n=(a=Z()()).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Last week":n=(a=Z()().subtract(1,"weeks")).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"Last month":n=(a=Z()().subtract(1,"months")).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"Last quarter":n=(a=Z()().subtract(1,"quarters")).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"Last year":n=(a=Z()().subtract(1,"years")).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Second Last week":n=(a=Z()().subtract(2,"weeks")).startOf("week").toDate(),r=a.endOf("week").toDate();break;case"Second Last month":n=(a=Z()().subtract(2,"months")).startOf("month").toDate(),r=a.endOf("month").toDate();break;case"Second Last quarter":n=(a=Z()().subtract(2,"quarters")).startOf("quarter").toDate(),r=a.endOf("quarter").toDate();break;case"Second Last year":n=(a=Z()().subtract(2,"years")).startOf("year").toDate(),r=a.endOf("year").toDate();break;case"Custom":n=t[0].toDate(),r=t[1].toDate()}return{from_date:n,to_date:r}}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),na=V.a.RangePicker,ra=ue.a.Column,ia=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleCancel=function(e){a.setState({isOpencustomDateRangeModal:""})},a.state={isOpencustomDateRangeModal:"",apc:{filter:{selectedCustomDateRange:"Today",selectedXAxisOption:"Hourly",fromDate:{},toDate:{}},chartData:{labels:[],datasets:[]}},peakhour:{filter:{selectedCustomDateRange:"Today",fromDate:{},toDate:{}},chartData:{labels:[],datasets:[]}},peakHourEvents:[]},a.getApcPeopleCount=a.getApcPeopleCount.bind(Object(H.a)(a)),a.getApcPeakHour=a.getApcPeakHour.bind(Object(H.a)(a)),a.getBarChartOptions=a.getBarChartOptions.bind(Object(H.a)(a)),a.selectDateRange=a.selectDateRange.bind(Object(H.a)(a)),a.selectXAxisOption=a.selectXAxisOption.bind(Object(H.a)(a)),a.refresh=a.refresh.bind(Object(H.a)(a)),a.getDateRangeOptions=a.getDateRangeOptions.bind(Object(H.a)(a)),a.getXAxisOptions=a.getXAxisOptions.bind(Object(H.a)(a)),a.handleDateRangeChange=a.handleDateRangeChange.bind(Object(H.a)(a)),a.refreshPeakHour=a.refreshPeakHour.bind(Object(H.a)(a)),a.refreshApcChart=a.refreshApcChart.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"showCustomDateRangeModal",value:function(e){this.setState({isOpencustomDateRangeModal:e})}},{key:"selectDateRange",value:function(e,t,a){var n=this,r=this.state.isOpencustomDateRangeModal,i=this.state[e];i.filter.selectedCustomDateRange=t;var l,s=aa.extractFromToDate(i.filter.selectedCustomDateRange,a);if(i.filter.fromDate=s.from_date,i.filter.toDate=s.to_date,"Custom"===t&&(r=""),"peakhour"===e)this.setState((l={},Object(F.a)(l,e,i),Object(F.a)(l,"isOpencustomDateRangeModal",r),l),(function(){n.refreshPeakHour()}));else if("apc"===e){var o;this.setState((o={},Object(F.a)(o,e,i),Object(F.a)(o,"isOpencustomDateRangeModal",r),o),(function(){n.refreshApcChart()}))}}},{key:"selectXAxisOption",value:function(e,t){var a=this,n=this.state[e];n.filter.selectedXAxisOption=t,"peakhour"===e?this.setState(Object(F.a)({},e,n),(function(){a.refreshPeakHour()})):"apc"===e&&this.setState(Object(F.a)({},e,n),(function(){a.refreshApcChart()}))}},{key:"refresh",value:function(){this.refreshPeakHour(),this.refreshApcChart()}},{key:"refreshApcChart",value:function(){this.getApcPeopleCount(this.state.apc.filter.fromDate,this.state.apc.filter.toDate,this.state.apc.filter.selectedXAxisOption)}},{key:"refreshPeakHour",value:function(){this.getApcPeakHour(this.state.peakhour.filter.fromDate,this.state.peakhour.filter.toDate)}},{key:"getApcPeakHour",value:function(e,t){var a=this,n=this.state.peakhour;n.chartData={labels:[],datasets:[]},aa.getApcPeakHour(e,t).then((function(e){var t=e.data;if(t&&t.length>0){var r=[],i=[];for(var l in t)r.push(t[l].duration),i.push(t[l].peopleCountPercentage);n.chartData.labels=r;var s=0,o={data:[],backgroundColor:[],hoverBackgroundColor:[]};for(var c in i){var u=aa.getColor(s);o.backgroundColor.push(u),o.hoverBackgroundColor.push("black"),o.data.push(i[c]),s++}n.chartData.datasets.push(o)}a.setState({peakhour:n,peakHourEvents:t})})).catch((function(e){console.log(e)}))}},{key:"getApcPeopleCount",value:function(e,t,a){var n=this,r=this.state.apc;r.chartData={labels:[],datasets:[]},aa.getApcPeopleCount(e,t,a).then((function(e){var t=e.data;if(t&&t.length>0){var a=[],i=[];for(var l in t)a.push(t[l].date),i.push(t[l].peopleCount);r.chartData.labels=a;var s={label:"No Of People",data:[],backgroundColor:"#e83e65"};for(var o in i)s.data.push(i[o]);r.chartData.datasets.push(s)}n.setState({apc:r})})).catch((function(e){console.log(e)}))}},{key:"handleDateRangeChange",value:function(e,t){var a=this;e[0].toDate(),e[1].toDate();this.setState((function(){a.refresh()})),console.log(e,t)}},{key:"getXAxisOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectXAxisOption(e,"Hourly")}},"Hourly"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectXAxisOption(e,"Daily")}},"Daily"))}},{key:"getDateRangeOptions",value:function(e){var t=this;return c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1",onClick:function(){return t.selectDateRange(e,"Today")}},"Today"),c.a.createElement(m.a.Item,{key:"2",onClick:function(){return t.selectDateRange(e,"Yesterday")}},"Yesterday"),c.a.createElement(m.a.Item,{key:"3",onClick:function(){return t.selectDateRange(e,"This week")}},"This week"),c.a.createElement(m.a.Item,{key:"4",onClick:function(){return t.selectDateRange(e,"Last week")}},"Last week"),c.a.createElement(m.a.Item,{key:"5",onClick:function(){return t.selectDateRange(e,"This month")}},"This month"),c.a.createElement(m.a.Item,{key:"6",onClick:function(){return t.selectDateRange(e,"This year")}},"This year"),c.a.createElement(m.a.Item,{key:"7",onClick:function(){return t.selectDateRange(e,"Last year")}},"Last year"),c.a.createElement(m.a.Item,{onClick:function(){return t.showCustomDateRangeModal(e)}},"Custom"))}},{key:"getBarChartOptions",value:function(e){var t="Day";"Hourly"===this.state[e].filter.selectedXAxisOption&&(t="Hours(24-hour)");return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{position:"right"},scales:{xAxes:[{stacked:!0,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:t}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"No Of People"}}]},plugins:{datalabels:{display:!0}}}}},{key:"render",value:function(){var e=this,t=this.state,a=t.apc,n=t.peakhour,r=this.state.peakHourEvents,i=this.getBarChartOptions("apc");return c.a.createElement("div",{style:{background:"#ECECEC",padding:"5px"}},c.a.createElement(ee.a,null,c.a.createElement(B.a,{title:c.a.createElement("div",null,"Peak Hour \xa0",c.a.createElement(X.a,{overlay:function(){return e.getDateRangeOptions("peakhour")}},c.a.createElement(U.a,null,n.filter.selectedCustomDateRange?n.filter.selectedCustomDateRange:"Select",c.a.createElement(g.a,{type:"down"}))))},c.a.createElement(te.a,{xl:{span:12},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement(J.b,{data:n.chartData,options:{title:{display:!0,text:"Peak Hour"},maintainAspectRatio:!0,plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:5,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"},formatter:function(e,t){return e+" % "}}},rotation:1*Math.PI,circumference:1*Math.PI}})),c.a.createElement(te.a,{xl:{span:12},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24}},c.a.createElement("div",null,c.a.createElement(ue.a,{dataSource:r,bordered:!0,size:"small",pagination:!1},c.a.createElement(ra,{title:"Duration",dataIndex:"duration",key:"duration",render:function(e){return e}}),c.a.createElement(ra,{title:"No Of People",dataIndex:"peopleCount",key:"peopleCount",render:function(e){return e}})))))),c.a.createElement("div",null,c.a.createElement(Y.a,{onCancel:this.handleCancel,title:"Custom Date Range",visible:!!this.state.isOpencustomDateRangeModal,footer:[]},c.a.createElement(na,{onChange:function(t){return e.selectDateRange(e.state.isOpencustomDateRangeModal,"Custom",t)}}))),c.a.createElement("div",null,c.a.createElement(B.a,{title:c.a.createElement("div",null,"People Counting \xa0",c.a.createElement(X.a,{overlay:function(){return e.getDateRangeOptions("apc")}},c.a.createElement(U.a,null,a.filter.selectedCustomDateRange?a.filter.selectedCustomDateRange:"Select",c.a.createElement(g.a,{type:"down"}))),"\xa0",c.a.createElement(X.a,{overlay:function(){return e.getXAxisOptions("apc")}},c.a.createElement(U.a,null,a.filter.selectedXAxisOption?a.filter.selectedXAxisOption:"Select"," ",c.a.createElement(g.a,{type:"down"}))))},c.a.createElement(J.c,{data:a.chartData,options:i}))))}}]),t}(o.Component),la=(a(292),a(293),a(172)),sa=a(171),oa=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAtccData",value:function(e){return k.put("/api/atcc/raw",e)}},{key:"getAtccSummaryData",value:function(e,t){return k.put("/api/atcc/summary?interval="+t,e)}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),ca=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={data:[],loading:!0,pages:0,video:null},a.getRawData=a.getRawData.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"getRawData",value:function(e,t,a,n,r){this.setState({loading:!0});var i={page:e,pageSize:t,sorted:a,filtered:n};oa.getAtccData(i).then((function(e){r(e.data)}))}},{key:"render",value:function(){var e=this,t=this.state.data,a=this.state.pages,n=this.state.loading,r=[{Header:"Id",accessor:"id",id:"id"},{Header:"Type",accessor:"type",Cell:function(e){return c.a.createElement("span",{className:"number"},e.value)},id:"type"},{Header:"DateTime",accessor:"eventDate",id:"eventDate",Cell:function(e){return c.a.createElement("div",null,c.a.createElement(He.a,{format:"ll"},e.value)," ","|"," ",c.a.createElement(He.a,{format:"LTS"},e.value))}},{Header:"Lane",accessor:"lane",id:"lane"},{Header:"Direction",accessor:"direction",id:"direction",Cell:function(e){return c.a.createElement("span",null,0===e.value?"fwd":"rev")}},{Header:"Video",accessor:"vid",id:"video",Cell:function(t){return 0!==t.value?c.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.showVideo(t)}},"View"):c.a.createElement("div",null,"NA")}},{Header:"Screenshot",accessor:"id",id:"ss",Cell:function(t){return 0!==t.original.vid?c.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.showScreenshot(t)}},"View"):c.a.createElement("div",null,"NA")}},{Header:"Download",accessor:"vid",id:"dlvideo",Cell:function(t){return 0!==t.original.vid?c.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.downloadVideo(t)}},"Download"):c.a.createElement("div",null,"NA")}}];return c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(la.a,{ref:function(t){e.refRawDataTable=t},defaultPageSize:10,data:t,columns:r,pages:a,className:"-striped -highlight",loading:n,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,pageSizeOptions:[5,10,20,25,50,100],manual:!0,onFetchData:function(t,a){e.setState({loading:!0}),e.getRawData(t.page,t.pageSize,t.sorted,t.filtered,(function(a){e.setState({data:a.data,pages:Math.ceil(a.totalElements/parseFloat(t.pageSize)),loading:!1})}))}}),c.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.downloadCsv()}}," Download Data")),c.a.createElement(te.a,null,c.a.createElement("div",null,c.a.createElement(sa.Player,{fluid:!1,width:500,autoPlay:!0,playsInline:!0,poster:"/synlabs-logo.png",src:this.state.video}),c.a.createElement("img",{src:this.state.ss||"/synlabs-logo.png",alt:"event screenshot"}))))}},{key:"showVideo",value:function(e){this.setState({seek:0,video:"/public/atcc/video/"+e.original.id+"?r="+Math.random()})}},{key:"showScreenshot",value:function(e){this.setState({ss:"/public/atcc/screenshot/"+e.original.id+"?r="+Math.random()})}},{key:"downloadVideo",value:function(e){fetch("/api/atcc/video/"+e.original.vid).then((function(e){return e.blob()})).then((function(t){var a=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=a,n.setAttribute("download",e.original.tag+"-"+e.original.vid+"-video.mp4"),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)}))}},{key:"downloadCsv",value:function(){fetch("/api/atcc/csv/").then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","data.csv"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}))}}]),t}(o.Component),ua=(a(662),U.a.Group),ha=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={data:[],chartdata:null,loading:!0,pages:0,interval:"hour"},a.makeChartData=a.makeChartData.bind(Object(H.a)(a)),a.getSummaryData=a.getSummaryData.bind(Object(H.a)(a)),a.changeInterval=a.changeInterval.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"changeInterval",value:function(){var e=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({interval:t});case 2:this.refReactTable.fireFetchData();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSummaryData",value:function(e,t,a,n,r){var i=this;this.setState({loading:!0});var l={page:e,pageSize:t,sorted:a,filtered:n},s=this.state.interval;oa.getAtccSummaryData(l,s).then((function(e){return i.makeChartData(e.data),i.setState({loading:!1}),r?r(e.data):e}))}},{key:"makeChartData",value:function(e){for(var t={labels:[],datasets:[]},a=new Set,n=0;n<e.length;n++){"Month"!==e[n].span?a.add(e[n].date+" "+e[n].from):a.add(e[n].from+" - "+e[n].to);var r=-1;for(var i in t.datasets)if(t.datasets[i].label&&t.datasets[i].label===e[n].type){r=i;break}-1===r?t.datasets.push({label:e[n].type,data:[e[n].count]}):t.datasets[r].data.push(e[n].count)}t.labels=Array.from(a),this.setState({chartdata:t})}},{key:"render",value:function(){var e=this,t=this.state.chartdata,a=this.state.data,n=this.state.pages,r=this.state.loading,i=this.state.loading?c.a.createElement("div",null,"Loading..."):c.a.createElement(J.a,{data:t,options:{scales:{xAxes:[{stacked:!0,gridLines:{display:!1}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0}}]},legend:{display:!0},plugins:{colorschemes:{scheme:"brewer.Paired12"}}}}),l=[{Header:"Date",accessor:"date",id:"date"},{Header:"From",accessor:"from",id:"from"},{Header:"To",accessor:"to",id:"to"},{Header:"Span",accessor:"span",id:"span"},{Header:"Type",accessor:"type",id:"type",Cell:function(e){return c.a.createElement("span",{className:"number"},e.value)}},{Header:"Count",accessor:"count",id:"count"}];return c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(ua,null,c.a.createElement(U.a,{onClick:function(){return e.changeInterval("hour")}},"Hour"),c.a.createElement(U.a,{onClick:function(){return e.changeInterval("day")}},"Day"),c.a.createElement(U.a,{onClick:function(){return e.changeInterval("month")}},"Month")),c.a.createElement(la.a,{ref:function(t){e.refReactTable=t},defaultPageSize:10,data:a,columns:l,pages:n,className:"-striped -highlight",loading:r,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,pageSizeOptions:[5,10,20,25,50,100],manual:!0,onFetchData:function(t,a){e.setState({loading:!0}),e.getSummaryData(t.page,t.pageSize,t.sorted,t.filtered,(function(a){e.setState({data:a.data,pages:Math.ceil(a.totalElements/parseFloat(t.pageSize)),loading:!1})}))}}),c.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return e.downloadCsv()}}," Download Data")),c.a.createElement(te.a,null,c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),i))}},{key:"downloadCsv",value:function(){var e=this.state.interval;fetch("/csv/summary/"+e).then((function(e){return e.blob()})).then((function(t){var a=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=a,n.setAttribute("download",e+"-data.csv"),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)}))}}]),t}(o.Component),da=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getIncidents",value:function(e){return k.post("/api/vids/incidents",e)}},{key:"archiveIncident",value:function(e){return k.delete("/api/vids/"+e.id)}},{key:"updateIncident",value:function(e){return k.put("/api/vids/event",e)}},{key:"getIncidentImage",value:function(e){return k.get("/public/vids/image/"+e+"/image.jpg")}},{key:"getIncidentVideo",value:function(e){return k.get("/public/vids/video/"+e+"/video.mp4")}},{key:"getStats",value:function(){return k.get("/api/vids/stats")}}],[{key:"Instance",value:function(){return new e}}]),e}().Instance(),ma=K.a.Text,ga=ue.a.Column,pa=Pe.a.Panel,fa=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={visible:!0,loading:!0,layout:"list",incidents:{},playVideo:!1,filter:{page:1,pageSize:12}},a.refresh=a.refresh.bind(Object(H.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(H.a)(a)),a.handleLayoutChange=a.handleLayoutChange.bind(Object(H.a)(a)),a.handleRefresh=a.handleRefresh.bind(Object(H.a)(a)),a.onPageChange=a.onPageChange.bind(Object(H.a)(a)),a.onPageSizeChange=a.onPageSizeChange.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;da.getIncidents(this.state.filter).then((function(t){e.setState({incidents:t.data,loading:!1})}))}},{key:"refreshNow",value:function(){var e=this;da.getIncidents(this.state.filter).then((function(t){e.setState({incidents:t.data,loading:!1})}))}},{key:"archiveEvent",value:function(e){var t=this;da.archiveIncident(e).then((function(e){t.refresh()}))}},{key:"handleFilterChange",value:function(e){this.setState({filter:e})}},{key:"handleLayoutChange",value:function(e){this.setState({layout:e})}},{key:"handleOnClick",value:function(){this.setState({visible:!1})}},{key:"handleRefresh",value:function(){this.refresh()}},{key:"onPageChange",value:function(e,t){var a=this.state.filter;a.page=e,a.pageSize=t,this.refreshNow(a)}},{key:"onPageSizeChange",value:function(e,t){var a=this.state.filter;a.pageSize=t,this.refreshNow(a)}},{key:"render",value:function(){var e=this.state.layout;return c.a.createElement("div",null,c.a.createElement("h3",null,"Highway Incidents"),c.a.createElement(Pe.a,{bordered:!1,defaultActiveKey:["1"]},c.a.createElement(pa,{header:"Filter",key:"1"},c.a.createElement(Ne,{handleRefresh:this.refresh,filter:this.state.filter,layout:e,handleFilterChange:this.handleFilterChange,handleLayoutChange:this.handleLayoutChange}))),c.a.createElement("div",null,"table"===e?this.renderTable():this.renderGrid()))}},{key:"renderGrid",value:function(){var e=this;if(this.state.loading||!this.state.incidents||0===this.state.incidents.totalPage)return c.a.createElement(Le.a,{description:!1});var t=this.state.incidents.events,a=this.state.incidents.totalPages*this.state.incidents.pageSize;return c.a.createElement("div",{style:{background:"#ECECEC",padding:"5px"}},c.a.createElement(ee.a,null,t.map((function(t,a){return c.a.createElement(te.a,{xl:{span:8},lg:{span:12},md:{span:12},sm:{span:24},xs:{span:24},key:a},c.a.createElement(B.a,{style:{margin:"5px"},title:c.a.createElement("div",null,c.a.createElement(ae.a,{color:"#f50"},t.incidentType),c.a.createElement("div",null,c.a.createElement(ma,{code:!0},c.a.createElement(g.a,{type:"schedule"})," ",c.a.createElement(He.a,{format:"ll"},t.incidentDate)," ","|"," ",c.a.createElement(He.a,{format:"LTS"},t.incidentDate))),c.a.createElement("div",{style:{marginTop:"5px",textAlign:"left"}},c.a.createElement("div",null,c.a.createElement(ma,{code:!0},c.a.createElement(g.a,{type:"environment"})," ",t.feed.site," > ",t.feed.location," > ",t.feed.name)))),extra:c.a.createElement(X.a,{overlay:c.a.createElement(m.a,null,c.a.createElement(m.a.Item,{key:"1"},c.a.createElement("a",{title:"click here to download",href:"/public/vids/image/"+t.id+"/image.jpg",download:!0},c.a.createElement(g.a,{type:"download"})," "," Image")),c.a.createElement(m.a.Item,{key:"2"},c.a.createElement("a",{title:"click here to download",href:"/public/vids/video/"+t.id+"/image.mp4",download:!0},c.a.createElement(g.a,{type:"download"})," "," Video")),c.a.createElement(m.a.Item,{key:"3"},c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(t)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")))},c.a.createElement(U.a,null,"More ",c.a.createElement(g.a,{type:"down"}))),bordered:!0},c.a.createElement(sa.Player,{playsInline:!0,poster:"/public/vids/image/"+t.id+"/image.jpg",src:"/public/vids/video/"+t.id+"/video.mp4"})))}))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(ze.a,{onChange:this.onPageChange,onShowSizeChange:this.onPageSizeChange,showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:1,total:a,current:this.state.filter.page,pageSize:this.state.filter.pageSize})))}},{key:"renderTable",value:function(){var e=this;if(this.state.loading||!this.state.events||0===this.state.events.Total)return c.a.createElement(Le.a,{description:!1});var t=this.state.anprresponse.events,a=this.state.anprresponse.totalPages*this.state.anprresponse.pageSize,n={showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:this.onPageSizeChange,onChange:this.onPageChange,total:a},r=Object(Re.a)({},n,{total:a,current:this.state.filter.page,pageSize:this.state.filter.pageSize});return c.a.createElement(ue.a,{dataSource:t,pagination:r},c.a.createElement(ga,{title:"Location",dataIndex:"location",key:"location",render:function(e){return e}}),c.a.createElement(ga,{title:"Date",dataIndex:"eventDate",key:"eventDate",render:function(e){return c.a.createElement(He.a,{format:"L"},e)}}),c.a.createElement(ga,{title:"Time",dataIndex:"eventDate",key:"eventTime",render:function(e){return c.a.createElement(He.a,{format:"LTS"},e)}}),c.a.createElement(ga,{title:"LPR",dataIndex:"anprText",key:"anprText",render:function(e){return e}}),c.a.createElement(ga,{title:"LP Image",dataIndex:"id",key:"anprimage",render:function(e){return c.a.createElement("a",{title:"click here to download",href:"/public/anpr/lpr/"+e+"/image.jpg",download:!0},c.a.createElement("img",{alt:"event",src:"/public/anpr/lpr/"+e+"/image.jpg"}))}}),c.a.createElement(ga,{title:"direction",dataIndex:"direction",key:"direction",render:function(e){return e}}),c.a.createElement(ga,{title:"Helmet?",dataIndex:"helmet",key:"helmet",render:function(e){return e?c.a.createElement("span",null,"No"):c.a.createElement("span",null,"N/A")}}),c.a.createElement(ga,{title:"Speed",dataIndex:"speed",key:"speed",render:function(e){return c.a.createElement("span",null,e)}}),c.a.createElement(ga,{title:"Action",key:"action",render:function(t,a){return c.a.createElement(U.a,{type:"danger",onClick:function(){return e.archiveEvent(a)}},c.a.createElement(g.a,{type:"warning"})," ","Archive")}}))}}]),t}(o.Component),va={labels:[],datasets:[{data:[],backgroundColor:W.getColors()}]},Ea={labels:[],datasets:[{data:[],backgroundColor:W.getColors()}]},ba={labels:[],datasets:[{data:[],backgroundColor:W.getColors()}]},ya=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={flow_hourly_data:va,flow_today_data:Ea,incident_data:ba,loaded:!1},a.refresh=a.refresh.bind(Object(H.a)(a)),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;da.getStats().then((function(t){for(var a=[],n=[],r=0;r<t.data.onehourstats.length;r++){var i=t.data.onehourstats[r];a.push(i.key),n.push(i.count)}va.labels=a,va.datasets[0].data=n;for(var l=[],s=[],o=0;o<t.data.todaystats.length;o++){var c=t.data.todaystats[o];l.push(c.key),s.push(c.count)}Ea.labels=l,Ea.datasets[0].data=s;for(var u=[],h=[],d=0;d<t.data.incidents.length;d++){var m=t.data.incidents[d];u.push(m.key),h.push(m.count)}ba.labels=u,ba.datasets[0].data=h,e.setState({flow_today_data:Ea,flow_hourly_data:va,incident_data:ba,stats:t.data,loaded:!0}),e.setState({stats:t.data,loaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.flow_hourly_data,a=e.flow_today_data,n=e.incident_data,r=e.loaded,i=this.state.stats;return r?c.a.createElement("div",null,c.a.createElement(ee.a,null,c.a.createElement(te.a,{xl:12,lg:12,md:12,sm:24,xs:24},c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(B.a,null,c.a.createElement(J.d,{data:t,options:{title:{display:!0,text:"Traffic Flow (Last Hour)"},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"}}}}})))),c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(B.a,null,c.a.createElement(J.b,{data:a,options:{circumference:Math.PI,rotation:Math.PI,title:{display:!0,text:" Traffic Flow (Today)"},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"}}}}}))))),c.a.createElement(te.a,{xl:12,lg:12,md:12,sm:24,xs:24},c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(B.a,null,c.a.createElement(J.d,{data:n,options:{title:{display:!0,text:"Traffic Flow (Last Hour)"},plugins:{datalabels:{display:!0,color:"#fff",anchor:"end",align:"start",offset:-10,borderWidth:2,borderColor:"#fff",borderRadius:25,backgroundColor:function(e){return e.dataset.backgroundColor},font:{weight:"bold",size:"10"}}}}})))),c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement("div",null,c.a.createElement(B.a,null,c.a.createElement(ae.a,{color:"#f50"},i.trafficState.density),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("img",{width:500,height:300,alt:"Flow Image",src:"/public/vids/flowimage/"+i.trafficState.id+"/image.jpg"})))))))):c.a.createElement(Le.a,null)}}]),t}(o.Component),ka=d.a.Content,Ca=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={loggedIn:!1},w.EventBus.subscribe("login-logout",(function(e){return a.refreshMenu(e)})),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refreshMenu()}},{key:"refreshMenu",value:function(){this.setState({loggedIn:j.isLoggedIn()})}},{key:"render",value:function(){var e=this.state.loggedIn,t=e?c.a.createElement(T,null):null;e&&c.a.createElement(P,{isLoggedIn:e});return c.a.createElement("div",{className:"App"},c.a.createElement(d.a,{style:{minHeight:"100vh"}},t,c.a.createElement(d.a,null,c.a.createElement(ka,{style:{margin:"16px"}},c.a.createElement("div",{style:{padding:4}},c.a.createElement(A.b,{path:"/login",exact:!0,component:De}),c.a.createElement(N,{path:"/",exact:!0,component:G}),c.a.createElement(N,{path:"/incidents",exact:!0,component:$e}),c.a.createElement(N,{path:"/incidents/hotlisted",exact:!0,component:bt}),c.a.createElement(N,{path:"/incidents/repeated",exact:!0,component:ot}),c.a.createElement(N,{path:"/anpr",exact:!0,component:qe}),c.a.createElement(N,{path:"/anpr/masterdata",exact:!0,component:Dt}),c.a.createElement(N,{path:"/user",exact:!0,component:ve}),c.a.createElement(N,{path:"/feed",exact:!0,component:le}),c.a.createElement(N,{path:"/trigger",exact:!0,component:Te}),c.a.createElement(N,{path:"/device",exact:!0,component:ce}),c.a.createElement(N,{path:"/device/conf",exact:!0,component:ke}),c.a.createElement(N,{path:"/people-counting/events",exact:!0,component:ta}),c.a.createElement(N,{path:"/pgs/dashboard",exact:!0,component:Lt}),c.a.createElement(N,{path:"/pgs/console",exact:!0,component:Vt}),c.a.createElement(N,{path:"/pgs/inout",exact:!0,component:Jt}),c.a.createElement(N,{path:"/pgs/reports",exact:!0,component:_t}),c.a.createElement(N,{path:"/people-counting/Dashboard",exact:!0,component:ia}),c.a.createElement(N,{path:"/atcc",exact:!0,component:ca}),c.a.createElement(N,{path:"/atcc/summary",exact:!0,component:ha}),c.a.createElement(N,{path:"/vids",exact:!0,component:fa}),c.a.createElement(N,{path:"/vids/dashboard",exact:!0,component:ya}))),c.a.createElement(z,null))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oa=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,null,c.a.createElement(A.d,null,c.a.createElement(Ca,null)))}}]),t}(c.a.Component);h.a.render(c.a.createElement(Oa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t){e.exports={EventBus:{events:{},publish:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))},subscribe:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}}}},[[342,1,2]]]);
//# sourceMappingURL=main.21fa8b69.chunk.js.map