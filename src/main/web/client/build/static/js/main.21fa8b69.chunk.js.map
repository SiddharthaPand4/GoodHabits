{"version":3,"sources":["services/axios.js","helpers/auth-header.js","helpers/config.js","helpers/history.js","services/UserService.js","components/Sidebar.js","components/Headbar.js","components/Footerbar.js","components/PrivateRoute.js","services/DashboardService.js","services/CommonService.js","views/HomeView.js","services/FeedService.js","views/FeedView.js","services/DeviceService.js","views/DeviceView.js","views/UserListView.js","views/DeviceConfigView.js","views/LoginView.js","services/TriggerService.js","components/TriggerSet.js","views/TriggerView.js","components/GenericFilter.js","services/AnprService.js","services/AnprReportService.js","views/anpr/AnprView.js","views/TrafficIncidentView.js","views/incidents/IncidentTimeline.js","views/incidents/IncidentRepeatedView.js","services/HotListVehicleService.js","components/HotListedVehicles/HotListedVehiclesList.js","views/IncidentHotlistView.js","views/anpr/IncidentTimeline.js","views/anpr/MasterDataView.js","services/ApmsService.js","views/parking/ParkingDashboardView.js","views/parking/ParkingConsoleView.js","services/ReportService.js","views/parking/ParkingReportView.js","views/parking/ParkingInOutView.js","views/PeopleCount/ApcGenericFilter.js","services/ApcFileService.js","views/PeopleCount/PeopleCounting.js","services/ApcDashboardService.js","views/PeopleCount/ApcDashboard.js","services/AtccService.js","views/atcc/AtccView.js","views/atcc/AtccSummaryView.js","services/VidsService.js","views/vids/HighwayIncidentView.js","views/vids/HighwayIncidentDashboardView.js","App.js","serviceWorker.js","index.js","components/event.js"],"names":["HttpService","ax","axios","create","baseURL","timeout","headers","interceptors","request","use","config","token","JSON","parse","localStorage","getItem","Authorization","response","undefined","err","url","includes","Promise","reject","status","console","log","clear","window","location","Instance","authHeader","history","createBrowserHistory","UserService","get","userId","user","requestBody","userName","lastName","firstName","email","id","roles","method","data","stringify","delete","username","password","post","setItem","removeItem","push","EventBus","publish","Sider","Layout","SubMenu","Menu","Sidebar","props","state","collapsed","loaded","menu","getMenu","then","setState","this","collapsible","breakpoint","collapsedWidth","className","src","theme","mode","defaultSelectedKeys","Item","key","to","type","items","map","item","index","title","submenu","subitem","link","onClick","logout","Component","Header","Headbar","style","background","padding","Footer","textAlign","PrivateRoute","component","rest","render","isLoggedIn","pathname","from","DashboardService","colors","filter","fromDate","toDate","xAxis","fromDateString","moment","format","toDateString","color","getRandomColor","i","Math","floor","random","selectedCustomDateRangeEnum","selectedCustomDateRangeMoment","baseDate","from_date","to_date","startOf","endOf","subtract","CommonService","array","attr","value","length","RangePicker","DatePicker","HomeView","handleCancel","isOpencustomDateRangeModal","atcc","selectedCustomDateRange","selectedXAxisOption","chartData","labels","datasets","incident","getIncidentVehicleCount","bind","getAtccVehicleCount","getBarChartOptions","selectDateRange","selectXAxisOption","refresh","getDateRangeOptions","getXAxisOptions","handleDateRangeChange","graphName","graph","fromToDate","extractFromToDate","resposne","rawData","labelDates","rawDataByVehicleData","date","vehicleType","vehicleTypeIndex","dataSet","label","backgroundColor","getColor","vehicleCount","catch","error","helmetMissingIncidents","reverseDirectionIncidents","parseInt","sort","a","b","Moment","helmetMissingDataset","reverseDirectionDataset","dataValue","findIndex","showCustomDateRangeModal","chartName","yAxisScaleLabel","yAxisLabel","responsive","maintainAspectRatio","animation","duration","hover","animationDuration","responsiveAnimationDuration","legend","position","scales","xAxes","stacked","ticks","beginAtZero","scaleLabel","display","labelString","yAxes","atccChartOptions","incidentChartOptions","onCancel","visible","footer","onChange","changedDateRange","overlay","options","FeedService","feed","ID","Text","Typography","FeedView","loading","videoVisible","feeds","subscribe","event","removeFeed","getFeeds","startFeed","stopFeed","WrappedFeedForm","Form","name","FeedForm","gutter","span","site","cover","alt","bordered","actions","submitted","loginError","handleSubmit","e","preventDefault","validationError","form","getFieldValue","addFeed","fieldsError","getFieldDecorator","getFieldsError","onSubmit","rules","required","message","addonBefore","placeholder","htmlType","disabled","Object","keys","some","field","DeviceService","DeviceView","device","getDevice","width","extra","fingerprint","model","license","registeredTo","Column","Table","confirm","Modal","UserListView","showModal","users","showUserDetails","addUser","refreshUsers","close","getUsers","getRoles","getUser","okText","okType","cancelText","onOk","deleteUser","success","WrappedUserForm","UserForm","bodyStyle","dataSource","pagination","scroll","x","dataIndex","text","record","href","showUser","showDeleteConfirm","createUser","initialValue","role","size","TabPane","Tabs","DeviceConfigView","deviceconfig","getDeviceConfig","tab","defaultActiveKey","onTabChange","LoginView","WrappedLoginForm","LoginForm","login","reload","xl","lg","md","sm","xs","top","prefix","block","withRouter","TriggerService","trigger","put","TriggerSet","days","onChange0","onChange1","onChange2","onChange3","onChange4","onChange5","onChange6","onChangeValue","saveTrigger","deleteTrigger","setName","changed","idx","TriggerDays","Start","End","new","createTrigger","Day","target","selected","marks","day","start","end","dlist","min","max","range","Option","Select","TriggerView","triggers","tsRef","React","createRef","handleChange","newTrigger","getTriggers","selectedt","current","NewTrigger","ChangeTrigger","selectedname","Name","selector","ref","ButtonGroup","Button","Group","layout","page","pageSize","onFromDateChange","onFromTimeChange","onToDateChange","onToTimeChange","onPageChange","onPageSizeChange","handleRefresh","refreshNow","handleLayoutChange","handleFilterChange","time","fromTime","toTime","minuteStep","secondStep","icon","changeLayout","AnprService","lpr","AnprReportService","req","responseType","Paragraph","Panel","Collapse","AnprView","handleOnClick","events","workingEvent","workingEventLoading","magnifyEvent","magnifyEventId","zoomFactor","minZoomFactor","maxZoomFactor","downloading","onLprInputChange","editEvent","updateEvent","updateZoomFactor","downloadAnprReport","getEvents","archiveEvent","anprText","alert","getAnprEventsReport","saveAs","header","renderTable","renderGrid","anprresponse","totalPage","description","count","totalPages","mid","toFixed","preColor","nextColor","1","2","3","4","5","margin","direction","helmet","sectionSpeed","download","height","marginTop","strong","editable","copyable","speed","code","eventDate","onShowSizeChange","showSizeChanger","showQuickJumper","defaultCurrent","total","Total","paginationOptions","TrafficIncidentView","getIncidents","IncidentTimeline","currentPage","pageSizes","incidentType","toggleVisible","refreshBriefIncidentsNow","onModalPageChange","onModalPageSizeChange","nextProps","getBriefIncidentsRepeated","paginationOption","showLessItems","antIcon","fontSize","spin","indicator","onClose","Search","Input","tabList","IncidentRepeatedView","timelineLpr","activeTab","helmetMissing","pages","briefIncident","reverseDirection","pagess","onHelmetMissingPageChange","onReverseDirectionPageChange","onHelmetMissingPageSizeChange","onReverseDirectionPageSizeChange","handleTabClick","refreshHelmetMissingIncidentsNow","refreshReverseDirectionIncidentsNow","search","toggleIncidentTimelineModal","tabIndex","activeTabIndex","defaultActiveTabIndex","getHelmetMissingIncidentsRepeated","getReverseDirectionIncidentsRepeated","hasError","searchText","allowClear","onSearch","enterButton","activeTabKey","renderReverseData","renderHelmetMissingData","repeatedTimes","HotListVehicleService","vehicle","HotListedVehiclesList","activeModal","hotListedVehicleResponse","workingVehicle","archived","vehiclesList","openHotListVehicleForm","handleSubmitWorkingHotListVehicle","handleCancelWorkingHotListVehicle","archiveHotListedVehicle","workingVehicleOnChange","getHotListedVehicles","checked","saveHotListedVehicle","vehicles","hoverable","IncidentHotlistView","getIncidentsHotlisted","renderIncidents","getIncidentTimeline","MasterDataView","archiveEventsLoading","archiveLpr","allData","onMasterDataPageChange","onMasterDataPageSizeChange","refreshIncidentsNow","archiveLprOnChange","getIncidentsList","archiveAllEvent","renderMasterData","ApmsService","vehicleNo","slot","lot","free","misaligned","fo_data","misAlignedData","entryexit_data","ParkingDashboardView","parkingEventData","stats","checkInEventsData","cb_data","getParkingSlotStats","getParkingVehicleCount","getCheckedInVehiclesCount","dates","dateString","checkInEvents","checkOutEvents","checkInDataset","borderColor","checkOutDataset","statsData","parkedSlots","freeSlots","parkedMisalignedSlots","dataset","carsParked","carSlots","cloneDeep","bikesParked","bikeSlots","checkedInCars","checkedInBikes","active","plugins","datalabels","anchor","align","offset","borderWidth","borderRadius","context","font","weight","formatter","circumference","PI","rotation","tooltips","callbacks","datasetIndex","ParkingImage","handleLoad","image","loadImage","oldProps","removeEventListener","Image","addEventListener","y","node","imageNode","ParkingConsoleView","slots","biketotal","cartotal","bikefull","carfull","img","baseimg","togglerRef","intervalID","setInterval","ptTimer","setOccupied","forEach","v","lastOccupiedSeconds","clearInterval","getSlots","queryString","edit","fancyTime","secs","params","k","points","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","stroke","closed","fill","pointerDirection","pointerWidth","pointerHeight","lineJoin","shadowColor","getText","fontFamily","numPoints","innerRadius","outerRadius","opacity","SlotToggler","slotmap","selectedSlot","ss","updateSlot","onAlignmentChange","onFreeChange","ReportService","reportType","filterType","downloadReport","handleChangeReportType","getParkingEventsReport","defaultValue","ParkingInOutView","checkIn","checkOut","vehicleLastParkingEvent","apmsresponse","copyVehicleNo","getEventsList","addCheckIn","addCheckOut","getEventsStatus","getEventStatus","timeDiff","getTimeDifference","utc","diff","obj","hasOwnProperty","call","disableCheckIn","disableCheckOut","isEmpty","fromNow","ApcFileService","PeopleCounting","onEventIdInputChange","getPeopleData","pageNumber","list","eventId","ApcDashboardService","ApcDashboard","apc","peakhour","peakHourEvents","getApcPeopleCount","getApcPeakHour","refreshPeakHour","refreshApcChart","labelDuration","percentageOfPeopleCount","peopleCountPercentage","durationIndex","hoverBackgroundColor","j","peopleCount","apcChartOptions","AtccService","interval","AtccView","video","getRawData","sorted","filtered","handleRetrievedData","getAtccData","columns","accessor","Cell","cursor","showVideo","original","vid","showScreenshot","downloadVideo","refRawDataTable","defaultPageSize","showPagination","showPaginationTop","showPaginationBottom","pageSizeOptions","manual","onFetchData","instance","res","ceil","totalElements","parseFloat","downloadCsv","fluid","autoPlay","playsInline","poster","seek","fetch","blob","URL","createObjectURL","Blob","document","createElement","setAttribute","tag","body","appendChild","click","parentNode","removeChild","AtccSummaryView","chartdata","makeChartData","getSummaryData","changeInterval","refReactTable","fireFetchData","getAtccSummaryData","timeSeries","Set","add","Array","chartComponent","gridLines","colorschemes","scheme","VidsService","HighwayIncidentView","incidents","playVideo","archiveIncident","incidentDate","flow_hourly_data","getColors","flow_today_data","incident_data","HighwayIncidentDashboardView","getStats","onehrlabels","onehrvalues","onehourstats","pt","dailylabels","dailyvalues","todaystats","incilabels","incivalues","trafficState","density","Content","App","loggedIn","refreshMenu","sideBar","minHeight","path","exact","PgsReportView","Boolean","hostname","match","Root","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","callback"],"mappings":"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","file":"static/js/main.21fa8b69.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nfunction forceLogout() {\r\n    localStorage.clear();\r\n    window.location = '/login';\r\n}\r\n\r\nclass HttpService {\r\n\r\n    static Instance() {\r\n\r\n        let ax = new axios.create({\r\n            baseURL: \"/\",\r\n            timeout: 5000,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        ax.interceptors.request.use(config => {\r\n            let token = JSON.parse(localStorage.getItem('syntoken'));\r\n            if (token) {\r\n                config.headers.Authorization = \"Bearer \" + token.token\r\n            }\r\n            return config\r\n        });\r\n\r\n        axios.interceptors.response.use(undefined, err => {\r\n            if (err.response.config.url.includes('/login'))\r\n                return Promise.reject(err);\r\n\r\n            if (err.response.status === 403) {\r\n                console.log('I am at 403');\r\n                return forceLogout();\r\n            }\r\n            if (err.response.status !== 401) {\r\n                console.log('I am at 401');\r\n                return Promise.reject(err);\r\n            }\r\n        });\r\n\r\n        return ax;\r\n    }\r\n\r\n}\r\n//https://gist.github.com/alfonmga/96474f6adb6ed8dee8bc8bf8627c0ae1\r\nexport default HttpService.Instance()","export function authHeader() {\r\n    // return authorization header with jwt token\r\n    let token = JSON.parse(localStorage.getItem('syntoken'));\r\n\r\n    if (token) {\r\n        return {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n    } else {\r\n        return {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n    }\r\n}","export const config = {\r\n    apiUrl: '/'\r\n};","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();","import axios from \"./axios\";\r\nimport { authHeader } from '../helpers/auth-header';\r\nimport { config } from '../helpers/config'\r\nimport {history} from \"../helpers/history\";\r\nimport {EventBus} from \"../components/event\";\r\n\r\nclass UserService {\r\n\r\n    static Instance() {\r\n        return new UserService()\r\n    }\r\n\r\n    getMenu() {\r\n        return axios.get('/api/user/menu');\r\n    }\r\n\r\n    getUser(userId) {\r\n        return axios.get('/api/user/' + userId);\r\n    }\r\n\r\n    getUsers() {\r\n        return axios.get('/api/user/');\r\n    }\r\n\r\n    getRoles(){\r\n        return axios.get('/api/user/roles');\r\n    }\r\n\r\n     createUser(user){\r\n        const requestBody = {\r\n             userName:user.userName,\r\n             lastName:user.lastName,\r\n             firstName:user.firstName,\r\n             email:user.email,\r\n             id:user.id,\r\n             roles:user.roles,\r\n        };\r\n\r\n        const request = {\r\n            method: 'POST',\r\n            headers: authHeader(),\r\n            data: JSON.stringify(requestBody),\r\n            url: config.apiUrl + 'api/user/'\r\n        };\r\n        if(user.id){\r\n            request.method='PUT';\r\n        }\r\n        return axios(request);\r\n    }\r\n\r\n    deleteUser(userId){\r\n        return axios.delete('/api/user/' + userId);\r\n    }\r\n\r\n    isLoggedIn() {\r\n        let token = JSON.parse(localStorage.getItem('syntoken'));\r\n        if (!token) {\r\n            console.log(\"cannot locate token, returning false\");\r\n            return false;\r\n        }\r\n        console.log(\"located token, returning true\");\r\n        return true\r\n    }\r\n\r\n    async login(username, password) {\r\n        let response = await axios.post('/login', JSON.stringify({ username, password }), {headers: {\r\n                'Content-Type': 'application/json',\r\n            }});\r\n        console.log(\"got this response\", response);\r\n        let token = response.data;\r\n        if (token) {\r\n            localStorage.setItem('syntoken', JSON.stringify(token));\r\n        }\r\n        return token;\r\n    }\r\n\r\n    logout() {\r\n        localStorage.removeItem(\"syntoken\");\r\n        history.push( \"/#/login\");\r\n        EventBus.publish('login-logout', {})\r\n\r\n    }\r\n}\r\n\r\nexport default UserService.Instance()\r\n\r\n//TODO valiate token,\r\n// https://medium.com/@siddharthac6/json-web-token-jwt-the-right-way-of-implementing-with-node-js-65b8915d550e","import React, {Component} from 'react';\r\nimport {Icon, Layout, Menu} from \"antd\";\r\nimport {Link} from \"react-router-dom\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst {Sider} = Layout;\r\nconst {SubMenu} = Menu;\r\n\r\nexport default class Sidebar extends Component {\r\n    state = {\r\n        collapsed: false,\r\n        loaded: false,\r\n        menu: {}\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        UserService.getMenu().then(response => {\r\n            this.setState({menu: response.data, loaded: true});\r\n        });\r\n    }\r\n\r\n    toggleCollapsed() {\r\n        this.setState({\r\n            collapsed: !this.state.collapsed,\r\n        });\r\n    };\r\n\r\n    render() {\r\n\r\n        let menu = this.state.menu;\r\n\r\n        return (\r\n            <Sider\r\n                collapsible\r\n                breakpoint=\"lg\"\r\n                collapsedWidth=\"0\"\r\n            >\r\n                <div className=\"logo\">\r\n                    <img src={\"synlabs-logo.png\"}/>\r\n                </div>\r\n                <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['0']}>\r\n                    <Menu.Item key=\"0\">\r\n                        <Link to='/'><Icon type='home'/><span className='nav-text'>Home</span></Link>\r\n                    </Menu.Item>\r\n\r\n                    {(menu.items || []).map((item, index) =>\r\n\r\n                        <SubMenu key={item.key} title={\r\n                            <span><Icon type='box-plot'/><span>{item.title}</span></span>\r\n                        }\r\n                        >\r\n                            {(item.submenu || []).map((subitem, index) =>\r\n                                <Menu.Item key={subitem.key} className=\"sidebar-nav-link\">\r\n                                <Link to={subitem.link}><span className='nav-text'>{subitem.title}</span></Link>\r\n                                </Menu.Item>\r\n                            )}\r\n                        </SubMenu>\r\n                    )}\r\n\r\n                    <SubMenu key=\"sub1\" title={\r\n                        <span>\r\n                          <Icon type='box-plot'/>\r\n                          <span>ANPR</span>\r\n                        </span>\r\n                    }\r\n                    >\r\n                        <Menu.Item key=\"1\" className=\"sidebar-nav-link\">\r\n                            <Link to='/anpr'><span className='nav-text'>Events</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"2\" className=\"sidebar-nav-link\">\r\n                            <Link to='/anpr/masterdata'><span className='nav-text'>Repeated Events</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>\r\n                    <SubMenu key=\"sub2\" title={\r\n                        <span>\r\n                           <Icon type='box-plot'/>\r\n                           <span>Offences</span>\r\n                         </span>\r\n                    }\r\n                    >\r\n                        <Menu.Item key=\"3\" className=\"sidebar-nav-link\">\r\n                            <Link to='/incidents'><span className='nav-text'>Events</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"4\" className=\"sidebar-nav-link\">\r\n                            <Link to='/incidents/repeated'><span className='nav-text'>Repeated Events</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>\r\n\r\n                    <Menu.Item key=\"5\" className=\"sidebar-nav-link\">\r\n                        <Link to=\"/incidents/hotlisted\"><Icon type='alert'/><span\r\n                            className='nav-text'>Hotlist</span></Link>\r\n                    </Menu.Item>\r\n\r\n                    <SubMenu key=\"pgs\" title={\r\n                        <span>\r\n                           <Icon type='car'/>\r\n                           <span>Parking</span>\r\n                         </span>\r\n                    }>\r\n                        <Menu.Item key=\"pgs-1\" className=\"sidebar-nav-link\">\r\n                            <Link to='/pgs/dashboard'><span className='nav-text'>Dashboard</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"pgs-2\" className=\"sidebar-nav-link\">\r\n                            <Link to='/pgs/console'><span className='nav-text'>Operator Console</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"pgs-3\" className=\"sidebar-nav-link\">\r\n                            <Link to='/pgs/inout'><span className='nav-text'>Check-In/Out</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"pgs-4\" className=\"sidebar-nav-link\">\r\n                            <Link to='/pgs/reports'><span className='nav-text'>Reports</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>\r\n\r\n                    <Menu.Item key=\"6\">\r\n                        <Link to='/feed'><Icon type='video-camera'/><span className='nav-text'>Feed</span></Link>\r\n                    </Menu.Item>\r\n                    <SubMenu key=\"admin\" title={<span><Icon type=\"deployment-unit\"/>Admin</span>}>\r\n                        <Menu.Item key=\"51\">\r\n                            <Link to='/user'><Icon type='user'/><span className='nav-text'>Users</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"52\">\r\n                            <Link to='/device'><Icon type='laptop'/><span className='nav-text'>Device</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"53\">\r\n                            <Link to='/trigger'><Icon type=\"clock-circle\"/><span\r\n                                className='nav-text'>Triggers</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>\r\n\r\n\r\n                    {/*<SubMenu\r\n                        key=\"sub3\"\r\n                        title={\r\n                            <span>\r\n                         <Icon type='box-plot'/>\r\n                         <span>People Counting</span>\r\n                       </span>\r\n                        }\r\n                    >\r\n                        <Menu.Item key=\"7\" className=\"sidebar-nav-link\">\r\n                            <Link to='/people-counting/events'><span className='nav-text'>Events</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>*/}\r\n\r\n                    <SubMenu\r\n                        key=\"sub3\"\r\n                        title={\r\n                            <span>\r\n                                             <Icon type='box-plot'/>\r\n                                             <span>People Counting</span>\r\n                                           </span>\r\n                        }\r\n                    >\r\n                        <Menu.Item key=\"9\" className=\"sidebar-nav-link\">\r\n                            <Link to='/people-counting/events'><span className='nav-text'>Events</span></Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"8\" className=\"sidebar-nav-link\"> <Link to='/people-counting/dashboard'><span\r\n                            className='nav-text'>Dashboard</span></Link>\r\n                        </Menu.Item>\r\n                    </SubMenu>\r\n\r\n                    <Menu.Item key=\"7\">\r\n                        <Link to='/' onClick={() => UserService.logout()}><Icon type='logout'/><span\r\n                            className='nav-text'>Logout</span></Link>\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Sider>\r\n        );\r\n    }\r\n}","\r\nimport React, {Component} from 'react';\r\nimport {Layout} from \"antd\";\r\nconst {Header} = Layout;\r\n\r\nexport default class Headbar extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <Header style={{ background: '#fff', padding: 10 }} >&nbsp;</Header>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {Layout} from \"antd\";\r\n\r\nconst {Footer} = Layout;\r\n\r\nexport default class Headbar extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <Footer style={{textAlign: 'center'}}>\r\n                Powered by SynergyLabs © 2019</Footer>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => (\r\n        UserService.isLoggedIn()\r\n            ? <Component {...props} />\r\n            : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n    )} />\r\n);\r\n\r\nexport default PrivateRoute","import axios from \"./axios\";\r\nimport moment from 'moment';\r\n\r\nclass DashboardService {\r\n\r\n    static Instance() {\r\n        return new DashboardService()\r\n    }\r\n\r\n    colors = [\r\n        '#e83e8c',\r\n        '#dc3545',\r\n        '#007bff',\r\n        '#6610f2',\r\n        '#fd7e14',\r\n        '#ffc107',\r\n        '#28a745',\r\n        '#20c997',\r\n        '#17a2b8',\r\n        '#6c757d',\r\n        '#343a40',\r\n        '#6f42c1'];\r\n\r\n    getTotalNoOfVehiclesBetweenTwoDates(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/datefilter', filter);\r\n    }\r\n\r\n    getTotalNoOfVehiclesBySelectedDate(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/date', filter);\r\n    }\r\n\r\n    getTotalNoOfVehiclesForLastMonths(filter) {\r\n        return axios.post('/api/dashboard/vehiclescount/month', filter);\r\n    }\r\n\r\n    getAtccVehicleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss\"'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/dashboard/atcc/vehicle/count', filter);\r\n    }\r\n\r\n    getIncidentVehicleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/dashboard/incident/vehicle/count', filter);\r\n    }\r\n\r\n    getParkingVehicleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/apms/guidance/parking/vehicle/count', filter);\r\n    }\r\n\r\n    getColors() {\r\n        return this.colors;\r\n    }\r\n\r\n    getColor(index) {\r\n        let color = this.colors[index];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        return this.getRandomColor();\r\n    }\r\n\r\n    getRandomColor() {\r\n        let letters = '0123456789ABCDEF';\r\n        let color = '#';\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n\r\n\r\n    extractFromToDate(selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n\r\n        let baseDate;\r\n        let from_date;\r\n        let to_date;\r\n        switch (selectedCustomDateRangeEnum) {\r\n            case  \"Today\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"Yesterday\":\r\n                baseDate = moment().subtract(1, 'days');\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"This week\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"This month\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"This quarter\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"This year\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Last week\":\r\n                baseDate = moment().subtract(1, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Last month\":\r\n                baseDate = moment().subtract(1, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Last quarter\":\r\n                baseDate = moment().subtract(1, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Last year\":\r\n                baseDate = moment().subtract(1, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Second Last week\":\r\n                baseDate = moment().subtract(2, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Second Last month\":\r\n                baseDate = moment().subtract(2, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Second Last quarter\":\r\n                baseDate = moment().subtract(2, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Second Last year\":\r\n                baseDate = moment().subtract(2, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case \"Custom\":\r\n            default:\r\n                from_date = selectedCustomDateRangeMoment[0].toDate();\r\n                to_date = selectedCustomDateRangeMoment[1].toDate();\r\n                break;\r\n        }\r\n\r\n        return {\r\n            from_date: from_date,\r\n            to_date: to_date\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default DashboardService.Instance()","\r\n\r\nclass CommonService {\r\n\r\n    static Instance() {\r\n        return new CommonService()\r\n    }\r\n\r\n    ifExist(array, attr, value) {\r\n        for (let i = 0; i < array.length; i += 1) {\r\n            if (array[i][attr] === value) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    findIndex(array, attr, value) {\r\n        if (!array) {\r\n            return -1;\r\n        }\r\n        for (let i = 0; i < array.length; i += 1) {\r\n            if (array[i][attr] === value) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default CommonService.Instance()","import React, {Component} from \"react\";\r\nimport {Button, Card, DatePicker, Dropdown, Icon, Menu, Modal} from \"antd\";\r\nimport DashboardService from \"../services/DashboardService\";\r\nimport CommonService from \"../services/CommonService\";\r\nimport Moment from 'moment';\r\nimport {Line} from 'react-chartjs-2';\r\n\r\nconst {RangePicker} = DatePicker;\r\n\r\nexport default class HomeView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpencustomDateRangeModal: \"\",\r\n            atcc: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate: {},\r\n                    toDate: {}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            }, incident: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate: {},\r\n                    toDate: {}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            },\r\n        };\r\n\r\n        this.getIncidentVehicleCount = this.getIncidentVehicleCount.bind(this);\r\n        this.getAtccVehicleCount = this.getAtccVehicleCount.bind(this);\r\n        this.getBarChartOptions = this.getBarChartOptions.bind(this);\r\n        this.selectDateRange = this.selectDateRange.bind(this);\r\n        this.selectXAxisOption = this.selectXAxisOption.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n        this.getXAxisOptions = this.getXAxisOptions.bind(this);\r\n        this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    showCustomDateRangeModal(graphName) {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: graphName,\r\n        });\r\n    };\r\n\r\n    handleCancel = () => {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: \"\",\r\n        });\r\n    };\r\n\r\n    selectDateRange(graphName, selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n        let {isOpencustomDateRangeModal} = this.state;\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedCustomDateRange = selectedCustomDateRangeEnum;\r\n        let fromToDate = DashboardService.extractFromToDate(graph.filter.selectedCustomDateRange, selectedCustomDateRangeMoment);\r\n        graph.filter.fromDate = fromToDate.from_date;\r\n        graph.filter.toDate = fromToDate.to_date;\r\n\r\n\r\n        if (selectedCustomDateRangeEnum === \"Custom\") {\r\n            isOpencustomDateRangeModal = \"\"\r\n        }\r\n        this.setState({[graphName]: graph, isOpencustomDateRangeModal}, () => {\r\n            this.refresh();\r\n        });\r\n\r\n    }\r\n\r\n    selectXAxisOption(graphName, selectedXAxisOption) {\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedXAxisOption = selectedXAxisOption;\r\n        this.setState({[graphName]: graph}, () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    refresh() {\r\n\r\n        this.getAtccVehicleCount(this.state.atcc.filter.fromDate, this.state.atcc.filter.toDate, this.state.atcc.filter.selectedXAxisOption);\r\n\r\n        this.getIncidentVehicleCount(this.state.incident.filter.fromDate, this.state.incident.filter.toDate, this.state.incident.filter.selectedXAxisOption);\r\n    }\r\n\r\n\r\n    getAtccVehicleCount(from_date, to_date, xAxis) {\r\n        let {atcc} = this.state;\r\n        atcc.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        DashboardService.getAtccVehicleCount(from_date, to_date, xAxis).then(resposne => {\r\n\r\n            let rawData = resposne.data;\r\n            if (rawData && rawData.length > 0) {\r\n                //let labelDates = DashboardService.enumerateDaysBetweenDates(from_date, to_date);\r\n                let labelDates = [];\r\n\r\n                let rawDataByVehicleData = [];\r\n                for (let i in rawData) {\r\n\r\n                    if (!labelDates.includes(rawData[i].date)) {\r\n                        labelDates.push(rawData[i].date)\r\n                    }\r\n\r\n                    if (!rawDataByVehicleData[rawData[i].vehicleType]) {\r\n                        rawDataByVehicleData[rawData[i].vehicleType] = {};\r\n                    }\r\n                    if (!rawDataByVehicleData[rawData[i].vehicleType][rawData[i].date]) {\r\n                        rawDataByVehicleData[rawData[i].vehicleType][rawData[i].date] = rawData[i];\r\n                    }\r\n                }\r\n                atcc.chartData.labels = labelDates;\r\n                let vehicleTypeIndex = 0;\r\n                for (let vehicleType in rawDataByVehicleData) {\r\n\r\n                    let color = DashboardService.getColor(vehicleTypeIndex);\r\n                    let dataSet = {\r\n                        label: vehicleType,\r\n                        data: [],\r\n                        backgroundColor: color\r\n                    };\r\n\r\n                    for (let i in labelDates) {\r\n                        if (rawDataByVehicleData[vehicleType][labelDates[i]]) {\r\n                            dataSet.data.push(rawDataByVehicleData[vehicleType][labelDates[i]].vehicleCount);\r\n                        } else {\r\n                            dataSet.data.push(0);\r\n                        }\r\n                    }\r\n                    atcc.chartData.datasets.push(dataSet);\r\n                    vehicleTypeIndex++;\r\n                }\r\n            }\r\n            this.setState({atcc});\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n\r\n    getIncidentVehicleCount(from_date, to_date, xAxis) {\r\n        let {incident} = this.state;\r\n        incident.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        DashboardService.getIncidentVehicleCount(from_date, to_date, xAxis).then(resposne => {\r\n\r\n            let helmetMissingIncidents = resposne.data.helmetMissingIncidents;\r\n            let reverseDirectionIncidents = resposne.data.reverseDirectionIncidents;\r\n\r\n            //Get all unique labels(timestamps) from both type of incidents\r\n            let labels = [];\r\n            for (let i in reverseDirectionIncidents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    reverseDirectionIncidents[i].date = parseInt(reverseDirectionIncidents[i].date);\r\n                }\r\n                if (!labels.includes(reverseDirectionIncidents[i].date)) {\r\n                    labels.push(reverseDirectionIncidents[i].date);\r\n                }\r\n            }\r\n\r\n            for (let i in helmetMissingIncidents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    helmetMissingIncidents[i].date = parseInt(helmetMissingIncidents[i].date);\r\n                }\r\n                if (!labels.includes(helmetMissingIncidents[i].date)) {\r\n                    labels.push(helmetMissingIncidents[i].date);\r\n                }\r\n            }\r\n\r\n            // sort the labels, as it is a timeseries\r\n            if (xAxis === \"Hourly\") {\r\n                labels.sort((a, b) => a - b);\r\n            }\r\n            if (xAxis === \"Daily\") {\r\n                labels.sort((a, b) => new Moment(a).format('YYYY-MM-DD') - new Moment(b).format('YYYY-MM-DD'))\r\n            }\r\n\r\n            //prepare dataset\r\n            let helmetMissingDataset = {\r\n                label: \"Without Helmet\",\r\n                data: [],\r\n                backgroundColor: DashboardService.getColor(0)\r\n            };\r\n            let reverseDirectionDataset = {\r\n                label: \"Reverse Direction\",\r\n                data: [],\r\n                backgroundColor: DashboardService.getColor(2)\r\n            };\r\n\r\n            //fill the value of dataset for each label\r\n            let dataValue = 0;\r\n            let index = -1;\r\n            for (let i in labels) {\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(helmetMissingIncidents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = helmetMissingIncidents[index].vehicleCount;\r\n                }\r\n                helmetMissingDataset.data.push(dataValue);\r\n\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(reverseDirectionIncidents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = reverseDirectionIncidents[index].vehicleCount;\r\n                }\r\n                reverseDirectionDataset.data.push(dataValue);\r\n            }\r\n\r\n            //finalize it with setState\r\n            incident.chartData.labels = labels;\r\n            incident.chartData.datasets.push(helmetMissingDataset);\r\n            incident.chartData.datasets.push(reverseDirectionDataset);\r\n            this.setState({incident});\r\n        }).catch(error => {\r\n            this.setState({incident});\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    handleDateRangeChange() {\r\n        this.setState(() => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    getXAxisOptions(graphName) {\r\n        return (<Menu>\r\n\r\n            <Menu.Item key=\"1\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Hourly\")}>\r\n                Hourly\r\n            </Menu.Item>\r\n            <Menu.Item key=\"5\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Daily\")}>\r\n                Daily\r\n            </Menu.Item>\r\n        </Menu>)\r\n    }\r\n\r\n    getDateRangeOptions(graphName) {\r\n        return (\r\n            <Menu>\r\n                <Menu.Item key=\"1\" onClick={() => this.selectDateRange(graphName, \"Today\")}>\r\n                    Today\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\" onClick={() => this.selectDateRange(graphName, \"Yesterday\")}>\r\n                    Yesterday\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\" onClick={() => this.selectDateRange(graphName, \"This week\")}>\r\n                    This week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\" onClick={() => this.selectDateRange(graphName, \"Last week\")}>\r\n                    Last week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\" onClick={() => this.selectDateRange(graphName, \"This month\")}>\r\n                    This month\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\" onClick={() => this.selectDateRange(graphName, \"This year\")}>\r\n                    This year\r\n                </Menu.Item>\r\n                <Menu.Item key=\"7\" onClick={() => this.selectDateRange(graphName, \"Last year\")}>\r\n                    Last year\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.showCustomDateRangeModal(graphName)}>\r\n                    Custom\r\n                </Menu.Item>\r\n\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    getBarChartOptions(chartName) {\r\n        let yAxisScaleLabel = \"Day\";\r\n        if (this.state[chartName].filter.selectedXAxisOption === \"Hourly\") {\r\n            yAxisScaleLabel = \"Hours(24-hour)\"\r\n        }\r\n        let yAxisLabel = \"Vehicles\";\r\n        if (chartName === \"incident\") {\r\n            yAxisLabel = \"Challans\"\r\n        }\r\n\r\n        let options = {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            animation: {\r\n                duration: 0\r\n            },\r\n            hover: {\r\n                animationDuration: 0\r\n            },\r\n            responsiveAnimationDuration: 0,\r\n            legend: {\r\n                position: 'right'\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisScaleLabel\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisLabel\r\n                    }\r\n                }]\r\n            }\r\n        };\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n        let {atcc, incident} = this.state;\r\n        const atccChartOptions = this.getBarChartOptions(\"atcc\");\r\n        const incidentChartOptions = this.getBarChartOptions(\"incident\");\r\n        return (\r\n            <div>\r\n                <div>\r\n\r\n                    <Modal\r\n                        onCancel={this.handleCancel}\r\n                        title=\"Custom Date Range\"\r\n                        visible={!!this.state.isOpencustomDateRangeModal}\r\n                        footer={[]}\r\n\r\n                    >\r\n                        <RangePicker\r\n                            onChange={(changedDateRange) => this.selectDateRange(this.state.isOpencustomDateRangeModal, \"Custom\", changedDateRange)}/>\r\n                    </Modal>\r\n                </div>\r\n                <div>\r\n                    <Card title={<div>ATCC\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"atcc\")}>\r\n                            <Button>\r\n                                {atcc.filter.selectedCustomDateRange ? atcc.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                        &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"atcc\")}>\r\n                            <Button>\r\n                                {atcc.filter.selectedXAxisOption ? atcc.filter.selectedXAxisOption : \"Select\"} <Icon\r\n                                type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>}>\r\n                        <Line data={atcc.chartData} options={atccChartOptions}/>\r\n\r\n                    </Card>\r\n                    <br/>\r\n                    <Card title={<div>Incidents\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"incident\")}>\r\n                            <Button>\r\n                                {incident.filter.selectedCustomDateRange ? incident.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                        &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"incident\")}>\r\n                            <Button>\r\n                                {incident.filter.selectedXAxisOption ? incident.filter.selectedXAxisOption : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>}>\r\n                        <Line data={incident.chartData} options={incidentChartOptions}/>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import axios from './axios';\r\n\r\nclass FeedService {\r\n\r\n    static Instance() {\r\n        return new FeedService()\r\n    }\r\n\r\n    getFeeds() {\r\n        return axios.get('/api/feeds');\r\n    }\r\n\r\n    getFeed(feed) {\r\n        return axios.get('/api/feed/' + feed.ID);\r\n    }\r\n\r\n    addFeed(feed) {\r\n        return axios.post('/api/feed/', feed)\r\n    }\r\n\r\n    removeFeed(feed) {\r\n        return axios.delete('/api/feed/' + feed.ID);\r\n    }\r\n\r\n    startFeed(feed) {\r\n        return axios.get('/api/feed/' +feed.ID+ '/start');\r\n    }\r\n\r\n    stopFeed(feed) {\r\n        return axios.get('/api/feed/' +feed.ID+ '/stop');\r\n    }\r\n}\r\n\r\nexport default FeedService.Instance()\r\n","import React, {Component} from \"react\";\r\nimport {Button, Card, Col, Form, Input, Row, Tag, Typography} from \"antd\";\r\nimport FeedService from \"../services/FeedService\";\r\nimport {EventBus} from \"../components/event\";\r\nconst {Text} = Typography;\r\n\r\nexport default class FeedView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loading: true,\r\n            videoVisible: false,\r\n            feeds: {},\r\n        };\r\n\r\n        EventBus.subscribe('feed-refresh', (event) => this.refresh())\r\n        this.removeFeed = this.removeFeed.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        FeedService.getFeeds().then(request => {\r\n            this.setState({\"feeds\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    removeFeed(feed) {\r\n        FeedService.removeFeed(feed).then(() => {\r\n            this.refresh()\r\n        })\r\n    }\r\n\r\n    startFeed(feed) {\r\n        FeedService.startFeed(feed).then(() => {\r\n            //this should force re-render :)\r\n            this.setState({\"refresh_state\": Math.random()})\r\n        })\r\n    }\r\n\r\n    stopFeed(feed) {\r\n        FeedService.stopFeed(feed).then(() => {\r\n            //this should force re-render :)\r\n            this.setState({\"refresh_state\": Math.random()})\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        let feeds = this.state.feeds;\r\n\r\n        if (this.state.loading || !this.state.feeds || this.state.feeds.length === 0) {\r\n            feeds = []\r\n        }\r\n\r\n        const WrappedFeedForm = Form.create({name: 'feed_form'})(FeedForm);\r\n\r\n        return (\r\n            <Row gutter={16}>\r\n                {\r\n                    feeds.map((feed, index) =>\r\n\r\n                        <Col span={8} key={index}>\r\n\r\n                            <Card\r\n                                title={\r\n                                    <Tag color=\"#f50\">{feed.site}/{feed.location}/{feed.name}</Tag>\r\n                                }\r\n                                cover={<img alt=\"feedview\" src={\"/api/feed/\" + feed.ID+ \"/view\"}/>}\r\n                                bordered={true}\r\n                                actions={[\r\n                                    <Button onClick={() => {this.startFeed(feed)}}>Start</Button>,\r\n                                    <Button onClick={() => {this.stopFeed(feed)}}>Stop</Button>,\r\n                                    <Button onClick={() => {this.removeFeed(feed)}}>Delete</Button>\r\n                                ]}\r\n                            >\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n\r\n                <Col span={8} key={-1}>\r\n\r\n                    <Card bordered={true}>\r\n                        <WrappedFeedForm/>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n\r\nfunction hasErrors(fieldsError) {\r\n    return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass FeedForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false,\r\n            loading: false,\r\n            loginError: '',\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n\r\n    handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        const form = this.props.form;\r\n        var feed = {};\r\n        feed.url = form.getFieldValue(\"url\");\r\n        feed.site = form.getFieldValue(\"site\");\r\n        feed.location = form.getFieldValue(\"location\");\r\n        feed.name = form.getFieldValue(\"name\");\r\n        let validationError;\r\n        if (!feed.url) {\r\n            validationError = \"Missing url\"\r\n        }\r\n\r\n        if (!feed.site) {\r\n            validationError = \"Missing site\"\r\n        }\r\n\r\n        if (!feed.location) {\r\n            validationError = \"Missing location\"\r\n        }\r\n\r\n        if (!feed.name) {\r\n            validationError = \"Missing name\"\r\n        }\r\n\r\n        if (validationError) {\r\n            this.setState({validationError: validationError});\r\n            return\r\n        }\r\n\r\n        console.log('saving feed', feed);\r\n        this.setState({submitted: true, loading: true});\r\n\r\n        FeedService.addFeed(feed).then(response => {\r\n            EventBus.publish('feed-refresh', {})\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator, getFieldsError} = this.props.form;\r\n        const validationError = this.state.validationError;\r\n        return (\r\n            <Form onSubmit={this.handleSubmit}>\r\n                <Form.Item>\r\n                    {getFieldDecorator('url', {rules: [{required: true, message: 'enter feed url!'}],})(\r\n                        <Input addonBefore=\"Feed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\" placeholder=\"rtsp://\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('site', {rules: [{required: true, message: 'enter site!'}],})(\r\n                        <Input addonBefore=\"Site&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\r\n                               placeholder=\"Site (e.g. gurgaon)\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('location', {rules: [{required: true, message: 'enter location!'}],})(\r\n                        <Input addonBefore=\"Location\" placeholder=\"Location (e.g. 9th floor)\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('name', {rules: [{required: true, message: 'enter name!'}],})(\r\n                        <Input addonBefore=\"Name&nbsp;&nbsp;&nbsp;&nbsp;\" placeholder=\"Name (e.g. front gate )\"/>,\r\n                    )}\r\n                </Form.Item>\r\n                <Button htmlType=\"submit\" type=\"primary\" disabled={hasErrors(getFieldsError())}>Add</Button>\r\n                {validationError && <Text type=\"danger\">{validationError}</Text>}\r\n            </Form>\r\n        )\r\n    }\r\n}","import axios from './axios';\r\n\r\nclass DeviceService {\r\n\r\n    static Instance() {\r\n        return new DeviceService()\r\n    }\r\n\r\n    getDevice() {\r\n       return axios.get('/api/device');\r\n    }\r\n\r\n    getDeviceConfig() {\r\n        return axios.get('/api/device/config');\r\n    }\r\n\r\n}\r\n\r\nexport default DeviceService.Instance()","import React, {Component} from \"react\";\r\nimport {Card, Icon} from 'antd';\r\nimport DeviceService from \"../services/DeviceService\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default class DeviceView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {loading:true, device:{}}\r\n    }\r\n\r\n    componentDidMount() {\r\n        DeviceService.getDevice().then(request => {\r\n            this.setState({\"device\" : request.data, loading : false})\r\n        },\r\n        error =>{\r\n            console.log(\"error\");\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let loading = this.state.loading;\r\n        let device = this.state.device;\r\n\r\n        if (loading) {\r\n            return (<div>Loading..</div>)\r\n        }\r\n\r\n        return (\r\n\r\n            <div>\r\n                <Card title=\"Device details\" style={{width: 300}} extra={<Link to=\"/device/conf\"><Icon type=\"setting\" /></Link>}>\r\n                    <p>ID: {device.fingerprint}</p>\r\n                    <p>Name: {device.name}</p>\r\n                    <p>Model: {device.model}</p>\r\n                    <p>License: {device.license}</p>\r\n                    <p>Status: {device.status}</p>\r\n                    <p>RegisteredTo: {device.registeredTo}</p>\r\n\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {Table, Divider,Row,Col,Card,Form,Button,Input,Icon,Typography,Select,Modal,message} from 'antd';\r\nimport UserService from \"../services/UserService\";\r\n\r\nimport '../form.css';\r\nconst { Column} = Table;\r\nconst {Text} = Typography;\r\nconst { confirm } = Modal;\r\nexport default class UserListView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            users: [],\r\n            showUserDetails:false,\r\n            mode:\"Add\",\r\n            user:{userName:\"\", lastName:\"\",firstName:\"\",email:\"\",password:\"\",roles:[],id:\"\"},\r\n            roles:[],\r\n            visible: false ,\r\n        };\r\n\r\n        this.addUser=this.addUser.bind(this);\r\n        this.refresh=this.refresh.bind(this);\r\n        this.refreshUsers=this.refreshUsers.bind(this);\r\n        this.close=this.close.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh(){\r\n        UserService.getUsers().then(request => {\r\n            this.setState({\"users\": request.data, loading: false,showUserDetails:false})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n\r\n        UserService.getRoles().then(request =>{\r\n            this.setState({roles:request.data})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n    }\r\n\r\n    refreshUsers(){\r\n        this.refresh();\r\n    }\r\n\r\n    showModal = () => {\r\n        this.setState({\r\n          visible: true,\r\n        });\r\n    };\r\n\r\n\r\n    addUser(){\r\n        this.setState({mode:\"Add\",showUserDetails:true, user:{userName:\"\", lastName:\"\",firstName:\"\",email:\"\",password:\"\"}})\r\n    }\r\n\r\n    showUser(userId){\r\n        this.setState({showUserDetails:true,mode:\"Edit\"});\r\n        UserService.getUser(userId).then(response =>{\r\n            this.setState({user : response.data})\r\n        },\r\n        error=>{\r\n          message.error(error.response.data.message);\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.setState({showUserDetails:false})\r\n    }\r\n\r\n     showDeleteConfirm(userId,refresh) {\r\n      confirm({\r\n        title: 'Are you sure you want to make user inactive?',\r\n        okText: 'Yes',\r\n        okType: 'danger',\r\n        cancelText: 'No',\r\n        onOk() {\r\n          console.log('OK');\r\n          UserService.deleteUser(userId).then(response=>{\r\n            message.success(\"User Deactivated!\");\r\n            refresh();\r\n          },\r\n          error=>{\r\n            message.error(error.response.data.message);\r\n          });\r\n\r\n\r\n        },\r\n        onCancel() {\r\n          console.log('Cancel');\r\n        },\r\n      });\r\n     }\r\n\r\n    render() {\r\n\r\n     const WrappedUserForm = Form.create({name: 'user_form'})(UserForm);\r\n     const showUserDetails=this.state.showUserDetails;\r\n\r\n        return (\r\n         <div>\r\n            <Row gutter={2}>\r\n                <Col span={2}>\r\n                    <Button type=\"primary\" onClick={this.addUser}>\r\n                         + ADD\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n            <br/>\r\n            <Row gutter={24}>\r\n                <Col span={12}>\r\n                    <Card\r\n                      className=\"limitable\"\r\n                      bodyStyle={{ padding: \"0px\", width: \"100%\" }}\r\n                    >\r\n                     <Table dataSource={this.state.users} pagination={false} scroll={{ x: true}} >\r\n                            <Column title=\"Username\" dataIndex=\"userName\" key=\"userName\" render={(text, record) => (\r\n                                <span><a href={\"user/\" + record.ID}>{text}</a></span>\r\n                            )}/>\r\n                            <Column title=\"Email\" dataIndex=\"email\" key=\"email\" />\r\n                            <Column title=\"Token\" dataIndex=\"token\" key=\"token\" />\r\n                            <Column title=\"Action\" key=\"action\" render={(text, record) => (\r\n                                    <span>\r\n                                        <a onClick={this.showUser.bind(this,record.id)}>Edit</a>\r\n                                        <Divider type=\"vertical\" />\r\n                                        <a onClick={this.showDeleteConfirm.bind(this,record.id,this.refresh)}>Delete</a>\r\n                                    </span>\r\n                                )}\r\n                            />\r\n                     </Table>\r\n                    </Card>\r\n                </Col>\r\n\r\n               {showUserDetails ?\r\n                 <Col span={12}>\r\n                   <WrappedUserForm user={this.state.user} roles={this.state.roles} refresh={this.refreshUsers} close={this.close} mode={this.state.mode}/>\r\n                 </Col>\r\n                :null}\r\n\r\n            </Row>\r\n         </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass UserForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user:{},\r\n            loading: false\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.close = this.close.bind(this);\r\n\r\n    }\r\n\r\n    close(){\r\n        this.props.close();\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const form = this.props.form;\r\n        let user = {};\r\n        user.firstName = form.getFieldValue(\"firstname\");\r\n        user.userName = form.getFieldValue(\"username\");\r\n        user.lastName = form.getFieldValue(\"lastname\");\r\n        user.email = form.getFieldValue(\"email\");\r\n        user.password = form.getFieldValue(\"password\");\r\n        user.roles=form.getFieldValue(\"role\");\r\n        user.id=this.props.user.id;\r\n        let validationError;\r\n        if (!user.firstName) {\r\n            validationError = \"Missing firstname\"\r\n        }\r\n        if (!user.userName) {\r\n            validationError = \"Missing username\"\r\n        }\r\n        if (!user.lastName) {\r\n            validationError = \"Missing lastname\"\r\n        }\r\n        if (!user.email) {\r\n            validationError = \"Missing email\"\r\n        }\r\n\r\n        if(user.roles.length===0){\r\n            validationError=\"Missing role\"\r\n        }\r\n        if (validationError) {\r\n            this.setState({validationError: validationError});\r\n            return\r\n        }\r\n        this.setState({loading: true});\r\n        console.log('saving user', user);\r\n        UserService.createUser(user).then(response => {\r\n            if(user.id){\r\n                 message.success(\"User updated\")\r\n            }\r\n            else{\r\n                 message.success(\"User created\")\r\n            }\r\n            this.setState({loading: false});\r\n            this.props.refresh();\r\n\r\n        }).catch(error=> {\r\n            console.log(error);\r\n            this.setState({loading: false});\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator} = this.props.form;\r\n        const validationError = this.state.validationError;\r\n\r\n         return (\r\n            <Card title={this.props.mode ===\"Add\"? \"Add User\" : \"Edit User\"}>\r\n\r\n               <Form onSubmit={this.handleSubmit} className=\"user-form\" >\r\n                    <Form.Item label=\"Username\" className=\"formitem\">\r\n                        {getFieldDecorator('username', {\r\n                            initialValue:this.props.user.userName,\r\n                            rules: [{required: true, message: 'Please input your username!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Username\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Firstname\" className=\"formitem\">\r\n                        {getFieldDecorator('firstname', {\r\n                            initialValue:this.props.user.firstName,\r\n                            rules: [{required: true, message: 'Please input your Firstname!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Firstname\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Lastname\" className=\"formitem\">\r\n                        {getFieldDecorator('lastname', {\r\n                            initialValue:this.props.user.lastName,\r\n                            rules: [{required: true, message: 'Please input your lastname!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"text\"\r\n                                placeholder=\"Lastname\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Email\" className=\"formitem\">\r\n                        {getFieldDecorator('email', {\r\n                            initialValue:this.props.user.email,\r\n                            rules: [{required: true, message: 'Please input your email!'}],\r\n                        })(\r\n                            <Input\r\n                                type=\"email\"\r\n                                placeholder=\"email\"\r\n\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Role\" className=\"formitem\">\r\n                          {getFieldDecorator('role', {\r\n                            initialValue:this.props.user.roles,\r\n                            rules: [{ required: true, message: 'Please select role!' }],\r\n                          })(\r\n                            <Select mode=\"multiple\"\r\n                              placeholder=\"Select a role\"\r\n                            >\r\n                            {this.props.roles.map(role =>\r\n                                 <option key={role.id} value={role.name} >{role.name}</option>\r\n                             )}\r\n\r\n                            </Select>,\r\n                              )}\r\n                    </Form.Item>\r\n                    <br/>\r\n                    <div>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"user-form-button\"  size=\"small\" loading={this.state.loading}>\r\n                            Save\r\n                        </Button>\r\n                        <span>&nbsp;&nbsp;</span>\r\n                        <Button type=\"secondary\" className=\"user-form-button\"  size=\"small\" onClick={this.close}>\r\n                            Close\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {validationError && <Text type=\"danger\">{validationError}</Text>}\r\n               </Form>\r\n            </Card>\r\n\r\n\r\n         )\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport DeviceService from \"../services/DeviceService\";\r\nimport { Tabs } from 'antd';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default class DeviceConfigView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loading:true, deviceconfig:{}}\r\n    }\r\n\r\n    componentDidMount() {\r\n        DeviceService.getDeviceConfig().then(request => {\r\n            this.setState({\"deviceconfig\" : request.data, loading : false})\r\n        })\r\n    }\r\n\r\n    onTabChange(tab) {\r\n        console.log(\"tab changed\", tab)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Tabs defaultActiveKey=\"1\" onChange={this.onTabChange}>\r\n                <TabPane tab=\"Feed\" key=\"common\">\r\n                    Feed details\r\n                </TabPane>\r\n                <TabPane tab=\"Basic Intrusion\" key=\"bi\">\r\n                    Basic Intrusion\r\n                </TabPane>\r\n                <TabPane tab=\"Advanced Intrusion\" key=\"ai\">\r\n                    Advanced Intrusion\r\n                </TabPane>\r\n            </Tabs>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport UserService from \"../services/UserService\";\r\nimport {EventBus} from \"../components/event\";\r\nimport {Button, Col, Form, Icon, Input, Row, Typography, Card} from 'antd';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {history} from \"../helpers/history\";\r\nimport {Router} from 'react-router';\r\n\r\nconst {Text} = Typography;\r\n\r\n\r\nclass LoginView extends Component {\r\n\r\n    componentDidMount() {\r\n        if (UserService.isLoggedIn()) {\r\n            history.push(\"/#/\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const WrappedLoginForm = Form.create({name: 'login_form'})(LoginForm);\r\n        return (\r\n            <WrappedLoginForm/>\r\n        )\r\n    }\r\n}\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false,\r\n            loading: false,\r\n            loginError: '',\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        const form = this.props.form;\r\n        const username = form.getFieldValue(\"username\");\r\n        const password = form.getFieldValue(\"password\");\r\n        this.setState({submitted: true});\r\n\r\n        if (!(username && password)) {\r\n            return\r\n        }\r\n\r\n        this.setState({loading: true});\r\n        let self = this;\r\n        UserService.login(username, password)\r\n            .then(token => {\r\n                const {from} = history.state || {from: {pathname: \"/\"}};\r\n                history.push(from);\r\n                /* EventBus.publish('login-logout', {});*/\r\n                window.location.reload();\r\n\r\n            }).catch(error => {\r\n            this.setState({\r\n                loginError: \"Something went wrong, please try again\",\r\n                loading: false\r\n            })\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const {getFieldDecorator} = this.props.form;\r\n        const loginError = this.state.loginError;\r\n\r\n        return (\r\n            <Row>\r\n                <Col xl={{span: 8}} lg={{span: 6}} md={{span: 4}} sm={{span: 2}} xs={{span: 2}}/>\r\n                <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n                    <Card title={<img style={{}} src={\"synlabs-logo.png\"}/>} style={{top: 50}}>\r\n                        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                            <Form.Item>\r\n                                {getFieldDecorator('username', {\r\n                                    rules: [{required: true, message: 'Please input your username!'}],\r\n                                })(\r\n                                    <Input\r\n                                        prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                                        placeholder=\"Username\"\r\n                                    />,\r\n                                )}\r\n                            </Form.Item>\r\n                            <Form.Item>\r\n                                {getFieldDecorator('password', {\r\n                                    rules: [{required: true, message: 'Please input your Password!'}],\r\n                                })(\r\n                                    <Input\r\n                                        prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                                        type=\"password\"\r\n                                        placeholder=\"Password\"\r\n                                    />,\r\n                                )}\r\n                            </Form.Item>\r\n                            <Form.Item>\r\n                                <Button type=\"primary\" htmlType=\"submit\" block className=\"login-form-button\">\r\n                                    Log in\r\n                                </Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                        {loginError && <Text type=\"danger\">{loginError}</Text>\r\n                        }\r\n                    </Card>\r\n\r\n\r\n                </Col>\r\n            </Row>\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(LoginView);\r\n","\r\nimport axios from './axios';\r\n\r\nclass TriggerService {\r\n\r\n    static Instance() {\r\n        return new TriggerService()\r\n    }\r\n\r\n    getTrigger() {\r\n        return axios.get('/api/trigger/');\r\n    }\r\n\r\n    getTriggers() {\r\n        return axios.get('/api/triggers');\r\n    }\r\n\r\n    createTrigger(trigger) {\r\n        return axios.post('/api/trigger/', trigger);\r\n    }\r\n\r\n    saveTrigger(trigger) {\r\n        return axios.put('/api/trigger/' + trigger.ID, trigger);\r\n    }\r\n\r\n    deleteTrigger(trigger) {\r\n        return axios.delete('/api/trigger/' + trigger.ID);\r\n    }\r\n}\r\n\r\nexport default TriggerService.Instance()","import React, {Component} from \"react\";\r\nimport {Slider, Button, Input} from \"antd\";\r\nimport TriggerService from \"../services/TriggerService\";\r\n\r\nexport default class TriggerSet extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.days = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\r\n        this.onChange0 = this.onChange0.bind(this);\r\n        this.onChange1 = this.onChange1.bind(this);\r\n        this.onChange2 = this.onChange2.bind(this);\r\n        this.onChange3 = this.onChange3.bind(this);\r\n        this.onChange4 = this.onChange4.bind(this);\r\n        this.onChange5 = this.onChange5.bind(this);\r\n        this.onChange6 = this.onChange6.bind(this);\r\n        this.onChangeValue = this.onChangeValue.bind(this);\r\n        this.saveTrigger = this.saveTrigger.bind(this);\r\n        this.deleteTrigger = this.deleteTrigger.bind(this);\r\n        this.setName = this.setName.bind(this);\r\n\r\n        this.state = {\r\n            trigger : this.props.trigger,\r\n            changed : false\r\n        }\r\n    }\r\n\r\n    onChange0(value) { this.onChangeValue(0, value)    }\r\n    onChange1(value) { this.onChangeValue(1, value)    }\r\n    onChange2(value) { this.onChangeValue(2, value)    }\r\n    onChange3(value) { this.onChangeValue(3, value)    }\r\n    onChange4(value) { this.onChangeValue(4, value)    }\r\n    onChange5(value) { this.onChangeValue(5, value)    }\r\n    onChange6(value) { this.onChangeValue(6, value)    }\r\n\r\n    onChangeValue(idx, value) {\r\n        let trigger = this.state.trigger;\r\n        trigger.TriggerDays[idx].Start = value[0];\r\n        trigger.TriggerDays[idx].End = value[1];\r\n        this.setState({trigger:trigger, changed: true})\r\n    }\r\n\r\n    saveTrigger() {\r\n\r\n        if (this.state.trigger.new) {\r\n            TriggerService.createTrigger(this.state.trigger)\r\n        } else {\r\n            TriggerService.saveTrigger(this.state.trigger)\r\n        }\r\n\r\n    }\r\n\r\n    NewTrigger() {\r\n        let trigger = {name:\"New\", TriggerDays: [], new:true};\r\n        for (let i=0;i<7;i++) {\r\n            trigger.TriggerDays.push({\r\n                Start:0,\r\n                End:24,\r\n                Day:i,\r\n            })\r\n        }\r\n        this.setState({trigger:trigger, changed: true})\r\n    }\r\n\r\n    setName(e, value) {\r\n        let trigger = this.state.trigger;\r\n        trigger.name = e.target.value;\r\n        this.setState({trigger:trigger, changed: true});\r\n    }\r\n\r\n    deleteTrigger() {\r\n        TriggerService.deleteTrigger(this.state.trigger)\r\n    }\r\n\r\n    ChangeTrigger(trigger) {\r\n        this.setState({trigger:trigger, changed: false})\r\n    }\r\n\r\n    render() {\r\n        let selected = this.state.trigger;\r\n        let changed = this.state.changed;\r\n\r\n        if (!selected) return (<div>Waiting..</div>);\r\n        let marks = {};\r\n        for (let i = 12; i <= 24; i++) {\r\n            let j = i - 12;\r\n            marks[j] = i + ':00'\r\n        }\r\n\r\n        for (let i = 0; i <= 12; i++) {\r\n            let j = i + 12;\r\n            marks[j] = (i < 10 ? '0' : '') + i + ':00'\r\n        }\r\n\r\n\r\n        selected.TriggerDays.map((day, idx) => {\r\n            let start = day.Start;\r\n            let end = day.End;\r\n            if (start > end) {\r\n                day.Start = start - 12;\r\n                day.End = end + 12\r\n            }\r\n        });\r\n\r\n        let dlist = selected.TriggerDays;\r\n\r\n        return (\r\n            <div>\r\n                {selected.new ? (<Input placeholder=\"Name\" onChange={this.setName}/>) : (<span>{selected.ID} - {selected.name}</span>)}\r\n                <div>\r\n                    <span>{this.days[dlist[0].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[0].Start, dlist[0].End]} onChange={this.onChange0}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[1].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[1].Start, dlist[1].End]} onChange={this.onChange1}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[2].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[2].Start, dlist[2].End]} onChange={this.onChange2}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[3].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[3].Start, dlist[3].End]} onChange={this.onChange3}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[4].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[4].Start, dlist[4].End]} onChange={this.onChange4}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[5].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[5].Start, dlist[5].End]} onChange={this.onChange5}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>{this.days[dlist[6].Day]}</span>\r\n                    <Slider min={0} max={24} range marks={marks} value={[dlist[6].Start, dlist[6].End]} onChange={this.onChange6}/>\r\n                </div>\r\n\r\n                <Button type=\"primary\" disabled={!changed} onClick={this.saveTrigger}>Save</Button>\r\n                <Button type=\"link\" disabled={changed} onClick={this.deleteTrigger}>Delete</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, {Component} from \"react\";\r\nimport {Select, Button} from 'antd';\r\nimport TriggerService from \"../services/TriggerService\";\r\nimport TriggerSet from \"../components/TriggerSet\";\r\n\r\nconst {Option} = Select;\r\nexport default class TriggerView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loading: true,\r\n            triggers: []\r\n        };\r\n\r\n        this.tsRef = React.createRef();\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.newTrigger = this.newTrigger.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        TriggerService.getTriggers().then(request => {\r\n            this.setState({\r\n                triggers: request.data,\r\n                selected: request.data[0].ID,\r\n                selectedt: request.data[0],\r\n                loading: false\r\n            })\r\n        });\r\n    }\r\n\r\n    newTrigger() {\r\n        this.tsRef.current.NewTrigger();\r\n    }\r\n\r\n    handleChange(id) {\r\n\r\n        console.log(\"changing to ...\", id);\r\n\r\n        for (let i = 0; i < this.state.triggers.length; i++) {\r\n            console.log(\"checking:\", this.state.triggers[i].ID);\r\n            if (id == this.state.triggers[i].ID) {\r\n                console.log(\"selected:\", id);\r\n                this.tsRef.current.ChangeTrigger(this.state.triggers[i]);\r\n                this.setState({selected: id, selectedt: this.state.triggers[i]});\r\n                return\r\n            }\r\n        }\r\n\r\n        console.log(\"cant select:(\")\r\n    }\r\n\r\n    render() {\r\n\r\n        let selected = this.state.selected;\r\n        let selectedt = this.state.selectedt;\r\n        let triggers = this.state.triggers;\r\n\r\n        if (this.state.loading) {\r\n            triggers = [];\r\n        }\r\n\r\n        let selectedname = \"\";\r\n        if (selectedt) {\r\n            selectedname = selectedt.Name\r\n        }\r\n\r\n        console.log(\"SN\", selectedname, selected, selectedt);\r\n        let selector = (\r\n\r\n            <div>\r\n                <Select style={{width: 120}} onChange={this.handleChange}>\r\n                    {\r\n                        triggers.map((trigger, index) =>\r\n                            <Option key={trigger.ID}>{trigger.name}</Option>\r\n                        )\r\n                    }\r\n\r\n                </Select>\r\n                &nbsp;\r\n                <Button type=\"primary\" onClick={this.newTrigger}>New</Button>\r\n            </div>\r\n        );\r\n\r\n        if (selectedt) {\r\n            return (\r\n                <div>\r\n                    {selector}\r\n                    <TriggerSet trigger={selectedt} ref={this.tsRef}/>\r\n                </div>\r\n\r\n            )\r\n        }\r\n\r\n        return (\r\n            selector\r\n        )\r\n    }\r\n}","\r\nimport React, {Component} from \"react\";\r\nimport {Button, DatePicker, Icon, TimePicker} from 'antd';\r\nconst ButtonGroup = Button.Group;\r\n\r\nexport default class DeviceView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            layout: \"list\",\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 10\r\n            }\r\n        };\r\n        this.onFromDateChange = this.onFromDateChange.bind(this);\r\n        this.onFromTimeChange = this.onFromTimeChange.bind(this);\r\n        this.onToDateChange = this.onToDateChange.bind(this);\r\n        this.onToTimeChange = this.onToTimeChange.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n    }\r\n\r\n    refresh(){\r\n        this.props.handleRefresh();\r\n    }\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    changeLayout(layout) {\r\n        this.setState({\"layout\": layout});\r\n        this.props.handleLayoutChange(layout);\r\n    }\r\n\r\n   onFromDateChange(date) {\r\n       let filter = this.state.filter;\r\n       if(date!=null){\r\n         filter.fromDate = date.format(\"YYYY-MM-DD\");\r\n       }\r\n       else{\r\n           filter.fromDate=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onFromTimeChange(time) {\r\n       let filter = this.state.filter;\r\n       if(time!=null){\r\n         filter.fromTime = time.format(\"HH:mm:ss\");\r\n       }\r\n       else{\r\n           filter.fromTime=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onToDateChange(date) {\r\n       let filter = this.state.filter;\r\n       if(date!=null){\r\n         filter.toDate = date.format(\"YYYY-MM-DD\");\r\n       }\r\n       else{\r\n         filter.toDate=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n   onToTimeChange(time) {\r\n       let filter = this.state.filter;\r\n       if(time!=null){\r\n        filter.toTime = time.format(\"HH:mm:ss\");\r\n       }\r\n       else{\r\n         filter.toTime=null;\r\n       }\r\n       this.setState({filter: filter});\r\n       this.props.handleFilterChange(filter);\r\n   }\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n\r\n        return (\r\n            <div>\r\n                <span>From: </span>\r\n                <DatePicker onChange={this.onFromDateChange}/>&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60} onChange={this.onFromTimeChange}/>&nbsp;&nbsp;\r\n                <span>To: </span>\r\n                <DatePicker onChange={this.onToDateChange}/>&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60} onChange={this.onToTimeChange}/>&nbsp;&nbsp;\r\n\r\n                <ButtonGroup>\r\n                    <Button type={layout === \"list\" ? \"primary\" : \"\"} size=\"small\" icon=\"table\"\r\n                            onClick={() => {\r\n                                this.changeLayout(\"list\")\r\n                            }}/>\r\n                    <Button type={layout === \"table\" ? \"primary\" : \"\"} size=\"small\" icon=\"unordered-list\"\r\n                            onClick={() => {\r\n                                this.changeLayout(\"table\")\r\n                            }}/>\r\n                </ButtonGroup>&nbsp;&nbsp;\r\n                <Button onClick={() => {\r\n                    this.refresh()\r\n                }}><Icon type=\"reload\"/>Reload</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass AnprService {\r\n\r\n    static Instance() {\r\n        return new AnprService()\r\n    }\r\n\r\n    getEvents(filter) {\r\n        return axios.post('/api/anpr/events', filter);\r\n    }\r\n\r\n    getIncidents(filter) {\r\n        return axios.post('/api/anpr/incidents', filter);\r\n    }\r\n\r\n    getIncidentsHotlisted(filter) {\r\n        return axios.post('/api/anpr/incidents/hotListed', filter);\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        return axios.delete('/api/anpr/' + event.id);\r\n    }\r\n\r\n    archiveAllEvent(lpr) {\r\n            return axios.put('/api/anpr/events/archive/' + lpr);\r\n        }\r\n\r\n    updateEvent(event) {\r\n        return axios.put('/api/anpr/event', event);\r\n    }\r\n\r\n    getEventFile(id) {\r\n        return axios.get('/public/anpr/anprText/' + id + '/image.jpg');\r\n    }\r\n\r\n    getHelmetMissingIncidentsRepeated(filter) {\r\n            return axios.post('/api/incident/repeated/helmet-missing', filter);\r\n    }\r\n    getReverseDirectionIncidentsRepeated(filter) {\r\n            return axios.post('/api/incident/repeated/reverse', filter);\r\n    }\r\n    getBriefIncidentsRepeated(filter) {\r\n                return axios.post('/api/incident/timeline', filter);\r\n    }\r\n     getIncidentTimeline(filter) {\r\n                     return axios.post('/api/anpr/events/list/bylpr', filter);\r\n     }\r\n     getIncidentsList(filter) {\r\n                    return axios.post('/api/anpr/events/list/lpr/count', filter);\r\n     }\r\n\r\n}\r\n\r\nexport default AnprService.Instance()","import axios from \"./axios\";\r\nimport { authHeader } from '../helpers/auth-header';\r\nimport { config } from '../helpers/config'\r\n\r\nclass AnprReportService {\r\n\r\n    static Instance() {\r\n        return new AnprReportService()\r\n    }\r\n\r\n    getAnprEventsReport(req) {\r\n        const request = {\r\n            method: 'POST',\r\n            headers: authHeader(),\r\n            responseType: 'blob',\r\n            data: JSON.stringify(req),\r\n            url: config.apiUrl + 'api/anpr/anprevent'\r\n        };\r\n        return axios(request);\r\n    }\r\n\r\n}\r\n\r\nexport default AnprReportService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Divider,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Input, Button, Menu, Dropdown, Typography, Slider,\r\n    Modal,\r\n    message,  Form\r\n} from 'antd';\r\nimport GenericFilter from \"../../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../../services/AnprService\";\r\nimport Magnifier from \"react-magnifier\";\r\nimport moment from \"moment\";\r\nimport {saveAs} from \"file-saver\";\r\nimport AnprReportService from \"../../services/AnprReportService\";\r\n\r\nconst {Paragraph, Text} = Typography;\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\n\r\n\r\nexport default class AnprView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible: true,\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n            downloading: false,\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n        this.downloadAnprReport=this.downloadAnprReport.bind(this);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getEvents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getEvents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleOnClick = e => {\r\n        console.log(e);\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n//shashank\r\n    downloadAnprReport(){\r\n        this.setState({downloading:true})\r\n        let filter= this.state.filter;\r\n        var req={\r\n            fromDateString: filter.from_date !=null?moment(filter.fromDate).format('YYYY-MM-DD HH:mm:ss'):\"\",\r\n            toDateString:filter.to_date !=null? moment(filter.toDate).format('YYYY-MM-DD HH:mm:ss\"'):\"\",\r\n            lpr:filter.lpr,\r\n        }\r\n\r\n        AnprReportService.getAnprEventsReport(req).then(response => {\r\n            this.setState({downloading: false});\r\n            saveAs(response.data, \"anpr-events.csv\");\r\n        }).catch(error => {\r\n            this.setState({downloading: false});\r\n        });\r\n    }\r\n\r\n    //shashank\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return (\r\n            <div>\r\n                <h3>ANPR</h3>\r\n                <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                    <Panel header=\"Filter\" key=\"1\">\r\n\r\n                        LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/>&nbsp;&nbsp;\r\n                        <Button onClick={() => {\r\n                            this.downloadAnprReport()\r\n                        }}><Icon type=\"download\"/>Download</Button>\r\n\r\n                        <br/><br/>\r\n                        <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                       handleFilterChange={this.handleFilterChange}\r\n                                       handleLayoutChange={this.handleLayoutChange}\r\n                        />\r\n\r\n\r\n\r\n                    </Panel>\r\n                </Collapse>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </div>)\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n\r\n                                        {(event.sectionSpeed) ? <Tag color=\"#f50\">Overspeeding</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"warning\"/>{' '}\r\n                                            Archive\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                                src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        :\r\n                                        <div style={{height: \"54px\", textAlign: \"center\"}}>\r\n                                            <Button size=\"small\" type=\"dashed\" onClick={() => this.magnifyEvent(event)}>\r\n                                                <Icon type=\"zoom-in\"/>Zoom Image\r\n                                            </Button>\r\n                                        </div>\r\n\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}/>\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <Text\r\n                                        type=\"secondary\">{(event.speed) ? \"Speed: \"+event.speed : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"schedule\"/> <Moment\r\n                                            format=\"ll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"LP Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a> )}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet?\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>N/A</span>}/>\r\n                <Column title=\"Speed\" dataIndex=\"speed\" key=\"speed\"\r\n                        render={speed => <span>{speed}</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"warning\"/>{' '}\r\n                                Archive</Button>\r\n                        )}\r\n                />\r\n\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Input, Button, Menu, Dropdown, Typography, Slider\r\n} from 'antd';\r\nimport GenericFilter from \"../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../services/AnprService\";\r\nimport Magnifier from \"react-magnifier\";\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\nconst {Paragraph, Text} = Typography;\r\n\r\n\r\nexport default class TrafficIncidentView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return (<div>\r\n            <h3>Incidents</h3>\r\n            <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                <Panel header=\"Filter\" key=\"1\">\r\n                    LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/> <br/><br/>\r\n                    <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                   handleFilterChange={this.handleFilterChange}\r\n                                   handleLayoutChange={this.handleLayoutChange}/>\r\n                </Panel>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </Collapse>\r\n        </div>)\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"warning\"/>{' '}\r\n                                            Archive\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                                src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        : <div style={{height: \"54px\", textAlign: \"center\"}}>\r\n                                            <Button size=\"small\" type=\"dashed\" onClick={() => this.magnifyEvent(event)}>\r\n                                                <Icon type=\"zoom-in\"/>Zoom Image\r\n                                            </Button>\r\n                                        </div>\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}/>\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code> <Moment format=\"ll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a>)}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>Yes</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"warning\"/>{' '}\r\n                                Archive</Button>\r\n                        )}\r\n                />\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\"\r\nimport {\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Table,\r\n  Timeline,\r\n  Modal,\r\n  Button,\r\n  Typography,\r\n} from \"antd\";\r\nimport Moment from \"react-moment\";\r\n\r\nimport AnprService from \"../../services/AnprService\";\r\n\r\nconst {Paragraph, Text} = Typography;\r\nconst {Column} = Table;\r\nexport default class IncidentTimeline extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n          loading:false,\r\n          anprresponse: {},\r\n          filter:{\r\n            currentPage: 1,\r\n            pageSizes: 24,\r\n            lpr: \"\",\r\n            incidentType:\"\"\r\n          }\r\n        };\r\n\r\n       this.toggleVisible = this.toggleVisible.bind(this);\r\n       this.refreshBriefIncidentsNow = this.refreshBriefIncidentsNow.bind(this);\r\n       this.onModalPageChange = this.onModalPageChange.bind(this);\r\n              this.onModalPageSizeChange = this.onModalPageSizeChange.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        let filter = this.state.filter;\r\n        if((filter.lpr !== nextProps.lpr) || (filter.incidentType !== nextProps.incidentType)) {\r\n            filter.lpr = nextProps.lpr;\r\n            filter.incidentType = nextProps.incidentType;\r\n            this.setState({filter},()=>{\r\n              this.refreshBriefIncidentsNow();\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    toggleVisible(){\r\n        let filter = this.state.filter;\r\n                filter.currentPage = 1;\r\n                this.setState({filter: filter});\r\n                this.props.toggleVisible();\r\n\r\n    }\r\n\r\n    refreshBriefIncidentsNow() {\r\n\r\n           let {loading, filter, anprresponse} = this.state;\r\n\r\n           if(filter.lpr && filter.incidentType){\r\n              this.setState({loading : true});\r\n              AnprService.getBriefIncidentsRepeated(filter).then(request =>\r\n              {\r\n                loading = false;\r\n                anprresponse= request.data;\r\n                this.setState({loading, anprresponse});\r\n              }).catch(error=> {\r\n               loading = false;\r\n               this.setState({loading});\r\n               alert(\"Something went wrong\");\r\n                 });\r\n           }\r\n\r\n    }\r\n    onModalPageChange(currentPage, pageSizes){\r\n             let filter = this.state.filter;\r\n             filter.currentPage = currentPage;\r\n             filter.pageSizes = pageSizes;\r\n             this.refreshBriefIncidentsNow(filter);\r\n          }\r\n\r\n          onModalPageSizeChange(current, pageSizes) {\r\n               let filter = this.state.filter;\r\n               filter.pageSizes = pageSizes;\r\n               this.refreshBriefIncidentsNow(filter);\r\n            }\r\n\r\n    render(){\r\n         let events = this.state.anprresponse.events;\r\n         let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSizes;\r\n\r\n                  const paginationOption = {\r\n                         showSizeChanger: false,\r\n                         showQuickJumper: false,\r\n                         pageSize:5,\r\n                         showLessItems: true,\r\n                         onShowSizeChange: this.onModalPageSizeChange,\r\n                         onChange: this.onModalPageChange,\r\n                         total: count\r\n                     };\r\n\r\n                     const pagination = {\r\n                         ...paginationOption,\r\n                         total: count,\r\n                         current: this.state.filter.currentPage,\r\n                         pageSizes: this.state.filter.pageSizes\r\n                     };\r\n\r\n         if (this.state.loading)\r\n         {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n         }\r\n\r\n         if (!this.state.anprresponse.events){\r\n                   return <Empty description={false}/>\r\n         }\r\n\r\n        return <Modal\r\n\r\n                title={<div>{this.state.filter.incidentType}<Paragraph copyable>{this.state.filter.lpr}</Paragraph></div> }\r\n                visible={this.props.visible}\r\n                onCancel={this.toggleVisible}\r\n                onClose={this.toggleVisible}\r\n                footer={[\r\n                         <Button key=\"close\"  type=\"primary\" onClick={this.toggleVisible}>\r\n                           Close\r\n                         </Button>\r\n                        ]}\r\n                >\r\n                 <div>\r\n                                               <Table dataSource={events} pagination={pagination}>\r\n                                                    <Column title=\"When and Where\"\r\n                                                             render={(text, record, index)=> <Timeline.Item>\r\n                                                           <div>\r\n                                                             <p><Icon type=\"clock-circle\" />  <Moment format=\"lll\">{record.eventDate}</Moment></p>\r\n                                                             <p><Icon type=\"environment\"/> {record.location}</p>\r\n                                                             <a title={\"click here to download\"}\r\n                                                               href={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}\r\n                                                             download={true}>\r\n                                                             <img alt=\"event\"\r\n                                                                 src={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}style={{width:160,height:\"auto\"}}/>\r\n                                                             </a>\r\n                                                           </div>\r\n                                                             </Timeline.Item>\r\n                                                             }/>\r\n                                                    <Column  title=\"Captured Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                                                              render={id => (\r\n                                                                      <a title={\"click here to download\"}  href={\"/public/anpr/vehicle/\" + id + \"/image.jpg\"}\r\n                                                                      download={true}>\r\n                                                                      <img alt=\"event\"\r\n                                                                      src={\"/public/anpr/vehicle/\" + id + \"/image.jpg\" } style={{width:200,height:\"auto\"}}/></a>)}/>\r\n                                               </Table>\r\n                                            </div>\r\n               </Modal>\r\n    }\r\n}","import React, {Component} from \"react\"\r\nimport {Button, Card, Col, Empty, Icon, Input, Row, Spin, Table} from \"antd\";\r\nimport AnprService from \"../../services/AnprService\";\r\nimport IncidentTimeline from \"./IncidentTimeline\";\r\n\r\nconst {Column} = Table;\r\nconst {Search} = Input;\r\n\r\nconst tabList = [\r\n    {\r\n        key: 'Reverse',\r\n        tab: 'Reverse',\r\n    },\r\n    {\r\n        key: 'Helmet-Missing',\r\n        tab: 'Helmet-Missing',\r\n    },\r\n];\r\n\r\nexport default class IncidentRepeatedView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeTab: \"Reverse\",\r\n            visible: false,\r\n            timelineLpr: \"\",\r\n            filter: {\r\n                lpr: \"\"\r\n            },\r\n            helmetMissing: {\r\n                loading: false,\r\n                anprresponse: {},\r\n                filter: {\r\n                    pages: 1,\r\n                    pageSizes: 24,\r\n                    lpr: \"\",\r\n                    incidentType: \"\"\r\n                }\r\n            },\r\n            briefIncident: {\r\n                loading: false,\r\n                anprresponse: {},\r\n                filter: {\r\n                    lpr: \"\",\r\n                }\r\n            },\r\n            reverseDirection: {\r\n                loading: false,\r\n                anprresponse: {},\r\n                filter: {\r\n                    pagess: 1,\r\n                    pageSizes: 24,\r\n                    lpr: \"\",\r\n                    incidentType: \"\"\r\n                }\r\n            }\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onHelmetMissingPageChange = this.onHelmetMissingPageChange.bind(this);\r\n        this.onReverseDirectionPageChange = this.onReverseDirectionPageChange.bind(this);\r\n        this.onHelmetMissingPageSizeChange = this.onHelmetMissingPageSizeChange.bind(this);\r\n        this.onReverseDirectionPageSizeChange = this.onReverseDirectionPageSizeChange.bind(this);\r\n        this.handleTabClick = this.handleTabClick.bind(this);\r\n        this.refreshHelmetMissingIncidentsNow = this.refreshHelmetMissingIncidentsNow.bind(this);\r\n        this.refreshReverseDirectionIncidentsNow = this.refreshReverseDirectionIncidentsNow.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.search = this.search.bind(this);\r\n        this.onTabChange = this.onTabChange.bind(this);\r\n        this.toggleIncidentTimelineModal = this.toggleIncidentTimelineModal.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    handleTabClick(tabIndex) {\r\n        this.setState({\r\n            activeTabIndex:\r\n                tabIndex === this.state.activeTabIndex\r\n                    ? this.props.defaultActiveTabIndex\r\n                    : tabIndex\r\n        });\r\n    }\r\n\r\n    refresh() {\r\n        this.refreshHelmetMissingIncidentsNow();\r\n        this.refreshReverseDirectionIncidentsNow();\r\n    }\r\n\r\n    showModal = (lpr) => {\r\n        this.setState({\r\n            visible: true,\r\n            timelineLpr: lpr\r\n        });\r\n    }\r\n\r\n    toggleIncidentTimelineModal() {\r\n        let visible = this.state.visible;\r\n        this.setState({visible: !visible});\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshHelmetMissingIncidentsNow() {\r\n\r\n        let helmetMissing = this.state.helmetMissing;\r\n        helmetMissing.loading = true;\r\n        this.setState({helmetMissing: helmetMissing});\r\n\r\n        AnprService.getHelmetMissingIncidentsRepeated(this.state.helmetMissing.filter).then(request => {\r\n            helmetMissing.loading = false;\r\n            helmetMissing.anprresponse = request.data;\r\n            this.setState({helmetMissing: helmetMissing});\r\n        }).catch(error => {\r\n            helmetMissing.loading = false;\r\n            this.setState({helmetMissing: helmetMissing});\r\n            alert(\"Something went wrong\");\r\n        });\r\n    }\r\n\r\n    refreshReverseDirectionIncidentsNow() {\r\n        let reverseDirection = this.state.reverseDirection;\r\n        reverseDirection.loading = true;\r\n        this.setState({reverseDirection: reverseDirection});\r\n        AnprService.getReverseDirectionIncidentsRepeated(this.state.reverseDirection.filter).then(request => {\r\n            reverseDirection.loading = false;\r\n            reverseDirection.anprresponse = request.data;\r\n            this.setState({reverseDirection: reverseDirection});\r\n        }).catch(error => {\r\n            reverseDirection.loading = false;\r\n            this.setState({hasError: true});\r\n            alert(\"Something went wrong\");\r\n        });\r\n    }\r\n\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    search(searchText) {\r\n        let {filter, reverseDirection, helmetMissing} = this.state;\r\n        filter.lpr = searchText;\r\n        reverseDirection.filter.lpr = searchText;\r\n        helmetMissing.filter.lpr = searchText;\r\n        this.setState({filter, reverseDirection, helmetMissing}, () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    onHelmetMissingPageChange(page, pageSize) {\r\n        let filter = this.state.helmetMissing.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshHelmetMissingIncidentsNow(filter);\r\n    }\r\n\r\n    onReverseDirectionPageChange(pages, pageSizes) {\r\n        let filter = this.state.reverseDirection.filter;\r\n        filter.pages = pages;\r\n        filter.pageSizes = pageSizes;\r\n        this.refreshReverseDirectionIncidentsNow(filter);\r\n    }\r\n\r\n    onHelmetMissingPageSizeChange(current, pageSize) {\r\n        let filter = this.state.helmetMissing.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshHelmetMissingIncidentsNow(filter);\r\n    }\r\n\r\n    onReverseDirectionPageSizeChange(current, pageSizes) {\r\n        let filter = this.state.reverseDirection.filter;\r\n        filter.pageSizes = pageSizes;\r\n        this.refreshReverseDirectionIncidentsNow(filter);\r\n    }\r\n\r\n    onTabChange(key) {\r\n        this.setState({activeTab: key})\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n\r\n                </div>\r\n\r\n                <Card\r\n                    style={{width: '100%'}}\r\n                    title={<Row>\r\n                        <Col xl={{span: 16}} lg={{span: 16}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n                            <h4>Repeated Incidents</h4>\r\n                        </Col>\r\n                        <Col xl={{span: 8}} lg={{span: 8}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n\r\n                            <Search allowClear\r\n                                    placeholder=\"Search Vehicle \"\r\n                                    onChange={this.onLprInputChange}\r\n                                    style={{textAlign: \"right\"}}\r\n                                    onSearch={value => this.search(value)} enterButton\r\n                            />\r\n                        </Col>\r\n                    </Row>}\r\n\r\n                    tabList={tabList}\r\n                    activeTabKey={this.state.activeTab}\r\n\r\n                    onTabChange={key => {\r\n                        this.onTabChange(key);\r\n                    }}\r\n                >\r\n                    {this.state.activeTab === \"Reverse\" ? (this.renderReverseData()) : this.renderHelmetMissingData()}\r\n\r\n                    <IncidentTimeline\r\n                        lpr={this.state.timelineLpr}\r\n                        incidentType={this.state.activeTab}\r\n                        visible={this.state.visible}\r\n                        toggleVisible={this.toggleIncidentTimelineModal}\r\n                    />\r\n                </Card>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderReverseData() {\r\n\r\n\r\n        let events = this.state.reverseDirection.anprresponse.events;\r\n        let count = this.state.reverseDirection.anprresponse.totalPages * this.state.reverseDirection.anprresponse.pageSizes;\r\n\r\n        const paginationOption = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onReverseDirectionPageSizeChange,\r\n            onChange: this.onReverseDirectionPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOption,\r\n            total: count,\r\n            current: this.state.reverseDirection.filter.pages,\r\n            pageSizes: this.state.reverseDirection.filter.pageSizes\r\n        };\r\n\r\n        if (this.state.reverseDirection.loading) {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n        }\r\n\r\n        if (!this.state.reverseDirection.anprresponse.events) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Table dataSource={events} pagination={pagination}>\r\n\r\n                    <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                            render={anprText => <Button onClick={() => this.showModal(anprText)}>{anprText}</Button>}/>\r\n\r\n                    <Column title=\"Repeated Times\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n                            render={repeatedTimes => repeatedTimes}/>\r\n                </Table>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n    renderHelmetMissingData() {\r\n\r\n\r\n        let events = this.state.helmetMissing.anprresponse.events;\r\n        let count = this.state.helmetMissing.anprresponse.totalPages * this.state.helmetMissing.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onHelmetMissingPageSizeChange,\r\n            onChange: this.onHelmetMissingPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.helmetMissing.filter.page,\r\n            pageSize: this.state.helmetMissing.filter.pageSize\r\n        };\r\n\r\n        if (this.state.helmetMissing.loading) {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n        }\r\n\r\n        if (!this.state.helmetMissing.anprresponse.events) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Table dataSource={events} pagination={pagination}>\r\n\r\n                    <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                            render={anprText => <Button onClick={() => this.showModal(anprText)}>{anprText}</Button>}/>\r\n                    <Column title=\"Repeated Times\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n                            render={repeatedTimes => repeatedTimes}/>\r\n                </Table>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass HotListVehicleService {\r\n\r\n    static Instance() {\r\n        return new HotListVehicleService()\r\n    }\r\n\r\n    getHotListedVehicles(filter) {\r\n        return axios.post('/api/hotlist/vehicle/list', filter);\r\n    }\r\n\r\n    saveHotListedVehicle(vehicle) {\r\n        return axios.post('/api/hotlist/vehicle/save', vehicle);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default HotListVehicleService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Modal,\r\n    message, Input, Typography, Spin, Checkbox, Tag\r\n} from 'antd';\r\n\r\nimport HotListVehicleService from \"../../services/HotListVehicleService\";\r\n\r\nconst {Search} = Input;\r\nconst {Text} = Typography;\r\n\r\nexport default class HotListedVehiclesList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeModal: \"\",\r\n            hotListedVehicleResponse: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 40,\r\n                lpr: \"\"\r\n            },\r\n            workingVehicle: {\r\n                id: undefined,\r\n                lpr: \"\",\r\n                archived: false\r\n            },\r\n            loading: {\r\n                vehiclesList: false\r\n            }\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.openHotListVehicleForm = this.openHotListVehicleForm.bind(this);\r\n        this.handleSubmitWorkingHotListVehicle = this.handleSubmitWorkingHotListVehicle.bind(this);\r\n        this.handleCancelWorkingHotListVehicle = this.handleCancelWorkingHotListVehicle.bind(this);\r\n        this.archiveHotListedVehicle = this.archiveHotListedVehicle.bind(this);\r\n        this.workingVehicleOnChange = this.workingVehicleOnChange.bind(this);\r\n        this.search = this.search.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh(this.state.filter);\r\n    }\r\n\r\n    refresh(filter) {\r\n        let loading = this.state.loading;\r\n        loading.vehiclesList = true;\r\n        this.setState({loading});\r\n        HotListVehicleService.getHotListedVehicles(filter).then(response => {\r\n            loading.vehiclesList = false;\r\n            this.setState({hotListedVehicleResponse: response.data, loading})\r\n        }).catch(error => {\r\n            loading.vehiclesList = false;\r\n            this.setState({loading});\r\n            message.error('Something went wrong!');\r\n        })\r\n    }\r\n\r\n\r\n    archiveHotListedVehicle(event) {\r\n        HotListVehicleService.archiveHotListedVehicle(event).then(request => {\r\n            this.refresh(this.state.filter);\r\n            message.success('Vehicle archived!');\r\n        }).catch(error => {\r\n            message.error('Something went wrong!');\r\n        })\r\n    }\r\n\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter);\r\n    }\r\n\r\n\r\n    confirm(e) {\r\n        console.log(e);\r\n        message.success('Click on Yes');\r\n    }\r\n\r\n    cancel(e) {\r\n        console.log(e);\r\n        message.error('Click on No');\r\n    }\r\n\r\n    openHotListVehicleForm(vehicle) {\r\n        let workingVehicle = {\r\n            id: undefined,\r\n            lpr: \"\",\r\n            archived: false\r\n        };\r\n        if (vehicle) {\r\n            workingVehicle.id = vehicle.id;\r\n            workingVehicle.lpr = vehicle.lpr;\r\n            workingVehicle.archived = vehicle.archived;\r\n        }\r\n\r\n        this.setState({\r\n            activeModal: \"workingVehicle\", workingVehicle: workingVehicle\r\n        });\r\n    };\r\n\r\n    workingVehicleOnChange(e) {\r\n        let {workingVehicle} = this.state;\r\n\r\n        switch (e.target.type) {\r\n            case \"checkbox\":\r\n                workingVehicle[e.target.name] = e.target.checked;\r\n                break;\r\n            default:\r\n                workingVehicle[e.target.name] = e.target.value;\r\n                break;\r\n\r\n        }\r\n        this.setState({workingVehicle: workingVehicle});\r\n    }\r\n\r\n    handleSubmitWorkingHotListVehicle(e) {\r\n        HotListVehicleService.saveHotListedVehicle(this.state.workingVehicle).then(response => {\r\n            this.refresh(this.state.filter);\r\n            let workingVehicle = {\r\n                id: undefined,\r\n                lpr: \"\",\r\n                archived: false\r\n            };\r\n            this.setState({activeModal: \"\", workingVehicle});\r\n            message.success('Saved!');\r\n        }).catch(error => {\r\n            message.error('Something went wrong!');\r\n        })\r\n    };\r\n\r\n    handleCancelWorkingHotListVehicle(e) {\r\n        let workingVehicle = {\r\n            id: undefined,\r\n            lpr: \"\",\r\n            archived: false\r\n        };\r\n        this.setState({\r\n            activeModal: \"\",\r\n            workingVehicle\r\n        });\r\n    };\r\n\r\n    search(searchText) {\r\n        let {filter} = this.state;\r\n        filter.lpr = searchText;\r\n        this.setState({filter: filter});\r\n        this.refresh(filter)\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    render() {\r\n        let {filter, hotListedVehicleResponse, workingVehicle, loading} = this.state;\r\n\r\n        let vehicles = hotListedVehicleResponse.events;\r\n        let count = hotListedVehicleResponse.totalPages * hotListedVehicleResponse.pageSize;\r\n\r\n\r\n        if (loading.vehiclesList) {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col xl={{span: 8}} lg={{span: 8}} md={{span: 16}} sm={{span: 12}} xs={{span: 12}}>\r\n                        <Search allowClear placeholder=\"input search text\" name=\"lpr\" value={filter.lpr}\r\n                                onChange={this.onLprInputChange} onSearch={value => this.search(value)} enterButton/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <br/>\r\n                <div>\r\n                    <div>\r\n                        <Row>\r\n                            <Col xl={{span: 3}} lg={{span: 4}} md={{span: 6}} sm={{span: 8}} xs={{span: 16}}\r\n                                 key={\"new\"}>\r\n                                <Card style={{backgroundColor: \"#40a9ff\"}} hoverable\r\n                                      onClick={() => this.openHotListVehicleForm(undefined)}>\r\n                                    <div style={{textAlign: \"center\"}}>\r\n                                        <Text style={{color: \"white\"}} strong>\r\n                                            <Icon type=\"plus\"/> New</Text>\r\n                                    </div>\r\n                                </Card>\r\n                            </Col>\r\n                            {(vehicles || []).map((vehicle, index) =>\r\n                                <Col xl={{span: 3}} lg={{span: 4}} md={{span: 6}} sm={{span: 8}} xs={{span: 16}}\r\n                                     key={index}>\r\n                                    <div style={{textAlign: \"center\"}}>\r\n                                        <Card hoverable onClick={() => this.openHotListVehicleForm(vehicle)}\r\n                                              style={{backgroundColor: vehicle.archived ? \"#fafafa\" : \"\"}}>\r\n                                            <div style={{textAlign: \"center\"}}>\r\n                                                <Text delete={vehicle.archived} strong>\r\n                                                    {vehicle.lpr}\r\n                                                </Text>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </div>\r\n                                </Col>\r\n                            )}\r\n                        </Row>\r\n\r\n                        <Modal\r\n                            title={<div><Tag>{workingVehicle.id ? \"EDIT\" : \"NEW\"}</Tag>{' '}<Text\r\n                                copyable={workingVehicle.lpr.length > 0}>{workingVehicle.lpr}</Text></div>}\r\n                            visible={this.state.activeModal === \"workingVehicle\"}\r\n                            onOk={this.handleSubmitWorkingHotListVehicle}\r\n                            onCancel={this.handleCancelWorkingHotListVehicle}\r\n                        >\r\n                            <Checkbox onChange={this.workingVehicleOnChange} name={\"archived\"}\r\n                                      checked={workingVehicle.archived}>Archive</Checkbox>\r\n                            <br/>\r\n                            <br/>\r\n                            <Input onChange={this.workingVehicleOnChange} name={\"lpr\"} value={workingVehicle.lpr}\r\n                                   size=\"large\"\r\n                                   placeholder=\"Enter vehicle number here\"/>\r\n\r\n\r\n                        </Modal>\r\n\r\n\r\n                    </div>\r\n                    {(hotListedVehicleResponse && hotListedVehicleResponse.totalPages > 1) ?\r\n                        <div style={{textAlign: \"right\"}}>\r\n                            <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange}\r\n                                        showSizeChanger\r\n                                        showQuickJumper\r\n                                        defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                                        pageSize={this.state.filter.pageSize}/>\r\n                        </div> : null}\r\n\r\n\r\n                </div>\r\n\r\n            </div>)\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Input, Button, Menu, Dropdown, Typography, Slider\r\n} from 'antd';\r\nimport GenericFilter from \"../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport AnprService from \"../services/AnprService\";\r\nimport Magnifier from \"react-magnifier\";\r\nimport HotListedVehiclesList from \"../components/HotListedVehicles/HotListedVehiclesList\";\r\n\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\nconst {Paragraph, Text} = Typography;\r\nconst tabList = [\r\n    {\r\n        key: 'incidents',\r\n        tab: 'Incidents',\r\n    },\r\n    {\r\n        key: 'vehicles',\r\n        tab: 'Vehicles',\r\n    },\r\n];\r\n\r\n\r\nexport default class IncidentHotlistView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeTab: \"incidents\",\r\n            loading: true,\r\n            layout: \"list\",\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n            workingEvent: {},\r\n            workingEventLoading: false,\r\n            magnifyEvent: {\r\n                magnifyEventId: \"\",\r\n                zoomFactor: 2,\r\n                minZoomFactor: 1,\r\n                maxZoomFactor: 5\r\n            },\r\n\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.editEvent = this.editEvent.bind(this);\r\n        this.updateEvent = this.updateEvent.bind(this);\r\n        this.magnifyEvent = this.magnifyEvent.bind(this);\r\n        this.updateZoomFactor = this.updateZoomFactor.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        AnprService.getIncidentsHotlisted(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow(filter) {\r\n        AnprService.getIncidentsHotlisted(this.state.filter).then(request => {\r\n            this.setState({\"anprresponse\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        AnprService.archiveEvent(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    editEvent(event) {\r\n        this.setState({workingEvent: event});\r\n    }\r\n\r\n    magnifyEvent(event) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.magnifyEventId = event.id;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n    updateZoomFactor(zoomFactor) {\r\n        let magnifyEvent = this.state.magnifyEvent;\r\n        magnifyEvent.zoomFactor = zoomFactor;\r\n\r\n        this.setState({magnifyEvent});\r\n    }\r\n\r\n\r\n    updateEvent(anprText) {\r\n\r\n        let {workingEvent, workingEventLoading} = this.state;\r\n        workingEvent.anprText = anprText;\r\n        workingEventLoading = true;\r\n        this.setState({workingEvent, workingEventLoading});\r\n        AnprService.updateEvent(workingEvent).then(request => {\r\n            let {workingEvent, workingEventLoading} = this.state;\r\n            workingEvent.anprText = anprText;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        }).catch(error => {\r\n            alert(\"error in saving\");\r\n            let {workingEventLoading} = this.state;\r\n            workingEventLoading = false;\r\n            this.setState({workingEventLoading});\r\n        })\r\n    }\r\n\r\n    onTabChange(key) {\r\n        if (key === \"incidents\") {\r\n            this.refresh();\r\n        }\r\n        this.setState({activeTab: key})\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n\r\n        return (<div>\r\n            <Card\r\n                style={{width: '100%'}}\r\n                title=\"Hotlist\"\r\n                tabList={tabList}\r\n                activeTabKey={this.state.activeTab}\r\n                onTabChange={key => {\r\n                    this.onTabChange(key);\r\n                }}\r\n            >\r\n                {this.state.activeTab === \"incidents\" ? (this.renderIncidents()) : <HotListedVehiclesList/>}\r\n            </Card>\r\n\r\n\r\n        </div>)\r\n    }\r\n\r\n\r\n    renderIncidents() {\r\n        let layout = this.state.layout;\r\n        let lpr = this.state.filter.lpr;\r\n\r\n        return <div>\r\n            <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                <Panel header=\"Filter\" key=\"1\">\r\n                    LPR: <Input value={lpr} style={{\"width\": \"200px\"}} onChange={this.onLprInputChange}/> <br/><br/>\r\n                    <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                   handleFilterChange={this.handleFilterChange}\r\n                                   handleLayoutChange={this.handleLayoutChange}/>\r\n                </Panel>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </Collapse>\r\n\r\n        </div>;\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.anprresponse || this.state.anprresponse.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let workingEventLoading = this.state.workingEventLoading;\r\n        let workingEvent = this.state.workingEvent;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        let {magnifyEventId, zoomFactor, minZoomFactor, maxZoomFactor} = this.state.magnifyEvent;\r\n        const mid = ((maxZoomFactor - minZoomFactor) / 2).toFixed(5);\r\n        const preColor = zoomFactor >= mid ? '' : 'rgba(0, 0, 0, .45)';\r\n        const nextColor = zoomFactor >= mid ? 'rgba(0, 0, 0, .45)' : '';\r\n        const marks = {\r\n            1: {label: <span><Icon style={{color: preColor}} type=\"zoom-out\"/></span>},\r\n            2: {label: <span>2</span>},\r\n            3: {label: <span>3</span>},\r\n            4: {label: <span>4</span>},\r\n            5: {label: <span><Icon style={{color: nextColor}} type=\"zoom-in\"/></span>,}\r\n        };\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        {(event.direction && event.direction === \"rev\") ?\r\n                                            <Tag color=\"#f50\">Reverse</Tag> : null}\r\n                                        {(event.helmet) ? <Tag color=\"#f50\">Without helmet</Tag> : null}\r\n                                    </div>\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"0\" onClick={() => this.magnifyEvent(event)}><Icon type=\"zoom-in\"/>Zoom\r\n                                        image\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Full\r\n                                            image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Cropped image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"warning\"/>{' '}\r\n                                            Archive\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n                                cover={(magnifyEventId === event.id) ?\r\n                                    <Magnifier src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}\r\n                                               zoomFactor={zoomFactor}/> : <img alt=\"event\"\r\n                                                                                src={\"/public/anpr/vehicle/\" + event.id + \"/image.jpg\"}/>\r\n\r\n                                }\r\n                            >\r\n                                <div>\r\n                                    {(magnifyEventId === event.id) ?\r\n                                        <Slider\r\n                                            marks={marks}\r\n                                            min={minZoomFactor}\r\n                                            max={maxZoomFactor}\r\n                                            onChange={this.updateZoomFactor}\r\n                                            value={typeof zoomFactor === 'number' ? zoomFactor : 0}\r\n                                        />\r\n                                        : <div style={{height:\"54px\",textAlign: \"center\"}}>\r\n                                               <Button size=\"small\" type=\"dashed\" onClick={() => this.magnifyEvent(event)} >\r\n                                                   <Icon type=\"zoom-in\"/>Zoom Image\r\n                                               </Button>\r\n                                           </div>\r\n                                    }\r\n                                </div>\r\n                                <div style={{textAlign: \"center\"}}>\r\n                                    <img alt=\"event\"\r\n                                         src={\"/public/anpr/lpr/\" + event.id + \"/image.jpg\"}/>\r\n                                </div>\r\n                                <div style={{marginTop: \"5px\", textAlign: \"center\"}}\r\n                                     onClick={() => this.editEvent(event)}>\r\n                                    <Paragraph\r\n                                        strong\r\n                                        editable={{onChange: this.updateEvent}}\r\n                                        copyable>{event.anprText}</Paragraph>\r\n                                    <Text\r\n                                        type=\"secondary\">{(workingEventLoading && workingEvent.id === event.id) ? \"saving...\" : \"\"}</Text>\r\n                                    <div>\r\n                                        <Text code> <Moment format=\"ll\">{event.eventDate}</Moment>{' '}|{' '}<Moment\r\n                                            format=\"LTS\">{event.eventDate}</Moment></Text>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Text code><Icon type=\"environment\"/> {event.location}</Text>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a>)}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>Yes</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"warning\"/>{' '}\r\n                               Archive</Button>\r\n                        )}\r\n                />\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\"\r\nimport {\r\n  Empty,\r\n  Icon,\r\n  Spin,\r\n  Table,\r\n  Timeline,\r\n  Modal,\r\n  Button,\r\n  Typography,\r\n} from \"antd\";\r\nimport Moment from \"react-moment\";\r\n\r\nimport AnprService from \"../../services/AnprService\";\r\n\r\nconst {Paragraph} = Typography;\r\nconst {Column} = Table;\r\nexport default class IncidentTimeline extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n          loading:false,\r\n          anprresponse: {},\r\n          filter:{\r\n            currentPage: 1,\r\n            pageSizes: 24,\r\n            lpr: \"\",\r\n            incidentType:\"\"\r\n          }\r\n        };\r\n\r\n       this.toggleVisible = this.toggleVisible.bind(this);\r\n       this.refreshBriefIncidentsNow = this.refreshBriefIncidentsNow.bind(this);\r\n       this.onModalPageChange = this.onModalPageChange.bind(this);\r\n       this.onModalPageSizeChange = this.onModalPageSizeChange.bind(this);\r\n       this.refreshBriefIncidentsNow=this.refreshBriefIncidentsNow.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        let filter = this.state.filter;\r\n        if((filter.lpr != nextProps.lpr) || (filter.incidentType != nextProps.incidentType)) {\r\n            filter.lpr = nextProps.lpr;\r\n            filter.incidentType = nextProps.incidentType;\r\n            this.setState({filter},()=>{\r\n              this.refreshBriefIncidentsNow();\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    toggleVisible(){\r\n        let filter = this.state.filter;\r\n        filter.currentPage = 1;\r\n        this.setState({filter: filter});\r\n        this.props.toggleVisible();\r\n\r\n    }\r\n\r\n    refreshBriefIncidentsNow() {\r\n\r\n           let {loading, filter, anprresponse} = this.state;\r\n\r\n           if(filter.lpr && filter.incidentType){\r\n              this.setState({loading : true});\r\n              AnprService.getIncidentTimeline(filter).then(request =>\r\n              {\r\n                loading = false;\r\n                anprresponse= request.data;\r\n                this.setState({loading, anprresponse});\r\n              }).catch(error=> {\r\n               loading = false;\r\n               this.setState({loading});\r\n               alert(\"Something went wrong\");\r\n                 });\r\n           }\r\n\r\n    }\r\n      onModalPageChange(currentPage, pageSizes){\r\n         let filter = this.state.filter;\r\n         filter.currentPage = currentPage;\r\n         filter.pageSizes = pageSizes;\r\n         this.refreshBriefIncidentsNow(filter);\r\n      }\r\n\r\n      onModalPageSizeChange(current, pageSizes) {\r\n           let filter = this.state.filter;\r\n           filter.pageSizes = pageSizes;\r\n           this.refreshBriefIncidentsNow(filter);\r\n        }\r\n\r\n    render(){\r\n         let events = this.state.anprresponse.events;\r\n         let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSizes;\r\n\r\n         const paginationOption = {\r\n                showSizeChanger: false,\r\n                showQuickJumper: false,\r\n                pageSize:5,\r\n                showLessItems: true,\r\n                onShowSizeChange: this.onModalPageSizeChange,\r\n                onChange: this.onModalPageChange,\r\n                total: count\r\n            };\r\n\r\n            const pagination = {\r\n                ...paginationOption,\r\n                total: count,\r\n                current: this.state.filter.currentPage,\r\n                pageSizes: this.state.filter.pageSizes\r\n            };\r\n\r\n         if (this.state.loading)\r\n         {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n         }\r\n\r\n         if (!this.state.anprresponse.events){\r\n                   return <Empty description={false}/>\r\n         }\r\n\r\n        return <Modal\r\n\r\n                title={<div><Paragraph copyable>{this.state.filter.lpr}</Paragraph></div> }\r\n                visible={this.props.visible}\r\n                onCancel={this.toggleVisible}\r\n                onClose={this.toggleVisible}\r\n                footer={[\r\n                         <Button key=\"close\"  type=\"primary\" onClick={this.toggleVisible}>\r\n                           Close\r\n                         </Button>\r\n                        ]}\r\n                >\r\n                   <div>\r\n                              <Table dataSource={events} pagination={pagination}>\r\n                                   <Column title=\"When and Where\"\r\n\r\n\r\n                                            render={(text, record, index)=> <Timeline.Item>\r\n                                          <div>\r\n                                            <p><Icon type=\"clock-circle\" />  <Moment format=\"lll\">{record.eventDate}</Moment></p>\r\n                                            <p><Icon type=\"environment\"/> {record.location}</p>\r\n                                            <a title={\"click here to download\"}\r\n                                              href={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}\r\n                                            download={true}>\r\n                                            <img alt=\"event\"\r\n                                                src={\"/public/anpr/lpr/\" + record.id + \"/image.jpg\"}style={{width:160,height:\"auto\"}}/>\r\n                                            </a>\r\n                                          </div>\r\n                                            </Timeline.Item>\r\n                                            }/>\r\n                                   <Column  title=\"Captured Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                                             render={id => (\r\n                                                     <a title={\"click here to download\"}  href={\"/public/anpr/vehicle/\" + id + \"/image.jpg\"}\r\n                                                     download={true}>\r\n                                                     <img alt=\"event\"\r\n                                                     src={\"/public/anpr/vehicle/\" + id + \"/image.jpg\" }style={{width:200,height:\"auto\"}}/></a>)}/>\r\n                              </Table>\r\n                           </div>\r\n\r\n               </Modal>\r\n    }\r\n}","import React, {Component} from \"react\"\r\nimport {Button, Card, Col, Empty, Icon, Input, message, Row, Spin, Table,} from \"antd\";\r\nimport AnprService from \"../../services/AnprService\";\r\nimport IncidentTimeline from \"./IncidentTimeline\";\r\n\r\nconst {Column} = Table;\r\nconst {Search} = Input;\r\n\r\nexport default class MasterDataView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            archiveEventsLoading: \"\",\r\n            activeTab: \"All-Incidents\",\r\n            visible: false,\r\n            timelineLpr: \"\",\r\n            filter: {\r\n                lpr: \"\",\r\n            },\r\n            archiveLpr: {\r\n                anprresponse: {},\r\n                lpr: \"\",\r\n            },\r\n\r\n            allData: {\r\n                loading: false,\r\n                anprresponse: {},\r\n                filter: {\r\n                    pages: 1,\r\n                    pageSizes: 24,\r\n                    lpr: \"\",\r\n                    incidentType: \"\",\r\n                }\r\n            }\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onMasterDataPageChange = this.onMasterDataPageChange.bind(this);\r\n        this.onMasterDataPageSizeChange = this.onMasterDataPageSizeChange.bind(this);\r\n        this.handleTabClick = this.handleTabClick.bind(this);\r\n        this.refreshIncidentsNow = this.refreshIncidentsNow.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.search = this.search.bind(this);\r\n        this.onTabChange = this.onTabChange.bind(this);\r\n        this.toggleIncidentTimelineModal = this.toggleIncidentTimelineModal.bind(this);\r\n        this.archiveLprOnChange = this.archiveLprOnChange.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    handleTabClick(tabIndex) {\r\n        this.setState({\r\n            activeTabIndex:\r\n                tabIndex === this.state.activeTabIndex\r\n                    ? this.props.defaultActiveTabIndex\r\n                    : tabIndex\r\n        });\r\n    }\r\n\r\n    refresh() {\r\n        this.refreshIncidentsNow();\r\n    }\r\n\r\n    showModal = (lpr) => {\r\n        this.setState({\r\n            visible: true,\r\n            timelineLpr: lpr\r\n        });\r\n    }\r\n\r\n    toggleIncidentTimelineModal() {\r\n        let visible = this.state.visible;\r\n        this.setState({visible: !visible});\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n\r\n    refreshIncidentsNow() {\r\n        let allData = this.state.allData;\r\n        allData.loading = true;\r\n        this.setState({allData: allData});\r\n        AnprService.getIncidentsList(this.state.allData.filter).then(request => {\r\n            allData.loading = false;\r\n            allData.anprresponse = request.data;\r\n            this.setState({allData: allData});\r\n        }).catch(error => {\r\n            allData.loading = false;\r\n            this.setState({hasError: true});\r\n            alert(\"Something went wrong\");\r\n        });\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onLprInputChange(e) {\r\n        let filter = this.state.filter;\r\n        filter.lpr = e.target.value;\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    search(searchText) {\r\n        let {filter, allData} = this.state;\r\n        filter.lpr = searchText;\r\n        allData.filter.lpr = searchText;\r\n        this.setState({filter, allData}, () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    onMasterDataPageChange(pages, pageSizes) {\r\n        let filter = this.state.allData.filter;\r\n        filter.pages = pages;\r\n        filter.pageSizes = pageSizes;\r\n        this.refreshIncidentsNow(filter);\r\n    }\r\n\r\n    onMasterDataPageSizeChange(current, pageSizes) {\r\n        let filter = this.state.allData.filter;\r\n        filter.pageSizes = pageSizes;\r\n        this.refreshIncidentsNow(filter);\r\n    }\r\n\r\n    onTabChange(key) {\r\n        this.setState({activeTab: key})\r\n    }\r\n\r\n    archiveLprOnChange(lpr) {\r\n        this.setState({archiveEventsLoading: lpr});\r\n        AnprService.archiveAllEvent(lpr).then(request => {\r\n            this.setState({archiveEventsLoading: \"\"});\r\n            this.refresh(this.state.archiveLpr);\r\n            message.success('Vehicle archived!');\r\n        }).catch(error => {\r\n            this.setState({archiveEventsLoading: \"\"});\r\n            message.error('Something went wrong!');\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n\r\n                </div>\r\n\r\n                <Card\r\n                    style={{width: '100%'}}\r\n                    title={<Row>\r\n                        <Col xl={{span: 16}} lg={{span: 16}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n                            <h4>Master-Anpr-Data</h4>\r\n                        </Col>\r\n                        <Col xl={{span: 8}} lg={{span: 8}} md={{span: 12}} sm={{span: 12}} xs={{span: 12}}>\r\n\r\n                            <Search allowClear\r\n                                    placeholder=\"Search Vehicle \"\r\n                                    onChange={this.onLprInputChange}\r\n                                    style={{textAlign: \"right\"}}\r\n                                    onSearch={value => this.search(value)} enterButton\r\n                            />\r\n                        </Col>\r\n                    </Row>}\r\n\r\n\r\n                    onTabChange={key => {\r\n                        this.onTabChange(key);\r\n                    }}\r\n                >\r\n                    {this.renderMasterData()}\r\n                    <IncidentTimeline\r\n                        lpr={this.state.timelineLpr}\r\n                        incidentType={this.state.activeTab}\r\n                        visible={this.state.visible}\r\n                        toggleVisible={this.toggleIncidentTimelineModal}\r\n                    />\r\n\r\n                </Card>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderMasterData() {\r\n\r\n\r\n        let events = this.state.allData.anprresponse.events;\r\n        let count = this.state.allData.anprresponse.totalPages * this.state.allData.anprresponse.pageSizes;\r\n\r\n        let {archiveLpr} = this.state;\r\n\r\n        const paginationOption = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onMasterDataPageSizeChange,\r\n            onChange: this.onMasterDataPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOption,\r\n            total: count,\r\n            current: this.state.allData.filter.pages,\r\n            pageSizes: this.state.allData.filter.pageSizes\r\n        };\r\n\r\n        if (this.state.allData.loading) {\r\n            const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n            return <Spin indicator={antIcon}/>\r\n        }\r\n\r\n        if (!this.state.allData.anprresponse.events) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Table dataSource={events} pagination={pagination}>\r\n\r\n                    <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                            render={anprText => <Button onClick={() => this.showModal(anprText)}>{anprText}</Button>}/>\r\n\r\n                    <Column title=\"Incident Count\" dataIndex=\"repeatedTimes\" key=\"repeatedTimes\"\r\n                            render={repeatedTimes => repeatedTimes}/>\r\n\r\n                    <Column\r\n                        render={(text, record, index) => <div>\r\n                            <p><Button type={'danger'} loading={this.state.archiveEventsLoading === record.anprText}\r\n                                       onClick={() => this.archiveLprOnChange(record.anprText)}>Archive</Button></p>\r\n\r\n                        </div>\r\n                        }/>\r\n                </Table>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass ApmsService {\r\n\r\n    static Instance() {\r\n        return new ApmsService()\r\n    }\r\n\r\n    checkIn(vehicleNo) {\r\n        return axios.post('/api/apms/check/in?vehicleNo=' + vehicleNo);\r\n    }\r\n\r\n    checkOut(vehicleNo) {\r\n        return axios.post('/api/apms/check/out?vehicleNo=' + vehicleNo);\r\n    }\r\n\r\n    getEvents(filter) {\r\n        return axios.post('/api/apms/events', filter);\r\n    }\r\n\r\n    getEventStatus(vehicleNo) {\r\n        return axios.post('/api/apms/event/status?vehicleNo=' + vehicleNo);\r\n    }\r\n\r\n    getParkingSlotStats() {\r\n        return axios.get('/api/apms/guidance/stats');\r\n    }\r\n\r\n    getCheckedInVehiclesCount() {\r\n        return axios.get('/api/apms/guidance/checked-in/current/count');\r\n    }\r\n\r\n    getSlots() {\r\n        return axios.get('/api/apms/guidance/slots?lot=lucknow')\r\n    }\r\n\r\n    updateSlot(slot) {\r\n        return axios.post('/api/apms/guidance/slots', {lot:'lucknow', slot:slot.name, status:slot.free, misaligned:slot.misaligned})\r\n    }\r\n}\r\nexport default ApmsService.Instance()","import React, {Component} from \"react\";\r\nimport {Pie, Doughnut} from 'react-chartjs-2';\r\nimport {\r\n    Col,\r\n    Row,\r\n    Card,\r\n    Modal,\r\n    Menu,\r\n    DatePicker, Skeleton\r\n} from \"antd\";\r\nimport ApmsService from \"../../services/ApmsService\";\r\nimport {cloneDeep} from 'lodash';\r\nimport DashboardService from \"../../services/DashboardService\";\r\nimport CommonService from \"../../services/CommonService\";\r\nimport Moment from 'moment';\r\nimport 'chartjs-plugin-datalabels';\r\n\r\nconst {RangePicker} = DatePicker;\r\n\r\nlet fo_data = {\r\n    labels: [\r\n        'Occupied',\r\n        'Free'\r\n    ],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: [DashboardService.getColor(0), DashboardService.getColor(2)]\r\n    }]\r\n};\r\n\r\nlet misAlignedData = {\r\n    labels: [\r\n        'Aligned',\r\n        'MisAligned'\r\n    ],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: [DashboardService.getColor(6), DashboardService.getColor(1)]\r\n    }]\r\n};\r\n\r\n\r\nlet entryexit_data = {\r\n    labels: [\r\n        'Car - In',\r\n        'Bike - In',\r\n    ],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: [DashboardService.getColor(0), DashboardService.getColor(2)]\r\n    }]\r\n};\r\n\r\nexport default class ParkingDashboardView extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const baseDate = Moment();\r\n        this.state = {\r\n            loading: {\r\n                parkingEventData: false,\r\n                stats: false,\r\n                checkInEventsData: false\r\n            },\r\n            isOpencustomDateRangeModal: \"\",\r\n            fo_data: fo_data,\r\n            cb_data: {},\r\n            entryexit_data: entryexit_data,\r\n            misAlignedData: misAlignedData,\r\n            parkingEventData: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate: baseDate.startOf('day').toDate(),\r\n                    toDate: baseDate.endOf('day').toDate()\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.getParkingSlotStats = this.getParkingSlotStats.bind(this);\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n\r\n        this.getParkingVehicleCount = this.getParkingVehicleCount.bind(this);\r\n        this.getBarChartOptions = this.getBarChartOptions.bind(this);\r\n        this.selectDateRange = this.selectDateRange.bind(this);\r\n        this.selectXAxisOption = this.selectXAxisOption.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n        this.getXAxisOptions = this.getXAxisOptions.bind(this);\r\n        this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\r\n        this.getCheckedInVehiclesCount = this.getCheckedInVehiclesCount.bind(this);\r\n\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        this.getParkingSlotStats();\r\n        this.getCheckedInVehiclesCount();\r\n        this.getParkingVehicleCount(this.state.parkingEventData.filter.fromDate, this.state.parkingEventData.filter.toDate, this.state.parkingEventData.filter.selectedXAxisOption);\r\n    }\r\n\r\n    selectXAxisOption(selectedXAxisOption) {\r\n        let parkingEventData = this.state.parkingEventData;\r\n        parkingEventData.filter.selectedXAxisOption = selectedXAxisOption;\r\n        this.setState({parkingEventData: parkingEventData}, () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    getXAxisOptions() {\r\n        return (<Menu>\r\n            <Menu.Item key=\"1\"\r\n                       onClick={() => this.selectXAxisOption(\"Hourly\")}>\r\n                Hourly\r\n            </Menu.Item>\r\n            <Menu.Item key=\"5\"\r\n                       onClick={() => this.selectXAxisOption(\"Daily\")}>\r\n                Daily\r\n            </Menu.Item>\r\n        </Menu>)\r\n    }\r\n\r\n    showCustomDateRangeModal() {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: true,\r\n        });\r\n    };\r\n\r\n    selectDateRange(selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n        let {isOpencustomDateRangeModal} = this.state;\r\n        let parkingEventData = this.state.parkingEventData;\r\n        parkingEventData.filter.selectedCustomDateRange = selectedCustomDateRangeEnum;\r\n        let fromToDate = DashboardService.extractFromToDate(parkingEventData.filter.selectedCustomDateRange, selectedCustomDateRangeMoment);\r\n        parkingEventData.filter.fromDate = fromToDate.from_date;\r\n        parkingEventData.filter.toDate = fromToDate.to_date;\r\n\r\n\r\n        if (selectedCustomDateRangeEnum === \"Custom\") {\r\n            isOpencustomDateRangeModal = false\r\n        }\r\n        this.setState({parkingEventData: parkingEventData, isOpencustomDateRangeModal}, () => {\r\n            this.refresh();\r\n        });\r\n\r\n    }\r\n\r\n    handleDateRangeChange(dates, dateString) {\r\n        this.setState(() => {\r\n            this.refresh();\r\n        });\r\n\r\n    }\r\n\r\n    handleCancel = e => {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: \"\",\r\n        });\r\n    };\r\n\r\n    getParkingVehicleCount(from_date, to_date, xAxis) {\r\n        let {parkingEventData, loading} = this.state;\r\n        parkingEventData.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        loading.parkingEventData = true;\r\n        this.setState({loading});\r\n        DashboardService.getParkingVehicleCount(from_date, to_date, xAxis).then(resposne => {\r\n\r\n            let checkInEvents = resposne.data.checkInEvents;\r\n            let checkOutEvents = resposne.data.checkOutEvents;\r\n\r\n            //Get all unique labels(timestamps) from both type of incidents\r\n            let labels = [];\r\n            for (let i in checkOutEvents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    checkOutEvents[i].date = parseInt(checkOutEvents[i].date);\r\n                }\r\n                if (!labels.includes(checkOutEvents[i].date)) {\r\n                    labels.push(checkOutEvents[i].date);\r\n                }\r\n            }\r\n\r\n            for (let i in checkInEvents) {\r\n                if (xAxis === \"Hourly\") {\r\n                    checkInEvents[i].date = parseInt(checkInEvents[i].date);\r\n                }\r\n                if (!labels.includes(checkInEvents[i].date)) {\r\n                    labels.push(checkInEvents[i].date);\r\n                }\r\n            }\r\n\r\n            // sort the labels, as it is a timeseries\r\n            if (xAxis === \"Hourly\") {\r\n                labels.sort((a, b) => a - b);\r\n            }\r\n            if (xAxis === \"Daily\") {\r\n                labels.sort((a, b) => new Moment(a).format('YYYY-MM-DD') - new Moment(b).format('YYYY-MM-DD'))\r\n            }\r\n\r\n            //prepare dataset\r\n            let checkInDataset = {\r\n                label: \"Check In\",\r\n                data: [],\r\n                borderColor: DashboardService.getColor(0)\r\n            };\r\n            let checkOutDataset = {\r\n                label: \"Check Out\",\r\n                data: [],\r\n                borderColor: DashboardService.getColor(2)\r\n            };\r\n\r\n            //fill the value of dataset for each label\r\n            let dataValue = 0;\r\n            let index = -1;\r\n            for (let i in labels) {\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(checkInEvents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = checkInEvents[index].vehicleCount;\r\n                }\r\n                checkInDataset.data.push(dataValue);\r\n\r\n                dataValue = 0;\r\n                index = CommonService.findIndex(checkOutEvents, 'date', labels[i]);\r\n                if (index > -1) {\r\n                    dataValue = checkOutEvents[index].vehicleCount;\r\n                }\r\n                checkOutDataset.data.push(dataValue);\r\n            }\r\n\r\n            //finalize it with setState\r\n            parkingEventData.chartData.labels = labels;\r\n            parkingEventData.chartData.datasets.push(checkInDataset);\r\n            parkingEventData.chartData.datasets.push(checkOutDataset);\r\n            loading.parkingEventData = false;\r\n            this.setState({parkingEventData, loading});\r\n        }).catch(error => {\r\n            loading.parkingEventData = false;\r\n            this.setState({parkingEventData, loading});\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    getParkingSlotStats() {\r\n        let {fo_data, loading} = this.state;\r\n        loading.stats = true;\r\n        this.setState({loading});\r\n        ApmsService.getParkingSlotStats().then(response => {\r\n            let statsData = response.data;\r\n            fo_data.datasets[0].data[0] = statsData.parkedSlots;\r\n            fo_data.datasets[0].data[1] = statsData.freeSlots;\r\n\r\n            misAlignedData.datasets[0].data[0] = statsData.parkedSlots- statsData.parkedMisalignedSlots;\r\n            misAlignedData.datasets[0].data[1] = statsData.parkedMisalignedSlots;\r\n\r\n            let cb_data = {\r\n                label: 'Car',\r\n                labels: ['Parked Slots', 'Free Slots'],\r\n                datasets: []\r\n            };\r\n\r\n            let dataset = {\r\n                data: [statsData.carsParked, statsData.carSlots - statsData.carsParked],\r\n                label: 'Car',\r\n                labels: [\"Parked Slots\", \"Free Slots\"],\r\n                backgroundColor: [DashboardService.getColor(0), DashboardService.getColor(2)]\r\n            };\r\n            cb_data.datasets.push(cloneDeep(dataset));\r\n\r\n            dataset = {\r\n                label: 'Bike',\r\n                data: [statsData.bikesParked, statsData.bikeSlots - statsData.bikesParked],\r\n                labels: [\"Parked Slots\", \"Free Slots\"],\r\n                backgroundColor: [DashboardService.getColor(0), DashboardService.getColor(2)]\r\n            };\r\n            cb_data.datasets.push(cloneDeep(dataset));\r\n\r\n            loading.stats = false;\r\n            this.setState({fo_data, cb_data, loading});\r\n        }).catch(error => {\r\n            loading.stats = false;\r\n            this.setState({loading});\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    getBarChartOptions(chartName) {\r\n        let yAxisScaleLabel = \"Day\";\r\n        if (this.state[chartName].filter.selectedXAxisOption === \"Hourly\") {\r\n            yAxisScaleLabel = \"Hours(24-hour)\"\r\n        }\r\n        let yAxisLabel = \"Vehicles\";\r\n        if (chartName === \"parkingEventData\") {\r\n            yAxisLabel = \"Entries\"\r\n        }\r\n\r\n        return {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            animation: {\r\n                duration: 0\r\n            },\r\n            hover: {\r\n                animationDuration: 0\r\n            },\r\n            responsiveAnimationDuration: 0,\r\n            legend: {\r\n                position: 'right'\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    stacked: false,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisScaleLabel\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    stacked: false,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisLabel\r\n                    }\r\n                }]\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n\r\n    getCheckedInVehiclesCount() {\r\n        let {entryexit_data, loading} = this.state;\r\n        loading.checkInEventsData = true;\r\n        this.setState({loading});\r\n        ApmsService.getCheckedInVehiclesCount().then(response => {\r\n            let data = response.data;\r\n            entryexit_data.datasets[0].data[0] = data.checkedInCars;\r\n            entryexit_data.datasets[0].data[1] = data.checkedInBikes;\r\n\r\n            loading.checkInEventsData = false;\r\n            this.setState({entryexit_data, loading});\r\n        }).catch(error => {\r\n            loading.checkInEventsData = false;\r\n            this.setState({loading});\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    getDateRangeOptions() {\r\n        return (\r\n            <Menu>\r\n                <Menu.Item key=\"1\" onClick={() => this.selectDateRange(\"Today\")}>\r\n                    Today\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\" onClick={() => this.selectDateRange(\"Yesterday\")}>\r\n                    Yesterday\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\" onClick={() => this.selectDateRange(\"This week\")}>\r\n                    This week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\" onClick={() => this.selectDateRange(\"Last week\")}>\r\n                    Last week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\" onClick={() => this.selectDateRange(\"This month\")}>\r\n                    This month\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\" onClick={() => this.selectDateRange(\"This year\")}>\r\n                    This year\r\n                </Menu.Item>\r\n                <Menu.Item key=\"7\" onClick={() => this.selectDateRange(\"Last year\")}>\r\n                    Last year\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.showCustomDateRangeModal()}>\r\n                    Custom\r\n                </Menu.Item>\r\n\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let {fo_data, cb_data, parkingEventData, loading} = this.state;\r\n        const parkingEventsChartOptions = this.getBarChartOptions(\"parkingEventData\");\r\n        return (<div>\r\n\r\n\r\n            <Row>\r\n                <Col xl={{span: 8}} lg={{span: 8}} md={{span: 8}} sm={{span: 24}} xs={{span: 24}}>\r\n                    <Card>\r\n                        {\r\n                            loading.stats\r\n                                ? <Skeleton active/>\r\n                                : <Pie data={fo_data} options={{\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Free/Occupied Slots'\r\n                                    },\r\n                                    plugins: {\r\n                                        datalabels: {\r\n                                            display: true,\r\n                                            color: '#fff',\r\n                                            anchor: 'end',\r\n                                            align: 'start',\r\n                                            offset: -10,\r\n                                            borderWidth: 2,\r\n                                            borderColor: '#fff',\r\n                                            borderRadius: 25,\r\n                                            backgroundColor: (context) => {\r\n                                                return context.dataset.backgroundColor;\r\n                                            },\r\n                                            font: {\r\n                                                weight: 'bold',\r\n                                                size: '10'\r\n                                            },\r\n                                            formatter: (item, context) => {\r\n                                                return  item + \" Slots\";\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }}/>\r\n                        }\r\n                    </Card>\r\n                </Col>\r\n                <Col xl={{span: 8}} lg={{span: 8}} md={{span: 8}} sm={{span: 24}} xs={{span: 24}}>\r\n                    <Card>\r\n                        {\r\n                            loading.stats\r\n                                ? <Skeleton active/>\r\n                                : <Doughnut data={cb_data} options={\r\n                                    {\r\n                                        circumference: Math.PI,\r\n                                        rotation: Math.PI,\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: ' Car/Bike'\r\n                                        },\r\n                                        tooltips: {\r\n                                            callbacks: {\r\n                                                title: function (item, data) {\r\n                                                    return data.datasets[item[0].datasetIndex].label;\r\n                                                },\r\n                                                label: function (item, data) {\r\n                                                    let label = data.datasets[item.datasetIndex].labels[item.index];\r\n                                                    let value = data.datasets[item.datasetIndex].data[item.index];\r\n                                                    return label + ': ' + value;\r\n                                                }\r\n                                            }\r\n                                        },\r\n                                        plugins: {\r\n                                            datalabels: {\r\n                                                display: true,\r\n                                                color: '#fff',\r\n                                                anchor: 'end',\r\n                                                align: 'start',\r\n                                                offset: -10,\r\n                                                borderWidth: 2,\r\n                                                borderColor: '#fff',\r\n                                                borderRadius: 25,\r\n                                                backgroundColor: (context) => {\r\n                                                    return context.dataset.backgroundColor;\r\n                                                },\r\n                                                font: {\r\n                                                    weight: 'bold',\r\n                                                    size: '10'\r\n                                                },\r\n                                                formatter: (item, context) => {\r\n                                                    return context.dataset.label + \": \" + item;\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                                />\r\n                        }\r\n                    </Card>\r\n\r\n\r\n                </Col>\r\n                <Col xl={{span: 8}} lg={{span: 8}} md={{span: 8}} sm={{span: 24}} xs={{span: 24}}>\r\n                    <Card>\r\n                        {\r\n                            loading.stats\r\n                                ? <Skeleton active/>\r\n                                : <Pie data={misAlignedData} options={{\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Aligned/Mis-Aligned Occupied Slots'\r\n                                    },\r\n                                    plugins: {\r\n                                        datalabels: {\r\n                                            display: true,\r\n                                            color: '#fff',\r\n                                            anchor: 'end',\r\n                                            align: 'start',\r\n                                            offset: -10,\r\n                                            borderWidth: 2,\r\n                                            borderColor: '#fff',\r\n                                            borderRadius: 25,\r\n                                            backgroundColor: (context) => {\r\n                                                return context.dataset.backgroundColor;\r\n                                            },\r\n                                            font: {\r\n                                                weight: 'bold',\r\n                                                size: '10'\r\n                                            },\r\n                                            formatter: (item, context) => {\r\n                                                return  item + \" Slots\";\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }}/>\r\n                        }\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n\r\n            {/* <br/>\r\n\r\n            <Card title={<div>Parkings\r\n                &nbsp;\r\n                <Dropdown overlay={() => this.getDateRangeOptions(\"parkingEventData\")}>\r\n                    <Button>\r\n                        {parkingEventData.filter.selectedCustomDateRange ? parkingEventData.filter.selectedCustomDateRange : \"Select\"}\r\n                        <Icon\r\n                            type=\"down\"/>\r\n                    </Button>\r\n                </Dropdown>\r\n                &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"parkingEventData\")}>\r\n                    <Button>\r\n                        {parkingEventData.filter.selectedXAxisOption ? parkingEventData.filter.selectedXAxisOption : \"Select\"}\r\n                        <Icon\r\n                            type=\"down\"/>\r\n                    </Button>\r\n                </Dropdown>\r\n            </div>}>\r\n                {loading.parkingEventData ? <Skeleton active/> :\r\n                    <Line data={parkingEventData.chartData} options={parkingEventsChartOptions}/>}\r\n\r\n            </Card>*/}\r\n\r\n            <Modal\r\n                onCancel={this.handleCancel}\r\n                title=\"Custom Date Range\"\r\n                visible={this.state.isOpencustomDateRangeModal ? true : false}\r\n                footer={[]}\r\n\r\n            >\r\n                <RangePicker\r\n                    onChange={(changedDateRange) => this.selectDateRange(\"Custom\", changedDateRange)}/>\r\n            </Modal>\r\n        </div>)\r\n    }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {Button, Col, Row, Select, Switch} from \"antd\";\r\nimport queryString from 'query-string';\r\nimport {Group, Image, Label, Layer, Line, Stage, Star, Tag, Text} from 'react-konva';\r\nimport ApmsService from \"../../services/ApmsService\";\r\n\r\nconst {Option} = Select;\r\n\r\nclass ParkingImage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            image: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadImage();\r\n    }\r\n\r\n    componentDidUpdate(oldProps) {\r\n\r\n        if (oldProps.src !== this.props.src) {\r\n            this.loadImage();\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        this.image.removeEventListener('load', this.handleLoad);\r\n    }\r\n\r\n    handleLoad = () => {\r\n        // after setState react-konva will update canvas and redraw the layer\r\n        // because \"image\" property is changed\r\n        this.setState({\r\n            image: this.image\r\n        });\r\n        // if you keep same image object during source updates\r\n        // you will have to update layer manually:\r\n        // this.imageNode.getLayer().batchDraw();\r\n    };\r\n\r\n    loadImage() {\r\n\r\n        // save to \"this\" to remove \"load\" handler on unmount\r\n        this.image = new window.Image();\r\n        this.image.src = this.props.src;\r\n        this.image.addEventListener('load', this.handleLoad);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Image\r\n                x={this.props.x}\r\n                y={this.props.y}\r\n                image={this.state.image}\r\n                ref={node => {\r\n                    this.imageNode = node;\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default class ParkingConsoleView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            slots: {},\r\n            loading: true,\r\n\r\n            biketotal: 0,\r\n            cartotal: 0,\r\n            bikefull: 0,\r\n            carfull: 0,\r\n            img: '/public/apms/lot/lucknow/image.jpg',\r\n            baseimg: '/public/apms/lot/lucknow/image.jpg'\r\n        };\r\n        this.togglerRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.intervalID = setInterval(this.refresh.bind(this), 30 * 1000);\r\n        this.ptTimer = setInterval(this.setOccupied.bind(this), 1000);\r\n        this.refresh();\r\n    }\r\n\r\n    setOccupied() {\r\n        let slots = this.state.slots;\r\n        slots.forEach(v => {\r\n            if (!v.free) {\r\n                v.lastOccupiedSeconds++\r\n            }\r\n        });\r\n        this.setState({slots:slots});\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.intervalID);\r\n        clearInterval(this.ptTimer);\r\n    }\r\n\r\n    refresh() {\r\n\r\n        ApmsService.getSlots().then(response => {\r\n            let biketotal = 0;\r\n            let cartotal = 0;\r\n            let bikefull = 0;\r\n            let carfull = 0;\r\n\r\n            response.data.forEach((v, i) => {\r\n                switch (v.vehicleType) {\r\n                    case \"Bike\":\r\n                        biketotal++;\r\n                        if (!v.free) bikefull++;\r\n                        break;\r\n                    case \"Car\":\r\n                        cartotal++;\r\n                        if (!v.free) carfull++;\r\n                }\r\n            });\r\n\r\n\r\n            this.setState({\r\n                slots: response.data,\r\n                loading: false,\r\n                carfull: carfull,\r\n                cartotal: cartotal,\r\n                bikefull: bikefull,\r\n                biketotal: biketotal,\r\n                img: this.state.baseimg + \"?rng=\" + Math.random()\r\n            });\r\n            let params = queryString.parse(this.props.location.search);\r\n            if (params.edit) {\r\n                this.togglerRef.current.refresh(response.data)\r\n            }\r\n        })\r\n    }\r\n\r\n    getText(slot) {\r\n\r\n        if (slot.free)\r\n            return slot.misaligned ? (slot.name + \" (Misaligned)\") : slot.name;\r\n\r\n        return slot.misaligned ? (slot.name + \" (\" + this.fancyTime(slot.lastOccupiedSeconds) + \") \" + \" (Misaligned)\") : slot.name + \" (\" + this.fancyTime(slot.lastOccupiedSeconds) + \") \";\r\n    }\r\n\r\n    fancyTime(secs) {\r\n        if (secs <= 60)\r\n            return secs + \"s\";\r\n        if (secs <= 3600)\r\n            return Math.floor(secs / 60) +\"m\" + (secs % 60) + \"s\";\r\n    }\r\n    render() {\r\n        const loading = this.state.loading;\r\n        const data = this.state.slots;\r\n        const biketotal = this.state.biketotal;\r\n        const cartotal = this.state.cartotal;\r\n        const bikefull = this.state.bikefull;\r\n        const carfull = this.state.carfull;\r\n        const img = this.state.img;\r\n\r\n        console.log(\"R\", carfull, cartotal, bikefull, biketotal);\r\n        if (loading || !data) {\r\n            return (<div>Loading...</div>)\r\n        }\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n        return (\r\n\r\n            <div>\r\n                <Row>\r\n                    <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n                        <Stage width={1280} height={724}>\r\n                            <Layer>\r\n                                <ParkingImage src={img}/>\r\n                                {Object.keys(data).map((k) => (\r\n                                    <Line\r\n                                        key={k}\r\n                                        points={[data[k].p1x, data[k].p1y, data[k].p2x, data[k].p2y, data[k].p3x, data[k].p3y, data[k].p4x, data[k].p4y,]}\r\n                                        stroke=\"red\" closed={true}/>\r\n                                ))}\r\n                                {Object.keys(data).map((k) => (\r\n                                    <Group>\r\n                                        <Label x={data[k].x}\r\n                                               y={data[k].y}\r\n\r\n                                        >\r\n                                            <Tag\r\n\r\n                                                fill={'black'}\r\n                                                pointerDirection='down'\r\n                                                pointerWidth={10}\r\n                                                pointerHeight={10}\r\n                                                lineJoin='round'\r\n                                                shadowColor={'black'}\r\n                                            />\r\n                                            <Text\r\n\r\n                                                text={this.getText(data[k])}\r\n                                                fontFamily='Calibri'\r\n                                                fontSize={12}\r\n                                                padding={3}\r\n                                                fill='white'\r\n                                            />\r\n\r\n\r\n                                        </Label>\r\n                                        <Star\r\n                                            key={k}\r\n                                            x={data[k].x}\r\n                                            y={data[k].y}\r\n                                            numPoints={20}\r\n                                            innerRadius={10}\r\n                                            outerRadius={10}\r\n                                            fill={data[k].free ? \"green\" : (data[k].misaligned ? 'blue' : 'red')}\r\n                                            opacity={1.0}\r\n                                            rotation={30}\r\n                                        />\r\n                                    </Group>\r\n                                ))}\r\n                            </Layer>\r\n                        </Stage>\r\n                    </Col>\r\n                    {/*\r\n                    <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n                        <Card>\r\n\r\n                            Car: <Slider value={carfull} tooltipVisible max={cartotal}/>\r\n                            Bike: <Slider value={bikefull} tooltipVisible max={biketotal}/>\r\n\r\n\r\n                        </Card>\r\n\r\n                    </Col>\r\n                    */}\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        {params.edit && <SlotToggler ref={this.togglerRef} slots={data}/>}\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass SlotToggler extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let slotmap = {};\r\n        props.slots.forEach(v => {\r\n            slotmap[v.name] = v;\r\n        });\r\n\r\n        this.state = {\r\n            slots: slotmap,\r\n            selectedSlot: \"C1\",\r\n            ss: slotmap[\"C1\"]\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.updateSlot = this.updateSlot.bind(this);\r\n        this.onAlignmentChange = this.onAlignmentChange.bind(this);\r\n        this.onFreeChange = this.onFreeChange.bind(this);\r\n    }\r\n\r\n    refresh(data) {\r\n        let slotmap = {};\r\n\r\n        data.forEach(v => {\r\n            slotmap[v.name] = v;\r\n        });\r\n        let ss = slotmap[this.state.selectedSlot];\r\n        this.setState({\r\n            slots: slotmap,\r\n            ss: ss\r\n        });\r\n    }\r\n\r\n    handleChange(value) {\r\n        let slot = this.state.slots[this.state.selectedSlot];\r\n        this.setState({selectedSlot: value, ss: slot});\r\n    }\r\n\r\n    onAlignmentChange(value) {\r\n        let slot = this.state.ss;\r\n        slot.misaligned = value;\r\n        this.setState({ss: slot});\r\n    }\r\n\r\n    onFreeChange(value) {\r\n        let slot = this.state.ss;\r\n        slot.free = value;\r\n        this.setState({ss: slot});\r\n    }\r\n\r\n    updateSlot() {\r\n        ApmsService.updateSlot(this.state.ss)\r\n    }\r\n\r\n    render() {\r\n        const ss = this.state.ss;\r\n        const slots = this.props.slots;\r\n        return (\r\n            <div>\r\n                <table>\r\n                    <tr>\r\n                        <th>Slot</th>\r\n                        <th>Free</th>\r\n                        <th>MisAligned</th>\r\n                        <th>&nbsp;</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <Select onChange={this.handleChange} value={ss.name}>\r\n\r\n                                {(slots || []).map((slot, index) => {\r\n                                    return <Option value={slot.name}>{slot.name}</Option>\r\n                                })}\r\n\r\n                            </Select>\r\n                        </td>\r\n                        <td>\r\n                            <Switch checked={ss.free} onChange={this.onFreeChange}/>\r\n                        </td>\r\n                        <td>\r\n                            <Switch checked={ss.misaligned} onChange={this.onAlignmentChange}/>\r\n                        </td>\r\n                        <td><Button onClick={this.updateSlot}>GO</Button></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from \"./axios\";\r\nimport moment from 'moment';\r\nimport { authHeader } from '../helpers/auth-header';\r\nimport { config } from '../helpers/config'\r\n\r\nclass ReportService {\r\n\r\n    static Instance() {\r\n        return new ReportService()\r\n    }\r\n\r\n    getParkingEventsReport(req) {\r\n\r\n         const request = {\r\n                method: 'POST',\r\n                headers: authHeader(),\r\n                responseType: 'blob',\r\n                data: JSON.stringify(req),\r\n                url: config.apiUrl + 'api/report/parkingevents'\r\n            };\r\n        return axios(request);\r\n    }\r\n\r\n}\r\n\r\nexport default ReportService.Instance()","import React, {Component} from \"react\";\r\nimport {Button, Card, DatePicker, Dropdown, Icon, Menu, Modal, Select,Row,Col,Form,Spin} from \"antd\";\r\nimport DashboardService from \"../../services/DashboardService\";\r\nimport ReportService from \"../../services/ReportService\";\r\nimport CommonService from \"../../services/CommonService\";\r\nimport moment from 'moment';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst {Option} = Select;\r\nconst {RangePicker} = DatePicker;\r\n\r\nexport default class HomeView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpencustomDateRangeModal: \"\",\r\n            atcc: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"All Entry-Exit\",\r\n                    fromDate: moment().startOf('day').toDate(),\r\n                    toDate: moment().endOf('day').toDate(),\r\n                    reportType:\"CSV\",\r\n                    filterType:\"inout\"\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            }, incident: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate: {},\r\n                    toDate: {}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            },\r\n            downloading:false,\r\n        };\r\n\r\n        this.selectDateRange = this.selectDateRange.bind(this);\r\n        this.selectXAxisOption = this.selectXAxisOption.bind(this);\r\n\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n        this.getXAxisOptions = this.getXAxisOptions.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.downloadReport = this.downloadReport.bind(this);\r\n        this.handleChangeReportType = this.handleChangeReportType.bind(this);\r\n    }\r\n\r\n    handleChange(value) {\r\n\r\n        let atcc= {...this.state.atcc}\r\n        let filter= atcc.filter;\r\n        filter.filterType= value;\r\n\r\n        this.setState({atcc:atcc})\r\n    }\r\n\r\n    handleChangeReportType(value) {\r\n        let atcc= {...this.state.atcc}\r\n        let filter= atcc.filter;\r\n        filter.reportType= value;\r\n        this.setState({atcc:atcc})\r\n    }\r\n\r\n    showCustomDateRangeModal(graphName) {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: graphName,\r\n        });\r\n    };\r\n\r\n    handleCancel = e => {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: \"\",\r\n        });\r\n    };\r\n\r\n    selectDateRange(graphName, selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n        let {isOpencustomDateRangeModal} = this.state;\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedCustomDateRange = selectedCustomDateRangeEnum;\r\n        let fromToDate = DashboardService.extractFromToDate(graph.filter.selectedCustomDateRange, selectedCustomDateRangeMoment);\r\n        graph.filter.fromDate = fromToDate.from_date;\r\n        graph.filter.toDate = fromToDate.to_date;\r\n\r\n\r\n        if (selectedCustomDateRangeEnum === \"Custom\") {\r\n            isOpencustomDateRangeModal = \"\"\r\n        }\r\n        this.setState({[graphName]: graph, isOpencustomDateRangeModal}, () => {\r\n          //  this.refresh();\r\n        });\r\n\r\n    }\r\n\r\n    downloadReport(){\r\n        this.setState({downloading:true})\r\n       let filter= this.state.atcc.filter;\r\n        var req={\r\n             fromDateString: moment(filter.fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n             toDateString: moment(filter.toDate).format('YYYY-MM-DD HH:mm:ss\"'),\r\n             xAxis: filter.selectedXAxisOption,\r\n             reportType:filter.reportType,\r\n             filterType:filter.filterType\r\n        }\r\n\r\n        ReportService.getParkingEventsReport(req).then(response => {\r\n            this.setState({downloading: false});\r\n\r\n            if(filter.reportType==\"CSV\"){\r\n                 saveAs(response.data, \"parking-events.csv\");\r\n            }\r\n            else if(filter.reportType==\"JSON\"){\r\n                 saveAs(response.data, \"parking-events.json\");\r\n            }\r\n\r\n        }).catch(error => {\r\n            this.setState({downloading: false});\r\n        });\r\n    }\r\n\r\n    selectXAxisOption(graphName, selectedXAxisOption) {\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedXAxisOption = selectedXAxisOption;\r\n        this.setState({[graphName]: graph});\r\n    }\r\n\r\n    getXAxisOptions(graphName) {\r\n        return (<Menu>\r\n\r\n            <Menu.Item key=\"1\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"All Entry-Exit\")}>\r\n                All Entry-Exit\r\n            </Menu.Item>\r\n            <Menu.Item key=\"5\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"DayWise Summary\")}>\r\n                DayWise Summary\r\n            </Menu.Item>\r\n        </Menu>)\r\n    }\r\n\r\n    getDateRangeOptions(graphName) {\r\n        return (\r\n            <Menu>\r\n                <Menu.Item key=\"1\" onClick={() => this.selectDateRange(graphName, \"Today\")}>\r\n                    Today\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\" onClick={() => this.selectDateRange(graphName, \"Yesterday\")}>\r\n                    Yesterday\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\" onClick={() => this.selectDateRange(graphName, \"This week\")}>\r\n                    This week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\" onClick={() => this.selectDateRange(graphName, \"Last week\")}>\r\n                    Last week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\" onClick={() => this.selectDateRange(graphName, \"This month\")}>\r\n                    This month\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\" onClick={() => this.selectDateRange(graphName, \"This year\")}>\r\n                    This year\r\n                </Menu.Item>\r\n                <Menu.Item key=\"7\" onClick={() => this.selectDateRange(graphName, \"Last year\")}>\r\n                    Last year\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.showCustomDateRangeModal(graphName)}>\r\n                    Custom\r\n                </Menu.Item>\r\n\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let {atcc, incident} = this.state;\r\n        const antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n        return (\r\n            <div>\r\n                <div>\r\n\r\n                    <Modal\r\n                        onCancel={this.handleCancel}\r\n                        title=\"Custom Date Range\"\r\n                        visible={this.state.isOpencustomDateRangeModal ? true : false}\r\n                        footer={[]}\r\n                    >\r\n                        <RangePicker\r\n                            onChange={(changedDateRange) => this.selectDateRange(this.state.isOpencustomDateRangeModal, \"Custom\", changedDateRange)}/>\r\n                    </Modal>\r\n                </div>\r\n                <Row>\r\n                     <Col xl={{span: 8}} lg={{span: 6}} md={{span: 4}} sm={{span: 2}} xs={{span: 2}}/>\r\n                     <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n                         <Card title={<div>Parking Guidance Report</div>}>\r\n                             <Form>\r\n                                 <Form.Item>\r\n                                    Select Date Range\r\n                                    <Dropdown overlay={() => this.getDateRangeOptions(\"atcc\")}>\r\n                                        <Button style={{width: '-webkit-fill-available'}}>\r\n                                            {atcc.filter.selectedCustomDateRange ? atcc.filter.selectedCustomDateRange : \"Select\"}\r\n                                            <Icon\r\n                                                type=\"down\"/>\r\n                                        </Button>\r\n                                    </Dropdown>\r\n                                 </Form.Item>\r\n\r\n                                  <Form.Item>\r\n                                     Report Type\r\n                                     <Dropdown overlay={() => this.getXAxisOptions(\"atcc\")}>\r\n                                        <Button style={{width: '-webkit-fill-available'}}>\r\n                                             {atcc.filter.selectedXAxisOption ? atcc.filter.selectedXAxisOption : \"Select\"} <Icon\r\n                                             type=\"down\"/>\r\n                                         </Button>\r\n                                     </Dropdown>\r\n\r\n                                  </Form.Item>\r\n                                  {/*<Form.Item>\r\n\r\n                                     <Select defaultValue=\"inout\" onChange={this.handleChange}>\r\n                                         <Option value=\"inout\">In/Out Report</Option>\r\n                                     </Select>\r\n\r\n                                  </Form.Item> */}\r\n                                   <Form.Item>\r\n                                        Report Format\r\n                                       <Select defaultValue=\"CSV\" onChange={this.handleChangeReportType}>\r\n                                           <Option value=\"CSV\">CSV</Option>\r\n                                           <Option value=\"JSON\">JSON</Option>\r\n                                       </Select>\r\n\r\n                                   </Form.Item>\r\n                                 <Form.Item>\r\n                                  <Button type=\"primary\" htmlType=\"submit\" onClick={this.downloadReport} block loading={this.state.downloading}>\r\n                                         Download\r\n                                  </Button>\r\n                                 </Form.Item>\r\n                             </Form>\r\n\r\n                         </Card>\r\n                     </Col>\r\n                </Row>\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Icon,\r\n    Row,\r\n    Table,\r\n    Input, Button, Spin\r\n} from 'antd';\r\n\r\nimport Moment from \"react-moment\";\r\nimport moment from \"moment\";\r\nimport ApmsService from \"../../services/ApmsService\";\r\n\r\nconst {Column} = Table;\r\nconst {Search} = Input;\r\nconst antIcon = <Icon type=\"loading\" style={{fontSize: 24}} spin/>;\r\n\r\nexport default class ParkingInOutView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: {\r\n                checkIn: false,\r\n                checkOut: false\r\n            },\r\n\r\n            vehicleLastParkingEvent: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 10,\r\n                loading: false,\r\n                apmsresponse: {},\r\n                vehicleNo: \"\",\r\n            }\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.copyVehicleNo = this.copyVehicleNo.bind(this);\r\n        this.getEventsList = this.getEventsList.bind(this);\r\n        this.addCheckIn = this.addCheckIn.bind(this);\r\n        this.onLprInputChange = this.onLprInputChange.bind(this);\r\n        this.addCheckOut = this.addCheckOut.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n    }\r\n\r\n    refresh() {\r\n        let filter = this.state.filter;\r\n        filter.page = 1;\r\n        this.getEventsList(filter);\r\n        if (filter.vehicleNo && filter.vehicleNo.length > 2) {\r\n            this.getEventsStatus(filter.vehicleNo);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n\r\n    onLprInputChange(e) {\r\n        let filter = this.state.filter;\r\n        filter.vehicleNo = e.target.value;\r\n        this.setState({filter: filter});\r\n        if (filter.vehicleNo && filter.vehicleNo.length > 2) {\r\n            this.getEventsStatus(filter.vehicleNo);\r\n        }\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.getEventsList(filter)\r\n\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.getEventsList(filter);\r\n    }\r\n\r\n    copyVehicleNo(vehicleNo) {\r\n        let filter = this.state.filter;\r\n        filter.vehicleNo = vehicleNo;\r\n        this.setState({filter: filter});\r\n        if (filter.vehicleNo && filter.vehicleNo.length > 2) {\r\n            this.getEventsStatus(filter.vehicleNo);\r\n        }\r\n    }\r\n\r\n    addCheckIn() {\r\n\r\n        let vehicleNo = this.state.filter.vehicleNo;\r\n        let {loading} = this.state;\r\n        if (vehicleNo) {\r\n            loading.checkIn = true;\r\n            this.setState({loading});\r\n            ApmsService.checkIn(vehicleNo).then(response => {\r\n                this.refresh();\r\n                loading.checkIn = false;\r\n                this.setState({loading});\r\n            }).catch(error => {\r\n                loading.checkIn = false;\r\n                this.setState({loading});\r\n                alert(\"Something went wrong\");\r\n            })\r\n        }\r\n    }\r\n\r\n    addCheckOut() {\r\n        let vehicleNo = this.state.filter.vehicleNo;\r\n        let {loading} = this.state;\r\n        if (vehicleNo) {\r\n            loading.checkOut = true;\r\n            this.setState({loading});\r\n            ApmsService.checkOut(vehicleNo).then(response => {\r\n                loading.checkOut = false;\r\n                this.setState({loading});\r\n                this.refresh();\r\n            }).catch(error => {\r\n                loading.checkOut = false;\r\n                this.setState({loading});\r\n                alert(\"Something went wrong\");\r\n            })\r\n        }\r\n    }\r\n\r\n    getEventsStatus(vehicleNo) {\r\n        ApmsService.getEventStatus(vehicleNo).then(response => {\r\n            this.setState({vehicleLastParkingEvent: response.data})\r\n        }).catch(error => {\r\n            alert(\"Something went wrong\");\r\n        });\r\n    }\r\n\r\n    getEventsList(filter) {\r\n\r\n        filter.loading = true;\r\n        this.setState({filter: filter});\r\n\r\n        ApmsService.getEvents(filter).then(response => {\r\n            filter.loading = false;\r\n            filter.apmsresponse = response.data;\r\n            for (var i in filter.apmsresponse.events) {\r\n                filter.apmsresponse.events[i].timeDiff = this.getTimeDifference(filter.apmsresponse.events[i]);\r\n            }\r\n            this.setState({filter: filter});\r\n        }).catch(error => {\r\n            filter.loading = false;\r\n            this.setState({hasError: true});\r\n            alert(\"Something went wrong\");\r\n        });\r\n    }\r\n\r\n    getTimeDifference(record) {\r\n        var a = moment(record.checkIn);\r\n        var b = moment(record.checkOut);\r\n\r\n        if (a & b) {\r\n            return (moment.utc(moment(b, \"DD/MM/YYYY HH:mm\").diff(moment(a, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\"))\r\n        }\r\n    }\r\n\r\n    isEmpty(obj) {\r\n\r\n        // null and undefined are \"empty\"\r\n        if (obj == null) return true;\r\n\r\n        // Assume if it has a length property with a non-zero value\r\n        // that that property is correct.\r\n        if (obj.length > 0) return false;\r\n        if (obj.length === 0) return true;\r\n\r\n        // If it isn't an object at this point\r\n        // it is empty, but it can't be anything *but* empty\r\n        // Is it empty?  Depends on your application.\r\n        if (typeof obj !== \"object\") return true;\r\n\r\n        // Otherwise, does it have any properties of its own?\r\n        // Note that this doesn't handle\r\n        // toString and valueOf enumeration bugs in IE < 9\r\n        for (let key in obj) {\r\n            if (hasOwnProperty.call(obj, key)) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    getEventId() {\r\n        let filter = {...this.state.filter};\r\n        if (!filter.loading) {\r\n            if (filter.apmsresponse.events) {\r\n                if (filter.apmsresponse.events.length > 0) {\r\n                    return parseInt(filter.apmsresponse.events[0].id);\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    render() {\r\n\r\n        let filter = this.state.filter;\r\n        let events = this.state.filter.apmsresponse.events;\r\n        let vehicleNo = this.state.filter.vehicleNo;\r\n        let vehicleLastParkingEvent = this.state.vehicleLastParkingEvent;\r\n        let loading = this.state.loading;\r\n        let count = this.state.filter.apmsresponse.totalPages * this.state.filter.apmsresponse.pageSize;\r\n\r\n        const paginationOption = {\r\n            showSizeChanger: false,\r\n            showQuickJumper: false,\r\n\r\n            showLessItems: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n        const pagination = {\r\n            ...paginationOption,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSizes: this.state.filter.pageSize\r\n        };\r\n\r\n        let disableCheckIn = true;\r\n        let disableCheckOut = true;\r\n\r\n        if ((this.isEmpty(vehicleLastParkingEvent) || vehicleLastParkingEvent.checkOut) && vehicleNo) {\r\n            disableCheckIn = false;\r\n        }\r\n        if ((!(this.isEmpty(vehicleLastParkingEvent)) && (!vehicleLastParkingEvent.checkOut)) && vehicleNo) {\r\n            disableCheckOut = false;\r\n\r\n        }\r\n\r\n        return (\r\n\r\n            <div>\r\n                <h3>Parking Event</h3>\r\n                <Card>\r\n                    <Row>\r\n                        <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n\r\n                            <img width=\"440\" height=\"260\"\r\n                                 src={\"/public/apms/parking/event/\" + vehicleLastParkingEvent.id + \"/image.jpg\"}/>\r\n\r\n                        </Col>\r\n\r\n                        <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n\r\n                            <Search allowClear\r\n                                    value={vehicleNo}\r\n                                    placeholder=\"Enter Vehicle No.\"\r\n                                    enterButton=\"Search\"\r\n                                    onChange={this.onLprInputChange}\r\n                                    size=\"large\"\r\n\r\n                                    onSearch={() => this.onPageChange(1, filter.pageSize)}\r\n\r\n                            /><br/><br/><br/>\r\n\r\n\r\n                            <Button type=\"primary\" size=\"large\" block=\"false\" icon={\"arrow-down\"}\r\n                                    loading={loading.checkIn} disabled={disableCheckIn}\r\n                                    onClick={() => this.addCheckIn()}>\r\n                                Entry\r\n                            </Button><br/><br/><br/>\r\n\r\n\r\n                            <Button type=\"primary\" size=\"large\" block=\"false\" icon={\"arrow-up\"}\r\n                                    loading={loading.checkOut} disabled={disableCheckOut}\r\n                                    onClick={() => this.addCheckOut()}>\r\n                                Exit\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <br/>\r\n                </Card>\r\n\r\n\r\n                {\r\n                    this.state.filter.loading\r\n                        ? <Spin indicator={antIcon}/>\r\n                        : <div>\r\n\r\n                            <div>\r\n                                <Table dataSource={events} pagination={pagination}>\r\n\r\n                                    <Column title=\"Vehicle no.\" dataIndex=\"vehicleNo\" key=\"vehicleNo\"\r\n\r\n                                            render={vehicleNo => (<Button\r\n                                                onClick={() => this.copyVehicleNo(vehicleNo)}>{vehicleNo}</Button>)}/>\r\n                                    <Column title=\"Entry-time\" dataIndex=\"checkIn\" key=\"checkIn\"\r\n                                            render={checkIn => (<div>\r\n                                                <div><Moment format=\"LLL\">{checkIn}</Moment></div>\r\n                                                <Moment fromNow>{checkIn}</Moment></div>)}/>\r\n                                    <Column title=\"Exit-time\" dataIndex=\"checkOut\" key=\"checkOut\"\r\n                                            render={checkOut => (checkOut ? <div>\r\n                                                    <div>\r\n                                                        <Moment format=\"LLL\">{checkOut}</Moment>\r\n                                                    </div>\r\n                                                    <Moment fromNow>{checkOut}</Moment>\r\n                                                </div> : \"\"\r\n                                            )}\r\n                                    />\r\n                                    <Column title=\"Time-diff(HH:mm)\" render={(text, record) => (record.timeDiff)}/>\r\n                                </Table>\r\n                            </div>\r\n                        </div>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n","import React, {Component} from \"react\";\r\nimport {Button, DatePicker, Icon, TimePicker} from 'antd';\r\n\r\n\r\nexport default class DeviceView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            layout: \"list\",\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 10\r\n            }\r\n        };\r\n        this.onFromDateChange = this.onFromDateChange.bind(this);\r\n        this.onFromTimeChange = this.onFromTimeChange.bind(this);\r\n        this.onToDateChange = this.onToDateChange.bind(this);\r\n        this.onToTimeChange = this.onToTimeChange.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n    }\r\n\r\n    refresh() {\r\n        this.props.handleRefresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    onFromDateChange(date) {\r\n        let filter = this.state.filter;\r\n        if (date != null) {\r\n            filter.fromDate = date.format(\"YYYY-MM-DD\");\r\n        } else {\r\n            filter.fromDate = null;\r\n        }\r\n        this.setState({filter: filter});\r\n        this.props.handleFilterChange(filter);\r\n    }\r\n\r\n    onFromTimeChange(time) {\r\n        let filter = this.state.filter;\r\n        if (time != null) {\r\n            filter.fromTime = time.format(\"HH:mm:ss\");\r\n        } else {\r\n            filter.fromTime = null;\r\n        }\r\n        this.setState({filter: filter});\r\n        this.props.handleFilterChange(filter);\r\n    }\r\n\r\n    onToDateChange(date) {\r\n        let filter = this.state.filter;\r\n        if (date != null) {\r\n            filter.toDate = date.format(\"YYYY-MM-DD\");\r\n        } else {\r\n            filter.toDate = null;\r\n        }\r\n        this.setState({filter: filter});\r\n        this.props.handleFilterChange(filter);\r\n    }\r\n\r\n    onToTimeChange(time) {\r\n        let filter = this.state.filter;\r\n        if (time != null) {\r\n            filter.toTime = time.format(\"HH:mm:ss\");\r\n        } else {\r\n            filter.toTime = null;\r\n        }\r\n        this.setState({filter: filter});\r\n        this.props.handleFilterChange(filter);\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n        return (\r\n            <div>\r\n                <span>From: </span>\r\n                <DatePicker onChange={this.onFromDateChange}/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60}\r\n                            onChange={this.onFromTimeChange}/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <span>To: </span>\r\n                <DatePicker onChange={this.onToDateChange}/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <TimePicker minuteStep={15} secondStep={60}\r\n                            onChange={this.onToTimeChange}/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <Button onClick={() => {\r\n                    this.refresh()\r\n                }}><Icon type=\"reload\"/>Reload</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from \"./axios\";\r\n\r\nclass ApcFileService{\r\nstatic Instance() {\r\n        return new ApcFileService()\r\n}\r\n\r\ngetPeopleData(filter) {\r\n        return axios.post('/api/apc/pplData', filter);\r\n}\r\n\r\n\r\n archiveEvent(event) {\r\n        return axios.delete('/api/apc/'+ event.id);\r\n    }\r\n}\r\nexport default ApcFileService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Collapse,\r\n    Empty,\r\n    Table,\r\n    message, Input, Typography\r\n} from 'antd';\r\n\r\nimport ApcGenericFilter from \"./ApcGenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport ApcFileService from \"../../services/ApcFileService\";\r\n\r\nconst {Paragraph} = Typography;\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\n\r\nexport default class PeopleCounting extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            events: {},\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 24\r\n\r\n            },\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.onEventIdInputChange = this.onEventIdInputChange.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = current;// Here i made change\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter);\r\n    }\r\n\r\n    refresh(filter) {\r\n        if (!filter) {\r\n            filter = this.state.filter;\r\n        }\r\n        this.setState({loading: true});\r\n        ApcFileService.getPeopleData(filter).then(response => {\r\n            let data = response.data;\r\n            filter.pageSize = data.pageSize;\r\n            filter.currentPage = data.pageNumber;\r\n            filter.totalPages = data.totalPages;\r\n            this.setState({filter, loading: false, events: data.list});\r\n        }).catch(error => {\r\n            message.error(\"Error, something went wrong!!\")\r\n        })\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleRefresh() {\r\n        this.refresh(this.state.refresh);\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refresh(filter)\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        ApcFileService.archiveEvent(event).then(() => {\r\n            this.refresh();\r\n        })\r\n\r\n    }\r\n\r\n    onEventIdInputChange(e) {\r\n        let filter = this.state.filter;\r\n        filter.eventId = e.target.value;\r\n        console.log(filter);\r\n        this.setState({filter: filter})\r\n    }\r\n\r\n    render() {\r\n        let eventId = this.state.filter.eventId;\r\n        return (\r\n            <div>\r\n                <Collapse bordered={true} defaultActiveKey={['1']}>\r\n                    <Panel header=\"Filter\" key=\"1\">\r\n                        Event Id: <Input value={eventId} style={{\"width\": \"200px\"}}\r\n                                         onChange={this.onEventIdInputChange}/> <br/><br/>\r\n                        <ApcGenericFilter handleRefresh={this.refresh} filter={this.state.filter}\r\n                                          handleFilterChange={this.handleFilterChange}\r\n                        />\r\n                    </Panel>\r\n                </Collapse>\r\n                <div>\r\n                    {this.renderTable()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.length === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n        let events = this.state.events;\r\n        let count = this.state.filter.totalPages * this.state.filter.pageSize;\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.currentPage,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n        return (<div>\r\n                <Table dataSource={events} pagination={pagination}>\r\n                    <Column title=\"ID\" dataIndex=\"eventId\" key=\"eventId\"\r\n                            render={eventId => <Paragraph strong copyable>{eventId}</Paragraph>}/>\r\n                    <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                            render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                    <Column title=\"Archived\" dataIndex=\"archived\" key=\"archived\"\r\n                            render={archived => (<p>{archived ? \"Archived\" : \"Active\"}</p>)}/>\r\n                    <Column title=\"Direction\" dataIndex=\"direction\" key=\"direction\"\r\n                            render={direction => direction}/>\r\n                </Table>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}","import axios from \"./axios\";\r\nimport moment from 'moment';\r\n\r\nclass ApcDashboardService {\r\n\r\n    static Instance() {\r\n        return new ApcDashboardService()\r\n    }\r\n\r\n    getApcPeopleCount(fromDate, toDate, xAxis) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss\"'),\r\n            xAxis: xAxis\r\n        };\r\n        return axios.post('/api/apc/dashboard/peoplecount', filter);\r\n    }\r\n\r\n    getApcPeakHour(fromDate, toDate) {\r\n        let filter = {\r\n            fromDateString: moment(fromDate).format('YYYY-MM-DD HH:mm:ss'),\r\n            toDateString: moment(toDate).format('YYYY-MM-DD HH:mm:ss\"')\r\n        };\r\n        return axios.post('/api/apc/dashboard/peakhour', filter);\r\n    }\r\n\r\n    getColor(index) {\r\n        let color = \"\";\r\n        let colors = [\r\n            '#e83e8c',\r\n            '#dc3545',\r\n            '#007bff',\r\n            '#6610f2',\r\n            '#fd7e14',\r\n            '#ffc107',\r\n            '#28a745',\r\n            '#20c997',\r\n            '#17a2b8',\r\n            '#6c757d',\r\n            '#343a40',\r\n            '#6f42c1'];\r\n\r\n        color = colors[index];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        return this.getRandomColor();\r\n\r\n    }\r\n\r\n\r\n    getRandomColor() {\r\n        let letters = '0123456789ABCDEF';\r\n        let color = '#';\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n\r\n\r\n    extractFromToDate(selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n\r\n        let baseDate;\r\n        let from_date;\r\n        let to_date;\r\n        switch (selectedCustomDateRangeEnum) {\r\n            case  \"Today\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"Yesterday\":\r\n                baseDate = moment().subtract(1, 'days');\r\n                from_date = baseDate.startOf('day').toDate();\r\n                to_date = baseDate.endOf('day').toDate();\r\n                break;\r\n            case  \"This week\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"This month\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"This quarter\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"This year\":\r\n                baseDate = moment();\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Last week\":\r\n                baseDate = moment().subtract(1, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Last month\":\r\n                baseDate = moment().subtract(1, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Last quarter\":\r\n                baseDate = moment().subtract(1, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Last year\":\r\n                baseDate = moment().subtract(1, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Second Last week\":\r\n                baseDate = moment().subtract(2, 'weeks');\r\n                from_date = baseDate.startOf('week').toDate();\r\n                to_date = baseDate.endOf('week').toDate();\r\n                break;\r\n            case  \"Second Last month\":\r\n                baseDate = moment().subtract(2, 'months');\r\n                from_date = baseDate.startOf('month').toDate();\r\n                to_date = baseDate.endOf('month').toDate();\r\n                break;\r\n            case  \"Second Last quarter\":\r\n                baseDate = moment().subtract(2, 'quarters');\r\n                from_date = baseDate.startOf('quarter').toDate();\r\n                to_date = baseDate.endOf('quarter').toDate();\r\n                break;\r\n            case  \"Second Last year\":\r\n                baseDate = moment().subtract(2, 'years');\r\n                from_date = baseDate.startOf('year').toDate();\r\n                to_date = baseDate.endOf('year').toDate();\r\n                break;\r\n            case  \"Custom\":\r\n                from_date = selectedCustomDateRangeMoment[0].toDate();\r\n                to_date = selectedCustomDateRangeMoment[1].toDate();\r\n                break;\r\n        }\r\n\r\n        return {\r\n            from_date: from_date,\r\n            to_date: to_date\r\n        }\r\n    }\r\n}\r\n\r\nexport default ApcDashboardService.Instance();","import React, {Component} from \"react\";\r\nimport {\r\n    Col,\r\n    Row,\r\n    DatePicker,\r\n    Button,\r\n    Icon,\r\n    Card,\r\n    Modal,\r\n    Menu,\r\n    Dropdown,\r\n    Table\r\n} from \"antd\";\r\nimport ApcDashboardService from \"../../services/ApcDashboardService\";\r\nimport { Line, Doughnut} from 'react-chartjs-2';\r\n\r\nconst {RangePicker} = DatePicker;\r\nconst {Column} = Table;\r\n\r\nexport default class ApcDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpencustomDateRangeModal: \"\",\r\n            apc: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n                    selectedXAxisOption: \"Hourly\",\r\n                    fromDate: {},\r\n                    toDate: {}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            },\r\n            peakhour: {\r\n                filter: {\r\n                    selectedCustomDateRange: \"Today\",\r\n\r\n                    fromDate: {},\r\n                    toDate: {}\r\n                },\r\n                chartData: {\r\n                    labels: [],\r\n                    datasets: []\r\n                }\r\n            },\r\n            peakHourEvents: []\r\n        };\r\n\r\n        this.getApcPeopleCount = this.getApcPeopleCount.bind(this);\r\n        this.getApcPeakHour = this.getApcPeakHour.bind(this);\r\n        this.getBarChartOptions = this.getBarChartOptions.bind(this);\r\n        this.selectDateRange = this.selectDateRange.bind(this);\r\n        this.selectXAxisOption = this.selectXAxisOption.bind(this);\r\n        this.refresh = this.refresh.bind(this);\r\n        this.getDateRangeOptions = this.getDateRangeOptions.bind(this);\r\n        this.getXAxisOptions = this.getXAxisOptions.bind(this);\r\n        this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\r\n        this.refreshPeakHour = this.refreshPeakHour.bind(this);\r\n        this.refreshApcChart = this.refreshApcChart.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    showCustomDateRangeModal(graphName) {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: graphName,\r\n        });\r\n    };\r\n\r\n    handleCancel = e => {\r\n        this.setState({\r\n            isOpencustomDateRangeModal: \"\",\r\n        });\r\n    };\r\n\r\n    selectDateRange(graphName, selectedCustomDateRangeEnum, selectedCustomDateRangeMoment) {\r\n        let {isOpencustomDateRangeModal} = this.state;\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedCustomDateRange = selectedCustomDateRangeEnum;\r\n        let fromToDate = ApcDashboardService.extractFromToDate(graph.filter.selectedCustomDateRange, selectedCustomDateRangeMoment);\r\n        graph.filter.fromDate = fromToDate.from_date;\r\n        graph.filter.toDate = fromToDate.to_date;\r\n\r\n\r\n        if (selectedCustomDateRangeEnum === \"Custom\") {\r\n            isOpencustomDateRangeModal = \"\"\r\n        }\r\n        if (graphName === \"peakhour\") {\r\n            this.setState({[graphName]: graph, isOpencustomDateRangeModal}, () => {\r\n                this.refreshPeakHour();\r\n            });\r\n        } else if (graphName === \"apc\") {\r\n            this.setState({[graphName]: graph, isOpencustomDateRangeModal}, () => {\r\n                this.refreshApcChart();\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    selectXAxisOption(graphName, selectedXAxisOption) {\r\n        let graph = this.state[graphName];\r\n        graph.filter.selectedXAxisOption = selectedXAxisOption;\r\n        if (graphName === \"peakhour\") {\r\n            this.setState({[graphName]: graph}, () => {\r\n                this.refreshPeakHour();\r\n            });\r\n        } else if (graphName === \"apc\") {\r\n            this.setState({[graphName]: graph}, () => {\r\n                this.refreshApcChart();\r\n            });\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        this.refreshPeakHour();\r\n        this.refreshApcChart();\r\n    }\r\n\r\n    refreshApcChart() {\r\n        this.getApcPeopleCount(this.state.apc.filter.fromDate, this.state.apc.filter.toDate, this.state.apc.filter.selectedXAxisOption);\r\n\r\n    }\r\n\r\n    refreshPeakHour() {\r\n        this.getApcPeakHour(this.state.peakhour.filter.fromDate, this.state.peakhour.filter.toDate);\r\n\r\n    }\r\n\r\n    getApcPeakHour(from_date, to_date) {\r\n        let {peakhour} = this.state;\r\n        peakhour.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        ApcDashboardService.getApcPeakHour(from_date, to_date).then(response => {\r\n            let rawData = response.data;\r\n            if (rawData && rawData.length > 0) {\r\n                let labelDuration = [];\r\n                let percentageOfPeopleCount = [];\r\n                for (let i in rawData) {\r\n                    labelDuration.push(rawData[i].duration);\r\n                    percentageOfPeopleCount.push(rawData[i].peopleCountPercentage);\r\n                }\r\n                peakhour.chartData.labels = labelDuration;\r\n                let durationIndex = 0;\r\n                let dataSet = {\r\n                    data: [],\r\n                    backgroundColor: [],\r\n                    hoverBackgroundColor: []\r\n                };\r\n                for (let j in percentageOfPeopleCount) {\r\n\r\n                    let color = ApcDashboardService.getColor(durationIndex);\r\n\r\n                    dataSet.backgroundColor.push(color);\r\n                    dataSet.hoverBackgroundColor.push(\"black\");\r\n                    dataSet.data.push(percentageOfPeopleCount[j]);\r\n\r\n                    durationIndex++;\r\n                }\r\n                peakhour.chartData.datasets.push(dataSet);\r\n\r\n\r\n            }\r\n            this.setState({peakhour, peakHourEvents: rawData});\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    getApcPeopleCount(from_date, to_date, xAxis) {\r\n        let {apc} = this.state;\r\n        apc.chartData = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n        ApcDashboardService.getApcPeopleCount(from_date, to_date, xAxis).then(response => {\r\n\r\n            let rawData = response.data;\r\n            if (rawData && rawData.length > 0) {\r\n                let labelDates = [];\r\n                let peopleCount = [];\r\n                for (let i in rawData) {\r\n\r\n                    labelDates.push(rawData[i].date)\r\n                    peopleCount.push(rawData[i].peopleCount);\r\n                }\r\n                apc.chartData.labels = labelDates;\r\n                let dataSet = {\r\n                    label: \"No Of People\",\r\n                    data: [],\r\n                    backgroundColor: '#e83e65'\r\n                };\r\n                for (let j in peopleCount) {\r\n\r\n                    dataSet.data.push(peopleCount[j]);\r\n\r\n\r\n                }\r\n                apc.chartData.datasets.push(dataSet);\r\n            }\r\n\r\n\r\n            this.setState({apc});\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n\r\n    }\r\n\r\n\r\n    handleDateRangeChange(dates, dateString) {\r\n\r\n        let startDate = dates[0].toDate();\r\n        let endDate = dates[1].toDate();\r\n        this.setState(() => {\r\n            this.refresh();\r\n        });\r\n        console.log(dates, dateString);\r\n    }\r\n\r\n    getXAxisOptions(graphName) {\r\n        return (<Menu>\r\n\r\n            <Menu.Item key=\"1\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Hourly\")}>\r\n                Hourly\r\n            </Menu.Item>\r\n            <Menu.Item key=\"5\"\r\n                       onClick={() => this.selectXAxisOption(graphName, \"Daily\")}>\r\n                Daily\r\n            </Menu.Item>\r\n        </Menu>)\r\n    }\r\n\r\n    getDateRangeOptions(graphName) {\r\n        return (\r\n            <Menu>\r\n                <Menu.Item key=\"1\" onClick={() => this.selectDateRange(graphName, \"Today\")}>\r\n                    Today\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\" onClick={() => this.selectDateRange(graphName, \"Yesterday\")}>\r\n                    Yesterday\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\" onClick={() => this.selectDateRange(graphName, \"This week\")}>\r\n                    This week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\" onClick={() => this.selectDateRange(graphName, \"Last week\")}>\r\n                    Last week\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\" onClick={() => this.selectDateRange(graphName, \"This month\")}>\r\n                    This month\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\" onClick={() => this.selectDateRange(graphName, \"This year\")}>\r\n                    This year\r\n                </Menu.Item>\r\n                <Menu.Item key=\"7\" onClick={() => this.selectDateRange(graphName, \"Last year\")}>\r\n                    Last year\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.showCustomDateRangeModal(graphName)}>\r\n                    Custom\r\n                </Menu.Item>\r\n\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    getBarChartOptions(chartName) {\r\n        let yAxisScaleLabel = \"Day\";\r\n        if (this.state[chartName].filter.selectedXAxisOption === \"Hourly\") {\r\n            yAxisScaleLabel = \"Hours(24-hour)\";\r\n        }\r\n        let yAxisLabel = \"No Of People\";\r\n        let options = {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            animation: {\r\n                duration: 0\r\n            },\r\n            hover: {\r\n                animationDuration: 0\r\n            },\r\n            responsiveAnimationDuration: 0,\r\n            legend: {\r\n                position: 'right'\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisScaleLabel\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }, scaleLabel: {\r\n                        display: true,\r\n                        labelString: yAxisLabel\r\n                    }\r\n                }]\r\n            },\r\n            plugins: {\r\n                datalabels: {\r\n                    display: true,\r\n\r\n                }\r\n            }\r\n        };\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n        let {apc, peakhour} = this.state;\r\n        let peakHourEvents = this.state.peakHourEvents;\r\n        const apcChartOptions = this.getBarChartOptions(\"apc\");\r\n        return (\r\n            <div style={{background: '#ECECEC', padding: '5px'}}>\r\n                <Row>\r\n\r\n\r\n                    <Card title={<div>Peak Hour\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"peakhour\")}>\r\n                            <Button>\r\n                                {peakhour.filter.selectedCustomDateRange ? peakhour.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>\r\n                    }>\r\n                        <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n\r\n                            <Doughnut data={peakhour.chartData} options={{\r\n                                title: {\r\n                                    display: true,\r\n                                    text: 'Peak Hour'\r\n                                },\r\n                                maintainAspectRatio: true,\r\n\r\n                                plugins: {\r\n                                    datalabels: {\r\n                                        display: true,\r\n                                        color: '#fff',\r\n                                        anchor: 'end',\r\n                                        align: 'start',\r\n                                        offset: -10,\r\n                                        borderWidth: 2,\r\n                                        borderColor: '#fff',\r\n                                        borderRadius: 5,\r\n                                        backgroundColor: (context) => {\r\n                                            return context.dataset.backgroundColor;\r\n                                        },\r\n                                        font: {\r\n                                            weight: 'bold',\r\n                                            size: '10'\r\n                                        },\r\n                                        formatter: (item, context) => {\r\n                                            return item + \" % \";\r\n                                        }\r\n                                    }\r\n                                },\r\n                                rotation: 1 * Math.PI,\r\n                                circumference: 1 * Math.PI,\r\n                            }}/>\r\n\r\n                        </Col>\r\n                        <Col xl={{span: 12}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}}>\r\n\r\n                            <div>\r\n                                <Table dataSource={peakHourEvents} bordered={true} size={\"small\"} pagination={false}>\r\n                                    <Column title=\"Duration\" dataIndex=\"duration\" key=\"duration\"\r\n                                            render={duration => duration} />\r\n                                    <Column title=\"No Of People\" dataIndex=\"peopleCount\" key=\"peopleCount\"\r\n                                            render={peopleCount => peopleCount}/>\r\n                                </Table>\r\n                            </div>\r\n\r\n\r\n                        </Col>\r\n                    </Card>\r\n\r\n\r\n                </Row>\r\n                <div>\r\n                    <Modal\r\n                        onCancel={this.handleCancel}\r\n                        title=\"Custom Date Range\"\r\n                        visible={!!this.state.isOpencustomDateRangeModal}\r\n                        footer={[]}\r\n                    >\r\n                        <RangePicker\r\n                            onChange={(changedDateRange) => this.selectDateRange(this.state.isOpencustomDateRangeModal, \"Custom\", changedDateRange)}/>\r\n                    </Modal>\r\n                </div>\r\n                <div>\r\n                    <Card title={<div>People Counting\r\n                        &nbsp;\r\n                        <Dropdown overlay={() => this.getDateRangeOptions(\"apc\")}>\r\n                            <Button>\r\n                                {apc.filter.selectedCustomDateRange ? apc.filter.selectedCustomDateRange : \"Select\"}\r\n                                <Icon\r\n                                    type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                        &nbsp;<Dropdown overlay={() => this.getXAxisOptions(\"apc\")}>\r\n                            <Button>\r\n                                {apc.filter.selectedXAxisOption ? apc.filter.selectedXAxisOption : \"Select\"} <Icon\r\n                                type=\"down\"/>\r\n                            </Button>\r\n                        </Dropdown>\r\n                    </div>}>\r\n                        < Line data={apc.chartData} options={apcChartOptions}/>\r\n\r\n                    </Card>\r\n                </div>\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import axios from \"./axios\";\r\n\r\nclass AtccService {\r\n\r\n    static Instance() {\r\n        return new AtccService()\r\n    }\r\n\r\n    getAtccData(filter) {\r\n        return axios.put(\"/api/atcc/raw\", filter);\r\n    }\r\n\r\n    getAtccSummaryData(filter, interval) {\r\n        return axios.put(\"/api/atcc/summary?interval=\" + interval, filter);\r\n    }\r\n}\r\n\r\nexport default AtccService.Instance()","import React, {Component} from \"react\";\r\nimport {Col, Row} from \"antd\";\r\nimport 'react-table-6/react-table.css'\r\nimport \"video-react/dist/video-react.css\";\r\nimport ReactTable from 'react-table-6'\r\nimport { Player } from 'video-react';\r\nimport AtccService from \"../../services/AtccService\";\r\nimport Moment from \"react-moment\";\r\nexport default class AtccView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: [],\r\n            loading: true,\r\n            pages: 0,\r\n            video: null\r\n        };\r\n        this.getRawData = this.getRawData.bind(this);\r\n    }\r\n\r\n    getRawData(page, pageSize, sorted, filtered, handleRetrievedData) {\r\n\r\n        this.setState({\r\n            loading: true\r\n        });\r\n\r\n        let filter = {\r\n            page: page,\r\n            pageSize: pageSize,\r\n            sorted: sorted,\r\n            filtered: filtered,\r\n        };\r\n\r\n        AtccService.getAtccData(filter).then(response => {\r\n            handleRetrievedData(response.data);\r\n        });\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        const data = this.state.data;\r\n        const pages = this.state.pages;\r\n        const loading = this.state.loading;\r\n\r\n        const columns = [{\r\n            Header: 'Id',\r\n            accessor: 'id',\r\n            id: 'id'\r\n        }, {\r\n\r\n            Header: 'Type',\r\n            accessor: 'type',\r\n            Cell: props => <span className='number'>{props.value}</span>, // Custom cell components!\r\n            id: 'type'\r\n        }, {\r\n            Header: 'DateTime',\r\n            accessor: 'eventDate',\r\n            id: 'eventDate',\r\n            Cell: props => <div><Moment format=\"ll\">{props.value}</Moment>{' '}|{' '}<Moment format=\"LTS\">{props.value}</Moment></div>\r\n        }, {\r\n            Header: 'Lane',\r\n            accessor: 'lane',\r\n            id: 'lane'\r\n        }, {\r\n            Header: 'Direction',\r\n            accessor: 'direction',\r\n            id: 'direction',\r\n            Cell : props => <span>{ props.value === 0 ? \"fwd\" : \"rev\" }</span>\r\n        },\r\n            {\r\n                Header: 'Video',\r\n                accessor: 'vid',\r\n                id: 'video',\r\n                Cell: e => e.value !== 0 ? <div style={{cursor:'pointer'}} onClick={() => this.showVideo(e)}>View</div> : <div>NA</div>\r\n            },\r\n            {\r\n                Header: 'Screenshot',\r\n                accessor: 'id',\r\n                id: 'ss',\r\n                Cell: e => e.original.vid !== 0 ? <div style={{cursor:'pointer'}} onClick={() => this.showScreenshot(e)}>View</div> : <div>NA</div>\r\n            },\r\n            {\r\n                Header: 'Download',\r\n                accessor: 'vid',\r\n                id: 'dlvideo',\r\n                Cell: e => e.original.vid !== 0 ? <div style={{cursor:'pointer'}} onClick={() => this.downloadVideo(e)}>Download</div> : <div>NA</div>\r\n            }\r\n        ];\r\n\r\n\r\n        return (\r\n\r\n            <Row>\r\n                <Col>\r\n                    <ReactTable\r\n                        ref={(refRawDataTable) => {\r\n                            this.refRawDataTable = refRawDataTable;\r\n                        }}\r\n                        defaultPageSize={10}\r\n                        data={data}\r\n                        columns={columns}\r\n                        pages={pages}\r\n                        className=\"-striped -highlight\"\r\n                        loading={loading}\r\n                        showPagination={true}\r\n                        showPaginationTop={false}\r\n                        showPaginationBottom={true}\r\n                        pageSizeOptions={[5, 10, 20, 25, 50, 100]}\r\n                        manual // this would indicate that server side pagination has been enabled\r\n                        onFetchData={(state, instance) => {\r\n                            this.setState({loading: true});\r\n                            this.getRawData(state.page, state.pageSize, state.sorted, state.filtered, (res) => {\r\n\r\n                                this.setState({\r\n                                    data: res.data,\r\n                                    pages: Math.ceil(res.totalElements / parseFloat(state.pageSize)),\r\n                                    loading: false\r\n                                })\r\n                            });\r\n                        }}\r\n                    />\r\n\r\n                    <div style={{cursor:'pointer'}} onClick={()=>this.downloadCsv()}> Download Data</div>\r\n                </Col>\r\n                <Col>\r\n                    <div>\r\n                        <Player\r\n                            fluid={false}\r\n                            width={500}\r\n                            autoPlay\r\n                            playsInline\r\n                            poster=\"/synlabs-logo.png\"\r\n                            src={this.state.video}\r\n                        />\r\n                        <img src={this.state.ss || '/synlabs-logo.png'} alt=\"event screenshot\"/>\r\n                    </div>\r\n                </Col>\r\n            </Row>)\r\n    }\r\n\r\n    showVideo(e) {\r\n\r\n        const seek = 0;//e.original.timeStamp - e.original.vts - e.original.offset - 5;\r\n        //seek(time)\r\n        this.setState({\r\n            seek : seek,\r\n            video:'/public/atcc/video/' + e.original.id + \"?r=\" + Math.random()\r\n        });\r\n    }\r\n\r\n    showScreenshot(e) {\r\n        this.setState({\r\n            ss:'/public/atcc/screenshot/' + e.original.id + \"?r=\" + Math.random()\r\n        });\r\n    }\r\n\r\n    downloadVideo(e) {\r\n        fetch('/api/atcc/video/' + e.original.vid)\r\n            .then((response) => response.blob())\r\n            .then((blob) => {\r\n                const url = window.URL.createObjectURL(new Blob([blob]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute('download', e.original.tag + \"-\" + e.original.vid + `-video.mp4`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.parentNode.removeChild(link);\r\n            })\r\n    }\r\n\r\n    downloadCsv() {\r\n        fetch('/api/atcc/csv/')\r\n            .then((response) => response.blob())\r\n            .then((blob) => {\r\n                const url = window.URL.createObjectURL(new Blob([blob]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute('download', `data.csv`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.parentNode.removeChild(link);\r\n            })\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport 'react-table-6/react-table.css'\r\nimport ReactTable from 'react-table-6'\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport * as name from \"chartjs-plugin-colorschemes\";\r\nimport {Button, Col, Row} from \"antd\";\r\nimport AtccService from \"../../services/AtccService\";\r\nconst ButtonGroup = Button.Group;\r\n\r\nexport default class AtccSummaryView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: [],\r\n            chartdata: null,\r\n            loading: true,\r\n            pages: 0,\r\n            interval: \"hour\"\r\n        };\r\n\r\n\r\n        this.makeChartData = this.makeChartData.bind(this);\r\n        this.getSummaryData = this.getSummaryData.bind(this);\r\n        this.changeInterval = this.changeInterval.bind(this);\r\n        //setInterval(()=> this.changeInterval(), 120000)\r\n    }\r\n\r\n\r\n    async changeInterval(value) {\r\n        await this.setState({interval: value});\r\n        this.refReactTable.fireFetchData();\r\n    }\r\n\r\n    getSummaryData(page, pageSize, sorted, filtered, handleRetrievedData) {\r\n\r\n        this.setState({\r\n            loading: true\r\n        });\r\n\r\n        let filter = {\r\n            page: page,\r\n            pageSize: pageSize,\r\n            sorted: sorted,\r\n            filtered: filtered,\r\n        };\r\n\r\n        let interval = this.state.interval;\r\n        AtccService.getAtccSummaryData(filter, interval).then(response => {\r\n            this.makeChartData(response.data);\r\n            this.setState({\r\n                loading: false\r\n            });\r\n\r\n            if (handleRetrievedData) {\r\n                return handleRetrievedData(response.data);\r\n            } else {\r\n                return response;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    makeChartData(data) {\r\n        let chartdata = {\r\n            labels: [],\r\n            datasets: []\r\n        };\r\n\r\n\r\n        let timeSeries = new Set();\r\n        for (let i = 0; i < data.length; i++) {\r\n\r\n            if (data[i].span !== \"Month\") {\r\n                timeSeries.add(data[i].date + \" \" + data[i].from);\r\n            } else {\r\n                timeSeries.add(data[i].from + \" - \" + data[i].to);\r\n            }\r\n\r\n            let index = -1;\r\n            for (let j in chartdata.datasets) {\r\n                if (chartdata.datasets[j].label) {\r\n                    if (chartdata.datasets[j].label === data[i].type) {\r\n                        index = j;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (index === -1) {\r\n                chartdata.datasets.push({\r\n                    label: data[i].type,\r\n                    data: [data[i].count]\r\n                });\r\n            } else {\r\n                chartdata.datasets[index].data.push(data[i].count);\r\n            }\r\n        }\r\n\r\n        chartdata.labels = Array.from(timeSeries);\r\n        this.setState({chartdata: chartdata})\r\n    }\r\n\r\n    render() {\r\n        const options = {\r\n            scales: {\r\n                xAxes: [{\r\n                    stacked: true,\r\n                    gridLines: {display: false},\r\n                }],\r\n                yAxes: [{\r\n                    stacked: true,\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    },\r\n                }],\r\n            },\r\n            legend: {display: true},\r\n            plugins: {\r\n                colorschemes: {\r\n                    scheme: 'brewer.Paired12'\r\n                }\r\n            }\r\n        };\r\n\r\n        const chartdata = this.state.chartdata;\r\n        const data = this.state.data;\r\n        const pages = this.state.pages;\r\n        const loading = this.state.loading;\r\n        const chartComponent = this.state.loading ? (<div>Loading...</div>) : (\r\n            <Bar data={chartdata} options={options}/>);\r\n        const columns = [{\r\n            Header: 'Date',\r\n            accessor: 'date',\r\n            id: 'date'\r\n        }, {\r\n            Header: 'From',\r\n            accessor: 'from',\r\n            id: 'from'\r\n        }, {\r\n            Header: 'To',\r\n            accessor: 'to',\r\n            id: 'to'\r\n        }, {\r\n            Header: 'Span',\r\n            accessor: 'span',\r\n            id: 'span'\r\n        }, {\r\n            Header: 'Type',\r\n            accessor: 'type',\r\n            id: 'type',\r\n            Cell: props => <span className='number'>{props.value}</span> // Custom cell components!\r\n        }, {\r\n            Header: 'Count',\r\n            accessor: 'count', // Custom value accessors!\r\n            id: 'count', // Required because our accessor is not a string\r\n        }\r\n        ];\r\n\r\n\r\n        return (\r\n\r\n            <Row>\r\n                <Col>\r\n                    <ButtonGroup>\r\n                        <Button onClick={() => this.changeInterval('hour')}>Hour</Button>\r\n                        <Button onClick={() => this.changeInterval('day')}>Day</Button>\r\n                        <Button onClick={() => this.changeInterval('month')}>Month</Button>\r\n                    </ButtonGroup>\r\n\r\n                    <ReactTable\r\n                        ref={(refReactTable) => {\r\n                            this.refReactTable = refReactTable;\r\n                        }}\r\n                        defaultPageSize={10}\r\n                        data={data}\r\n                        columns={columns}\r\n                        pages={pages}\r\n                        className=\"-striped -highlight\"\r\n                        loading={loading}\r\n                        showPagination={true}\r\n                        showPaginationTop={false}\r\n                        showPaginationBottom={true}\r\n                        pageSizeOptions={[5, 10, 20, 25, 50, 100]}\r\n                        manual // this would indicate that server side pagination has been enabled\r\n                        onFetchData={(state, instance) => {\r\n                            this.setState({loading: true});\r\n                            this.getSummaryData(state.page, state.pageSize, state.sorted, state.filtered, (res) => {\r\n\r\n                                this.setState({\r\n                                    data: res.data,\r\n                                    pages: Math.ceil(res.totalElements / parseFloat(state.pageSize)),\r\n                                    loading: false\r\n                                })\r\n                            });\r\n                        }}\r\n                    />\r\n\r\n                    <div style={{cursor:'pointer'}} onClick={()=>this.downloadCsv()}> Download Data</div>\r\n                </Col>\r\n                <Col>\r\n                    <br/>\r\n                    <br/>\r\n                    <br/>\r\n                    {chartComponent}\r\n                </Col>\r\n            </Row>)\r\n    }\r\n\r\n    downloadCsv() {\r\n\r\n        var interval = this.state.interval;\r\n        fetch('/csv/summary/' + interval)\r\n            .then((response) => response.blob())\r\n            .then((blob) => {\r\n                const url = window.URL.createObjectURL(new Blob([blob]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute('download', interval + `-data.csv`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.parentNode.removeChild(link);\r\n            })\r\n    }\r\n}","import axios from \"./axios\";\r\n\r\nclass VidsService {\r\n\r\n    static Instance() {\r\n        return new VidsService()\r\n    }\r\n\r\n    getIncidents(filter) {\r\n        return axios.post('/api/vids/incidents', filter);\r\n    }\r\n\r\n    archiveIncident(event) {\r\n        return axios.delete('/api/vids/' + event.id);\r\n    }\r\n\r\n    updateIncident(event) {\r\n        return axios.put('/api/vids/event', event);\r\n    }\r\n\r\n    getIncidentImage(id) {\r\n        return axios.get('/public/vids/image/' + id + '/image.jpg');\r\n    }\r\n\r\n    getIncidentVideo(id) {\r\n        return axios.get('/public/vids/video/' + id + '/video.mp4');\r\n    }\r\n\r\n    getStats() {\r\n        return axios.get('/api/vids/stats');\r\n    }\r\n\r\n}\r\n\r\nexport default VidsService.Instance()","import React, {Component} from \"react\";\r\nimport {\r\n    Card,\r\n    Col,\r\n    Collapse,\r\n    Empty,\r\n    Icon,\r\n    Pagination,\r\n    Row,\r\n    Table,\r\n    Tag,\r\n    Button, Menu, Dropdown, Typography\r\n} from 'antd';\r\nimport GenericFilter from \"../../components/GenericFilter\";\r\nimport Moment from \"react-moment\";\r\nimport VidsService from \"../../services/VidsService\";\r\nimport { Player } from 'video-react';\r\nimport \"video-react/dist/video-react.css\";\r\nconst {Text} = Typography;\r\n\r\nconst {Column} = Table;\r\nconst {Panel} = Collapse;\r\n\r\n\r\nexport default class HighwayIncidentView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible: true,\r\n            loading: true,\r\n            layout: \"list\",\r\n            incidents: {},\r\n            playVideo: false,\r\n            filter: {\r\n                page: 1,\r\n                pageSize: 12\r\n            },\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n        this.handleFilterChange = this.handleFilterChange.bind(this);\r\n        this.handleLayoutChange = this.handleLayoutChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.onPageChange = this.onPageChange.bind(this);\r\n        this.onPageSizeChange = this.onPageSizeChange.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        VidsService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"incidents\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    //cant use refresh to read from state as state may not have been set\r\n    refreshNow() {\r\n        VidsService.getIncidents(this.state.filter).then(request => {\r\n            this.setState({\"incidents\": request.data, loading: false})\r\n        })\r\n    }\r\n\r\n    archiveEvent(event) {\r\n        VidsService.archiveIncident(event).then(request => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    handleFilterChange(data) {\r\n        this.setState({filter: data})\r\n    }\r\n\r\n    handleLayoutChange(data) {\r\n        this.setState({layout: data})\r\n    }\r\n\r\n    handleOnClick() {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n\r\n    handleRefresh() {\r\n        this.refresh();\r\n    }\r\n\r\n    onPageChange(page, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter)\r\n    }\r\n\r\n    onPageSizeChange(current, pageSize) {\r\n        let filter = this.state.filter;\r\n        filter.pageSize = pageSize;\r\n        this.refreshNow(filter);\r\n    }\r\n\r\n    render() {\r\n\r\n        let layout = this.state.layout;\r\n\r\n        return (\r\n            <div>\r\n                <h3>Highway Incidents</h3>\r\n                <Collapse bordered={false} defaultActiveKey={['1']}>\r\n                    <Panel header=\"Filter\" key=\"1\">\r\n\r\n                        <GenericFilter handleRefresh={this.refresh} filter={this.state.filter} layout={layout}\r\n                                       handleFilterChange={this.handleFilterChange}\r\n                                       handleLayoutChange={this.handleLayoutChange}/>\r\n                    </Panel>\r\n                </Collapse>\r\n                <div>\r\n                    {layout === \"table\" ? (this.renderTable()) : (this.renderGrid())}\r\n                </div>\r\n            </div>)\r\n    }\r\n\r\n    renderGrid() {\r\n\r\n\r\n        if (this.state.loading || !this.state.incidents || this.state.incidents.totalPage === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.incidents.events;\r\n        let count = this.state.incidents.totalPages * this.state.incidents.pageSize;\r\n\r\n\r\n        return <div style={{background: '#ECECEC', padding: '5px'}}>\r\n            <Row>\r\n                {\r\n                    events.map((event, index) =>\r\n                        <Col xl={{span: 8}} lg={{span: 12}} md={{span: 12}} sm={{span: 24}} xs={{span: 24}} key={index}>\r\n                            <Card\r\n                                style={{margin: \"5px\"}}\r\n                                title={\r\n                                    <div>\r\n                                        <Tag color=\"#f50\">{event.incidentType}</Tag>\r\n                                        <div>\r\n                                            <Text code><Icon type=\"schedule\"/> <Moment\r\n                                                format=\"ll\">{event.incidentDate}</Moment>{' '}|{' '}<Moment\r\n                                                format=\"LTS\">{event.incidentDate}</Moment></Text>\r\n                                        </div>\r\n                                        <div style={{marginTop: \"5px\", textAlign: \"left\"}}>\r\n                                            <div>\r\n                                                <Text code>\r\n                                                    <Icon type=\"environment\"/> {event.feed.site} > {event.feed.location} > {event.feed.name}</Text>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                }\r\n                                extra={<Dropdown overlay={<Menu>\r\n                                    <Menu.Item key=\"1\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/vids/image/\" + event.id + \"/image.jpg\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Image</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\">\r\n                                        <a\r\n                                            title={\"click here to download\"}\r\n                                            href={\"/public/vids/video/\" + event.id + \"/image.mp4\"}\r\n                                            download={true}><Icon type=\"download\"/>{' '} Video</a>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\">\r\n                                        <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon\r\n                                            type=\"warning\"/>{' '}\r\n                                            Archive\r\n                                        </Button>\r\n                                    </Menu.Item>\r\n\r\n                                </Menu>}>\r\n                                    <Button>\r\n                                        More <Icon type=\"down\"/>\r\n                                    </Button>\r\n                                </Dropdown>}\r\n                                bordered={true}\r\n\r\n                            >\r\n\r\n                                <Player\r\n                                    playsInline\r\n                                    poster={\"/public/vids/image/\" + event.id + \"/image.jpg\"}\r\n                                    src={\"/public/vids/video/\" + event.id + \"/video.mp4\"}\r\n                                />\r\n                            </Card>\r\n                        </Col>\r\n                    )\r\n                }\r\n            </Row>\r\n            <div style={{textAlign: \"right\"}}>\r\n                <Pagination onChange={this.onPageChange} onShowSizeChange={this.onPageSizeChange} showSizeChanger\r\n                            showQuickJumper\r\n                            defaultCurrent={1} total={count} current={this.state.filter.page}\r\n                            pageSize={this.state.filter.pageSize}/>\r\n            </div>\r\n\r\n        </div>\r\n    }\r\n\r\n    renderTable() {\r\n\r\n        if (this.state.loading || !this.state.events || this.state.events.Total === 0) {\r\n            return <Empty description={false}/>\r\n        }\r\n\r\n        let events = this.state.anprresponse.events;\r\n        let count = this.state.anprresponse.totalPages * this.state.anprresponse.pageSize;\r\n\r\n        const paginationOptions = {\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.onPageSizeChange,\r\n            onChange: this.onPageChange,\r\n            total: count\r\n        };\r\n\r\n        const pagination = {\r\n            ...paginationOptions,\r\n            total: count,\r\n            current: this.state.filter.page,\r\n            pageSize: this.state.filter.pageSize\r\n        };\r\n\r\n        return (\r\n            <Table dataSource={events} pagination={pagination}>\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"\r\n                        render={location => location}/>\r\n                <Column title=\"Date\" dataIndex=\"eventDate\" key=\"eventDate\"\r\n                        render={eventDate => (<Moment format=\"L\">{eventDate}</Moment>)}/>\r\n                <Column title=\"Time\" dataIndex=\"eventDate\" key=\"eventTime\"\r\n                        render={eventDate => (<Moment format=\"LTS\">{eventDate}</Moment>)}/>\r\n                <Column title=\"LPR\" dataIndex=\"anprText\" key=\"anprText\"\r\n                        render={anprText => anprText}/>\r\n                <Column title=\"LP Image\" dataIndex=\"id\" key=\"anprimage\"\r\n                        render={id => (\r\n                            <a title={\"click here to download\"} href={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}\r\n                               download={true}>\r\n                                <img alt=\"event\"\r\n                                     src={\"/public/anpr/lpr/\" + id + \"/image.jpg\"}/></a> )}/>\r\n                <Column title=\"direction\" dataIndex=\"direction\" key=\"direction\"\r\n                        render={direction => direction}/>\r\n                <Column title=\"Helmet?\" dataIndex=\"helmet\" key=\"helmet\"\r\n                        render={helmet => helmet ? <span>No</span> : <span>N/A</span>}/>\r\n                <Column title=\"Speed\" dataIndex=\"speed\" key=\"speed\"\r\n                        render={speed => <span>{speed}</span>}/>\r\n                <Column title=\"Action\"\r\n                        key=\"action\"\r\n                        render={(text, event) => (\r\n                            <Button type=\"danger\" onClick={() => this.archiveEvent(event)}><Icon type=\"warning\"/>{' '}\r\n                                Archive</Button>\r\n                        )}\r\n                />\r\n\r\n            </Table>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {Doughnut, Pie} from 'react-chartjs-2';\r\nimport {Card, Col, Empty, Row, Tag} from \"antd\";\r\n\r\nimport DashboardService from \"../../services/DashboardService\";\r\n\r\nimport 'chartjs-plugin-datalabels';\r\nimport VidsService from \"../../services/VidsService\";\r\n\r\nlet flow_hourly_data = {\r\n    labels: [],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: DashboardService.getColors()\r\n    }]\r\n};\r\n\r\nlet flow_today_data = {\r\n    labels: [],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: DashboardService.getColors()\r\n    }]\r\n};\r\n\r\nlet incident_data = {\r\n    labels: [],\r\n    datasets: [{\r\n        data: [],\r\n        backgroundColor: DashboardService.getColors()\r\n    }]\r\n};\r\n\r\nexport default class HighwayIncidentDashboardView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            flow_hourly_data: flow_hourly_data,\r\n            flow_today_data: flow_today_data,\r\n            incident_data: incident_data,\r\n            loaded: false,\r\n        };\r\n\r\n        this.refresh = this.refresh.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refresh();\r\n    }\r\n\r\n    refresh() {\r\n        VidsService.getStats().then(response => {\r\n            let onehrlabels = [];\r\n            let onehrvalues = [];\r\n            for (let i = 0; i < response.data.onehourstats.length; i++) {\r\n                let pt = response.data.onehourstats[i];\r\n                onehrlabels.push(pt.key);\r\n                onehrvalues.push(pt.count);\r\n            }\r\n\r\n            flow_hourly_data.labels = onehrlabels;\r\n            flow_hourly_data.datasets[0].data = onehrvalues;\r\n\r\n            let dailylabels = [];\r\n            let dailyvalues = [];\r\n            for (let i = 0; i < response.data.todaystats.length; i++) {\r\n                let pt = response.data.todaystats[i];\r\n                dailylabels.push(pt.key);\r\n                dailyvalues.push(pt.count);\r\n            }\r\n\r\n            flow_today_data.labels = dailylabels;\r\n            flow_today_data.datasets[0].data = dailyvalues;\r\n\r\n            let incilabels = [];\r\n            let incivalues = [];\r\n\r\n            for (let i = 0; i < response.data.incidents.length; i++) {\r\n                let pt = response.data.incidents[i];\r\n                incilabels.push(pt.key);\r\n                incivalues.push(pt.count);\r\n            }\r\n\r\n            incident_data.labels = incilabels;\r\n            incident_data.datasets[0].data = incivalues;\r\n\r\n            this.setState({\r\n                flow_today_data: flow_today_data,\r\n                flow_hourly_data: flow_hourly_data,\r\n                incident_data: incident_data,\r\n                stats: response.data,\r\n                loaded: true\r\n            });\r\n            this.setState({stats: response.data, loaded: true})\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let {flow_hourly_data, flow_today_data, incident_data, loaded} = this.state;\r\n        let stats = this.state.stats;\r\n\r\n        if (!loaded) {\r\n            return <Empty/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col xl={12} lg={12} md={12} sm={24} xs={24}>\r\n                        <Row>\r\n                            <Col>\r\n                                <Card>\r\n                                    <Pie data={flow_hourly_data} options={{\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: 'Traffic Flow (Last Hour)'\r\n                                        },\r\n                                        plugins: {\r\n                                            datalabels: {\r\n                                                display: true,\r\n                                                color: '#fff',\r\n                                                anchor: 'end',\r\n                                                align: 'start',\r\n                                                offset: -10,\r\n                                                borderWidth: 2,\r\n                                                borderColor: '#fff',\r\n                                                borderRadius: 25,\r\n                                                backgroundColor: (context) => {\r\n                                                    return context.dataset.backgroundColor;\r\n                                                },\r\n                                                font: {\r\n                                                    weight: 'bold',\r\n                                                    size: '10'\r\n                                                },\r\n                                            }\r\n                                        }\r\n                                    }}/>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <Card>\r\n                                    <Doughnut data={flow_today_data} options={\r\n                                        {\r\n                                            circumference: Math.PI,\r\n                                            rotation: Math.PI,\r\n                                            title: {\r\n                                                display: true,\r\n                                                text: ' Traffic Flow (Today)'\r\n                                            },\r\n                                            plugins: {\r\n                                                datalabels: {\r\n                                                    display: true,\r\n                                                    color: '#fff',\r\n                                                    anchor: 'end',\r\n                                                    align: 'start',\r\n                                                    offset: -10,\r\n                                                    borderWidth: 2,\r\n                                                    borderColor: '#fff',\r\n                                                    borderRadius: 25,\r\n                                                    backgroundColor: (context) => {\r\n                                                        return context.dataset.backgroundColor;\r\n                                                    },\r\n                                                    font: {\r\n                                                        weight: 'bold',\r\n                                                        size: '10'\r\n                                                    },\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    />\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                    <Col xl={12} lg={12} md={12} sm={24} xs={24}>\r\n                        <Row>\r\n                            <Col>\r\n                                <Card>\r\n                                    <Pie data={incident_data} options={{\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: 'Traffic Flow (Last Hour)'\r\n                                        },\r\n                                        plugins: {\r\n                                            datalabels: {\r\n                                                display: true,\r\n                                                color: '#fff',\r\n                                                anchor: 'end',\r\n                                                align: 'start',\r\n                                                offset: -10,\r\n                                                borderWidth: 2,\r\n                                                borderColor: '#fff',\r\n                                                borderRadius: 25,\r\n                                                backgroundColor: (context) => {\r\n                                                    return context.dataset.backgroundColor;\r\n                                                },\r\n                                                font: {\r\n                                                    weight: 'bold',\r\n                                                    size: '10'\r\n                                                },\r\n                                            }\r\n                                        }\r\n                                    }}/>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <div>\r\n                                    <Card>\r\n                                        <Tag color=\"#f50\">{stats.trafficState.density}</Tag><br/><br/>\r\n                                        <img width={500} height={300} alt=\"Flow Image\"\r\n                                             src={\"/public/vids/flowimage/\" + stats.trafficState.id + \"/image.jpg\"}/>\r\n                                    </Card>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </div>)\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport './App.css';\r\nimport {Layout} from 'antd';\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Headbar from \"./components/Headbar\";\r\nimport Footerbar from \"./components/Footerbar\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport HomeView from \"./views/HomeView\";\r\nimport FeedView from \"./views/FeedView\";\r\nimport {Route} from \"react-router-dom\";\r\nimport DeviceView from \"./views/DeviceView\";\r\nimport UserListView from \"./views/UserListView\";\r\nimport DeviceConfigView from \"./views/DeviceConfigView\";\r\n\r\nimport UserService from \"./services/UserService\";\r\nimport {EventBus} from \"./components/event\"\r\nimport LoginView from \"./views/LoginView\";\r\nimport TriggerView from \"./views/TriggerView\";\r\nimport AnprView from \"./views/anpr/AnprView\";\r\nimport TrafficIncidentView from \"./views/TrafficIncidentView\";\r\nimport IncidentRepeatedView from \"./views/incidents/IncidentRepeatedView\";\r\nimport IncidentHotlistView from \"./views/IncidentHotlistView\";\r\nimport MasterDataView from \"./views/anpr/MasterDataView\";\r\nimport ParkingDashboardView from \"./views/parking/ParkingDashboardView\";\r\nimport ParkingConsoleView from \"./views/parking/ParkingConsoleView\";\r\nimport PgsReportView from \"./views/parking/ParkingReportView\";\r\nimport ParkingInOutView from \"./views/parking/ParkingInOutView\";\r\nimport PeopleCounting from \"./views/PeopleCount/PeopleCounting\";\r\nimport ApcDashboard from \"./views/PeopleCount/ApcDashboard\";\r\nimport AtccView from \"./views/atcc/AtccView\";\r\nimport AtccSummaryView from \"./views/atcc/AtccSummaryView\";\r\nimport HighwayIncidentView from \"./views/vids/HighwayIncidentView\";\r\nimport HighwayIncidentDashboardView from \"./views/vids/HighwayIncidentDashboardView\";\r\n\r\nconst {Content} = Layout;\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loggedIn: false};\r\n\r\n        EventBus.subscribe('login-logout', (event) => this.refreshMenu(event))\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshMenu()\r\n    }\r\n\r\n    refreshMenu() {\r\n        this.setState({loggedIn: UserService.isLoggedIn()});\r\n    }\r\n\r\n    render() {\r\n\r\n        const isLoggedIn = this.state.loggedIn;\r\n\r\n        const sideBar = isLoggedIn ? <Sidebar/> : null;\r\n        const header = isLoggedIn ? <Headbar isLoggedIn={isLoggedIn}/> : null;\r\n\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <Layout style={{minHeight: '100vh'}}>\r\n                    {sideBar}\r\n                    <Layout>\r\n                        <Content style={{margin: '16px'}}>\r\n                            <div style={{padding: 4}}>\r\n                                <Route path='/login' exact={true} component={LoginView}/>\r\n                                <PrivateRoute path='/' exact={true} component={HomeView}/>\r\n                                <PrivateRoute path='/incidents' exact={true} component={TrafficIncidentView}/>\r\n                                <PrivateRoute path='/incidents/hotlisted' exact={true} component={IncidentHotlistView}/>\r\n                                <PrivateRoute path='/incidents/repeated' exact={true} component={IncidentRepeatedView}/>\r\n                                <PrivateRoute path='/anpr' exact={true} component={AnprView}/>\r\n                                <PrivateRoute path='/anpr/masterdata' exact={true} component={MasterDataView}/>\r\n                                <PrivateRoute path='/user' exact={true} component={UserListView}/>\r\n                                <PrivateRoute path='/feed' exact={true} component={FeedView}/>\r\n                                <PrivateRoute path='/trigger' exact={true} component={TriggerView}/>\r\n                                <PrivateRoute path='/device' exact={true} component={DeviceView}/>\r\n                                <PrivateRoute path='/device/conf' exact={true} component={DeviceConfigView}/>\r\n                                <PrivateRoute path='/people-counting/events' exact={true} component={PeopleCounting}/>\r\n\r\n\r\n                                {/* PGS is parking guideance and management system */}\r\n                                <PrivateRoute path='/pgs/dashboard' exact={true} component={ParkingDashboardView}/>\r\n                                <PrivateRoute path='/pgs/console' exact={true} component={ParkingConsoleView}/>\r\n                                <PrivateRoute path='/pgs/inout' exact={true} component={ParkingInOutView}/>\r\n                                <PrivateRoute path='/pgs/reports' exact={true} component={PgsReportView}/>\r\n                                <PrivateRoute path='/people-counting/Dashboard' exact={true} component={ApcDashboard}/>\r\n\r\n                                {/* atcc */}\r\n                                <PrivateRoute path='/atcc' exact={true} component={AtccView}/>\r\n                                <PrivateRoute path='/atcc/summary' exact={true} component={AtccSummaryView}/>\r\n\r\n                                {/* vids */}\r\n                                <PrivateRoute path='/vids' exact={true} component={HighwayIncidentView}/>\r\n                                <PrivateRoute path='/vids/dashboard' exact={true} component={HighwayIncidentDashboardView}/>\r\n                            </div>\r\n                        </Content>\r\n                        <Footerbar/>\r\n                    </Layout>\r\n                </Layout>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'antd/dist/antd.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {HashRouter as Router, Switch} from 'react-router-dom';\r\n\r\nclass Root extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <Router>\r\n                    <Switch>\r\n                        <App/>\r\n                    </Switch>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<Root/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","const EventBus  = {\r\n    events : {},\r\n    publish: function (event, data) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(callback => callback(data))\r\n    },\r\n    subscribe: function (event, callback) {\r\n        if (!this.events[event]) this.events[event] = [];\r\n        this.events[event].push(callback)\r\n    }\r\n};\r\n\r\nmodule.exports = {EventBus};"],"sourceRoot":""}